(()=>{var e={};e.id=398,e.ids=[398],e.modules={30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},35341:(e,t,r)=>{"use strict";r.r(t),r.d(t,{headerHooks:()=>pu,originalPathname:()=>pp,patchFetch:()=>pf,requestAsyncStorage:()=>pa,routeModule:()=>po,serverHooks:()=>pc,staticGenerationAsyncStorage:()=>pl,staticGenerationBailout:()=>pd});var n,i,s,o,a,l,c,u,d,p,f,h,g,m={};r.r(m),r.d(m,{HEAD:()=>pi,POST:()=>ps});var y=r(95419),w=r(69108),b=r(99678),v=r(6733),E=r(8624),S=r(16904),x=r(26836),A=r(6037),P=r(24041);let I=e=>{let t=e.httpHandler;return{setHttpHandler(e){t=e},httpHandler:()=>t,updateHttpClientConfig(e,r){t.updateHttpClientConfig(e,r)},httpHandlerConfigs:()=>t.httpHandlerConfigs()}},T=e=>({httpHandler:e.httpHandler()});(function(e){e.HEADER="header",e.QUERY="query"})(n||(n={})),function(e){e.HEADER="header",e.QUERY="query"}(i||(i={})),function(e){e.HTTP="http",e.HTTPS="https"}(s||(s={})),function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"}(o||(o={})),function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"}(a||(a={}));let O="__smithy_context";(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(l||(l={})),function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"}(c||(c={}));class k{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){return!!e&&"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers}clone(){var e;let t=new k({...this,headers:{...this.headers}});return t.query&&(t.query=Object.keys(e=t.query).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})),t}}class C{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){return!!e&&"number"==typeof e.statusCode&&"object"==typeof e.headers}}let _=e=>t=>async r=>{if(!k.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:i=""}=e.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let e=n.hostname;null!=n.port&&(e+=`:${n.port}`),n.headers.host=e}return t(r)},R={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},$=e=>({applyToStack:t=>{t.add(_(e),R)}}),N=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:i,commandName:s,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:c}=a,u=l??t.inputFilterSensitiveLog,d=c??t.outputFilterSensitiveLog,{$metadata:p,...f}=n.output;return o?.info?.({clientName:i,commandName:s,input:u(r.input),output:d(f),metadata:p}),n}catch(l){let{clientName:e,commandName:n,logger:i,dynamoDbDocumentClientOptions:s={}}=t,{overrideInputFilterSensitiveLog:o}=s,a=o??t.inputFilterSensitiveLog;throw i?.error?.({clientName:e,commandName:n,input:a(r.input),error:l,metadata:l.$metadata}),l}},D={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},j=e=>({applyToStack:e=>{e.add(N(),D)}}),U="X-Amzn-Trace-Id",M=e=>t=>async r=>{var n;let{request:i}=r;if(!k.isInstance(i)||"node"!==e.runtime||i.headers.hasOwnProperty(U))return t(r);let s=process.env.AWS_LAMBDA_FUNCTION_NAME,o=process.env._X_AMZN_TRACE_ID;return"string"==typeof s&&s.length>0&&"string"==typeof(n=o)&&n.length>0&&(i.headers[U]=o),t({...r,request:i})},F={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},z=e=>({applyToStack:t=>{t.add(M(e),F)}}),q=(e,t,r)=>{let n,i,s;let o=!1,a=async()=>{i||(i=e());try{n=await i,s=!0,o=!1}finally{i=void 0}return n};return void 0===t?async e=>((!s||e?.forceRefresh)&&(n=await a()),n):async e=>((!s||e?.forceRefresh)&&(n=await a()),o||(r&&!r(n)?o=!0:t(n)&&await a()),n)};var L=r(15007);let B={},W={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),B[e]=t,W[t]=e}function V(e){let t="";for(let r=0;r<e.byteLength;r++)t+=B[e[r]];return t}class H{constructor(e){if(this.bytes=e,8!==e.byteLength)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x7fffffffffffffff||e<-0x8000000000000000)throw Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let t=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)t[r]=n;return e<0&&K(t),new H(t)}valueOf(){let e=this.bytes.slice(0),t=128&e[0];return t&&K(e),parseInt(V(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function K(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}class G{constructor(e,t){this.toUtf8=e,this.fromUtf8=t}format(e){let t=[];for(let r of Object.keys(e)){let n=this.fromUtf8(r);t.push(Uint8Array.from([n.byteLength]),n,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),n=0;for(let e of t)r.set(e,n),n+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let s=new Uint8Array(i.buffer);return s.set(e.value,3),s;case"string":let o=this.fromUtf8(e.value),a=new DataView(new ArrayBuffer(3+o.byteLength));a.setUint8(0,7),a.setUint16(1,o.byteLength,!1);let l=new Uint8Array(a.buffer);return l.set(o,3),l;case"timestamp":let c=new Uint8Array(9);return c[0]=8,c.set(H.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!ei.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(function(e){if(e.length%2!=0)throw Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in W)t[r/2]=W[n];else throw Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}(e.value.replace(/\-/g,"")),1),u}}parse(e){let t={},r=0;for(;r<e.byteLength;){let n=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,n));switch(r+=n,e.getUint8(r++)){case 0:t[i]={type:X,value:!0};break;case 1:t[i]={type:X,value:!1};break;case 2:t[i]={type:J,value:e.getInt8(r++)};break;case 3:t[i]={type:Y,value:e.getInt16(r,!1)},r+=2;break;case 4:t[i]={type:Z,value:e.getInt32(r,!1)},r+=4;break;case 5:t[i]={type:Q,value:new H(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:let s=e.getUint16(r,!1);r+=2,t[i]={type:ee,value:new Uint8Array(e.buffer,e.byteOffset+r,s)},r+=s;break;case 7:let o=e.getUint16(r,!1);r+=2,t[i]={type:et,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,o))},r+=o;break;case 8:t[i]={type:er,value:new Date(new H(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:let a=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[i]={type:en,value:`${V(a.subarray(0,4))}-${V(a.subarray(4,6))}-${V(a.subarray(6,8))}-${V(a.subarray(8,10))}-${V(a.subarray(10))}`};break;default:throw Error("Unrecognized header type tag")}}return t}}!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(u||(u={}));let X="boolean",J="byte",Y="short",Z="integer",Q="long",ee="binary",et="string",er="timestamp",en="uuid",ei=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class es{constructor(e,t){this.headerMarshaller=new G(e,t),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){let e=this.messageBuffer.pop(),t=this.isEndOfStream;return{getMessage:()=>e,isEndOfStream:()=>t}}getAvailableMessages(){let e=this.messageBuffer;this.messageBuffer=[];let t=this.isEndOfStream;return{getMessages:()=>e,isEndOfStream:()=>t}}encode({headers:e,body:t}){let r=this.headerMarshaller.format(e),n=r.byteLength+t.byteLength+16,i=new Uint8Array(n),s=new DataView(i.buffer,i.byteOffset,i.byteLength),o=new L.Crc32;return s.setUint32(0,n,!1),s.setUint32(4,r.byteLength,!1),s.setUint32(8,o.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(t,r.byteLength+12),s.setUint32(n-4,o.update(i.subarray(8,n-4)).digest(),!1),i}decode(e){let{headers:t,body:r}=function({byteLength:e,byteOffset:t,buffer:r}){if(e<16)throw Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),i=n.getUint32(0,!1);if(e!==i)throw Error("Reported message length does not match received message length");let s=n.getUint32(4,!1),o=n.getUint32(8,!1),a=n.getUint32(e-4,!1),l=new L.Crc32().update(new Uint8Array(r,t,8));if(o!==l.digest())throw Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${l.digest()})`);if(l.update(new Uint8Array(r,t+8,e-12)),a!==l.digest())throw Error(`The message checksum (${l.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+8+4,s),body:new Uint8Array(r,t+8+4+s,i-s-16)}}(e);return{headers:this.headerMarshaller.parse(t),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class eo{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.inputStream){let t=this.options.decoder.decode(e);yield t}}}class ea{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.messageStream){let t=this.options.encoder.encode(e);yield t}this.options.includeEndFrame&&(yield new Uint8Array(0))}}class el{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.messageStream){let t=await this.options.deserializer(e);void 0!==t&&(yield t)}}}class ec{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let e of this.options.inputStream){let t=this.options.serializer(e);yield t}}}let eu=e=>e[O]||(e[O]={}),ed=e=>{if("function"==typeof e)return e;let t=Promise.resolve(e);return()=>t},ep=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e);var ef=r(14300);let eh=(e,t=0,r=e.byteLength-t)=>{if(!ep(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return ef.Buffer.from(e,t,r)},eg=(e,t)=>{if("string"!=typeof e)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?ef.Buffer.from(e,t):ef.Buffer.from(e)},em=e=>{let t=eg(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},ey=e=>"string"==typeof e?em(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),ew=e=>eh(e.buffer,e.byteOffset,e.byteLength).toString("utf8"),eb="X-Amz-Date",ev="X-Amz-Signature",eE="X-Amz-Security-Token",eS="authorization",ex=eb.toLowerCase(),eA=[eS,ex,"date"],eP=ev.toLowerCase(),eI="x-amz-content-sha256",eT=eE.toLowerCase(),eO={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},ek=/^proxy-/,eC=/^sec-/,e_="AWS4-HMAC-SHA256",eR="aws4_request",e$={},eN=[],eD=(e,t,r)=>`${e}/${t}/${r}/${eR}`,ej=async(e,t,r,n,i)=>{let s=await eU(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${i}:${V(s)}:${t.sessionToken}`;if(o in e$)return e$[o];for(eN.push(o);eN.length>50;)delete e$[eN.shift()];let a=`AWS4${t.secretAccessKey}`;for(let t of[r,n,i,eR])a=await eU(e,a,t);return e$[o]=a},eU=(e,t,r)=>{let n=new e(t);return n.update(ey(r)),n.digest()},eM=({headers:e},t,r)=>{let n={};for(let i of Object.keys(e).sort()){if(void 0==e[i])continue;let s=i.toLowerCase();(!(s in eO||t?.has(s)||ek.test(s)||eC.test(s))||r&&(!r||r.has(s)))&&(n[s]=e[i].trim().replace(/\s+/g," "))}return n},eF=e=>encodeURIComponent(e).replace(/[!'()*]/g,ez),ez=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,eq=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===eP)continue;t.push(n);let i=e[n];"string"==typeof i?r[n]=`${eF(n)}=${eF(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).reduce((e,t)=>e.concat([`${eF(n)}=${eF(t)}`]),[]).sort().join("&"))}return t.map(e=>r[e]).filter(e=>e).join("&")},eL=async({headers:e,body:t},r)=>{for(let t of Object.keys(e))if(t.toLowerCase()===eI)return e[t];if(void 0==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||ep(t)){let e=new r;return e.update(ey(t)),V(await e.digest())}return"UNSIGNED-PAYLOAD"},eB=(e,t)=>{for(let r of(e=e.toLowerCase(),Object.keys(t)))if(e===r.toLowerCase())return!0;return!1},eW=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?eV(t):void 0}),eV=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{}),eH=(e,t={})=>{let{headers:r,query:n={}}="function"==typeof e.clone?e.clone():eW(e);for(let e of Object.keys(r)){let i=e.toLowerCase();"x-amz-"!==i.slice(0,6)||t.unhoistableHeaders?.has(i)||(n[e]=r[e],delete r[e])}return{...e,headers:r,query:n}},eK=e=>{for(let t of Object.keys((e="function"==typeof e.clone?e.clone():eW(e)).headers))eA.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},eG=e=>eX(e).toISOString().replace(/\.\d{3}Z$/,"Z"),eX=e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e;class eJ{constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:i,uriEscapePath:s=!0}){this.headerMarshaller=new G(ew,em),this.service=n,this.sha256=i,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=ed(r),this.credentialProvider=ed(t)}async presign(e,t={}){let{signingDate:r=new Date,expiresIn:n=3600,unsignableHeaders:i,unhoistableHeaders:s,signableHeaders:o,signingRegion:a,signingService:l}=t,c=await this.credentialProvider();this.validateResolvedCredentials(c);let u=a??await this.regionProvider(),{longDate:d,shortDate:p}=eY(r);if(n>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let f=eD(p,u,l??this.service),h=eH(eK(e),{unhoistableHeaders:s});c.sessionToken&&(h.query[eE]=c.sessionToken),h.query["X-Amz-Algorithm"]=e_,h.query["X-Amz-Credential"]=`${c.accessKeyId}/${f}`,h.query[eb]=d,h.query["X-Amz-Expires"]=n.toString(10);let g=eM(h,i,o);return h.query["X-Amz-SignedHeaders"]=eZ(g),h.query[ev]=await this.getSignature(d,f,this.getSigningKey(c,u,p,l),this.createCanonicalRequest(h,g,await eL(e,this.sha256))),h}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:n,signingRegion:i,signingService:s}){let o=i??await this.regionProvider(),{shortDate:a,longDate:l}=eY(r),c=eD(a,o,s??this.service),u=await eL({headers:{},body:t},this.sha256),d=new this.sha256;d.update(e);let p=["AWS4-HMAC-SHA256-PAYLOAD",l,c,n,V(await d.digest()),u].join("\n");return this.signString(p,{signingDate:r,signingRegion:o,signingService:s})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:n}){return this.signEvent({headers:this.headerMarshaller.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:n,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:n}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let s=r??await this.regionProvider(),{shortDate:o}=eY(t),a=new this.sha256(await this.getSigningKey(i,s,o,n));return a.update(ey(e)),V(await a.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:n,signingRegion:i,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=i??await this.regionProvider(),l=eK(e),{longDate:c,shortDate:u}=eY(t),d=eD(u,a,s??this.service);l.headers[ex]=c,o.sessionToken&&(l.headers[eT]=o.sessionToken);let p=await eL(l,this.sha256);!eB(eI,l.headers)&&this.applyChecksum&&(l.headers[eI]=p);let f=eM(l,n,r),h=await this.getSignature(c,d,this.getSigningKey(o,a,u,s),this.createCanonicalRequest(l,f,p));return l.headers[eS]=`${e_} Credential=${o.accessKeyId}/${d}, SignedHeaders=${eZ(f)}, Signature=${h}`,l}createCanonicalRequest(e,t,r){let n=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${eq(e)}
${n.map(e=>`${e}:${t[e]}`).join("\n")}

${n.join(";")}
${r}`}async createStringToSign(e,t,r){let n=new this.sha256;n.update(ey(r));let i=await n.digest();return`${e_}
${e}
${t}
${V(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let r of e.split("/"))r?.length!==0&&"."!==r&&(".."===r?t.pop():t.push(r));return encodeURIComponent(`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`).replace(/%2F/g,"/")}return e}async getSignature(e,t,r,n){let i=await this.createStringToSign(e,t,n),s=new this.sha256(await r);return s.update(ey(i)),V(await s.digest())}getSigningKey(e,t,r,n){return ej(this.sha256,e,r,t,n||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw Error("Resolved credential object is not valid")}}let eY=e=>{let t=eG(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},eZ=e=>Object.keys(e).sort().join(";"),eQ=e=>{let t;let r=e.credentials?e0(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:n=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:s}=e;return t=e.signer?ed(e.signer):e.regionInfoProvider?()=>ed(e.region)().then(async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t]).then(([t,i])=>{let{signingRegion:o,signingService:a}=t;e.signingRegion=e.signingRegion||o||i,e.signingName=e.signingName||a||e.serviceId;let l={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:n};return new(e.signerConstructor||eJ)(l)}):async t=>{let i=(t=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await ed(e.region)(),properties:{}},t)).signingRegion,o=t.signingName;e.signingRegion=e.signingRegion||i,e.signingName=e.signingName||o||e.serviceId;let a={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:n};return new(e.signerConstructor||eJ)(a)},{...e,systemClockOffset:i,signingEscapePath:n,credentials:r,signer:t}},e0=e=>"function"==typeof e?q(e,e=>void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5,e=>void 0!==e.expiration):ed(e),e1=e=>new Date(Date.now()+e),e2=(e,t)=>Math.abs(e1(t).getTime()-e)>=3e5,e3=(e,t)=>{let r=Date.parse(e);return e2(r,t)?r-Date.now():t},e6=e=>(t,r)=>async function(n){let i;if(!k.isInstance(n.request))return t(n);let s=r.endpointV2?.properties?.authSchemes?.[0],o=s?.name==="sigv4a"?s?.signingRegionSet?.join(","):void 0,a=await e.signer(s),l={signingDate:e1(e.systemClockOffset),signingRegion:o||r.signing_region,signingService:r.signing_service};if(r.s3ExpressIdentity){if((i=await a.signWithCredentials(n.request,r.s3ExpressIdentity,l)).headers["X-Amz-Security-Token"]||i.headers["x-amz-security-token"])throw Error("X-Amz-Security-Token must not be set for s3-express requests.")}else i=await a.sign(n.request,l);let c=await t({...n,request:i}).catch(t=>{let r=t.ServerTime??e8(t.$response);throw r&&(e.systemClockOffset=e3(r,e.systemClockOffset)),t}),u=e8(c.response);return u&&(e.systemClockOffset=e3(u,e.systemClockOffset)),c},e8=e=>C.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,e4={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},e5=e=>({applyToStack:t=>{t.addRelativeTo(e6(e),e4)}});function e7(e){return{...e,customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent}}let e9=RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),te=e=>e9.test(e)||e.startsWith("[")&&e.endsWith("]"),tt=RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),tr=(e,t=!1)=>{if(!t)return tt.test(e);for(let t of e.split("."))if(!tr(t))return!1;return!0},tn={},ti="endpoints";function ts(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${ts(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(ts).join(", ")})`:JSON.stringify(e,null,2)}class to extends Error{constructor(e){super(e),this.name="EndpointError"}}let ta=e=>{let t=e.split("."),r=[];for(let n of t){let t=n.indexOf("[");if(-1!==t){if(n.indexOf("]")!==n.length-1)throw new to(`Path: '${e}' does not end with ']'`);let i=n.slice(t+1,-1);if(Number.isNaN(parseInt(i)))throw new to(`Invalid array index: '${i}' in path: '${e}'`);0!==t&&r.push(n.slice(0,t)),r.push(i)}else r.push(n)}return r},tl=(e,t)=>ta(t).reduce((r,n)=>{if("object"!=typeof r)throw new to(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),tc={[s.HTTP]:80,[s.HTTPS]:443},tu={booleanEquals:(e,t)=>e===t,getAttr:tl,isSet:e=>null!=e,isValidHostLabel:tr,not:e=>!e,parseURL:e=>{let t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){let{hostname:t,port:r,protocol:n="",path:i="",query:s={}}=e,o=new URL(`${n}//${t}${r?`:${r}`:""}${i}`);return o.search=Object.entries(s).map(([e,t])=>`${e}=${t}`).join("&"),o}return new URL(e)}catch(e){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:i,pathname:o,protocol:a,search:l}=t;if(l)return null;let c=a.slice(0,-1);if(!Object.values(s).includes(c))return null;let u=te(i),d=r.includes(`${n}:${tc[c]}`)||"string"==typeof e&&e.includes(`${n}:${tc[c]}`),p=`${n}${d?`:${tc[c]}`:""}`;return{scheme:c,authority:p,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:u}},stringEquals:(e,t)=>e===t,substring:(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},td=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},i=0;for(;i<e.length;){let t=e.indexOf("{",i);if(-1===t){r.push(e.slice(i));break}r.push(e.slice(i,t));let s=e.indexOf("}",t);if(-1===s){r.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[s+1]&&(r.push(e.slice(t+1,s)),i=s+2);let o=e.substring(t+1,s);if(o.includes("#")){let[e,t]=o.split("#");r.push(tl(n[e],t))}else r.push(n[o]);i=s+1}return r.join("")},tp=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],tf=(e,t,r)=>{if("string"==typeof e)return td(e,r);if(e.fn)return th(e,r);if(e.ref)return tp(e,r);throw new to(`'${t}': ${String(e)} is not a string, function or reference.`)},th=({fn:e,argv:t},r)=>{let n=t.map(e=>["boolean","number"].includes(typeof e)?e:tf(e,"arg",r)),i=e.split(".");return i[0]in tn&&null!=i[1]?tn[i[0]][i[1]](...n):tu[e](...n)},tg=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new to(`'${e}' is already defined in Reference Record.`);let n=th(t,r);return r.logger?.debug?.(ti,`evaluateCondition: ${ts(t)} = ${ts(n)}`),{result:""===n||!!n,...null!=e&&{toAssign:{name:e,value:n}}}},tm=(e=[],t)=>{let r={};for(let n of e){let{result:e,toAssign:i}=tg(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!e)return{result:e};i&&(r[i.name]=i.value,t.logger?.debug?.(ti,`assign: ${i.name} := ${ts(i.value)}`))}return{result:!0,referenceRecord:r}},ty=(e,t)=>Object.entries(e).reduce((e,[r,n])=>({...e,[r]:n.map(e=>{let n=tf(e,"Header value entry",t);if("string"!=typeof n)throw new to(`Header '${r}' value '${n}' is not a string`);return n})}),{}),tw=(e,t)=>{if(Array.isArray(e))return e.map(e=>tw(e,t));switch(typeof e){case"string":return td(e,t);case"object":if(null===e)throw new to(`Unexpected endpoint property: ${e}`);return tb(e,t);case"boolean":return e;default:throw new to(`Unexpected endpoint property type: ${typeof e}`)}},tb=(e,t)=>Object.entries(e).reduce((e,[r,n])=>({...e,[r]:tw(n,t)}),{}),tv=(e,t)=>{let r=tf(e,"Endpoint URL",t);if("string"==typeof r)try{return new URL(r)}catch(e){throw console.error(`Failed to construct URL with ${r}`,e),e}throw new to(`Endpoint URL must be a string, got ${typeof r}`)},tE=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:i,referenceRecord:s}=tm(r,t);if(!i)return;let o={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:l,headers:c}=n;return t.logger?.debug?.(ti,`Resolving endpoint from template: ${ts(n)}`),{...void 0!=c&&{headers:ty(c,o)},...void 0!=l&&{properties:tb(l,o)},url:tv(a,o)}},tS=(e,t)=>{let{conditions:r,error:n}=e,{result:i,referenceRecord:s}=tm(r,t);if(i)throw new to(tf(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},tx=(e,t)=>{let{conditions:r,rules:n}=e,{result:i,referenceRecord:s}=tm(r,t);if(i)return tA(n,{...t,referenceRecord:{...t.referenceRecord,...s}})},tA=(e,t)=>{for(let r of e)if("endpoint"===r.type){let e=tE(r,t);if(e)return e}else if("error"===r.type)tS(r,t);else if("tree"===r.type){let e=tx(r,t);if(e)return e}else throw new to(`Unknown endpoint rule: ${r}`);throw new to("Rules evaluation failed")},tP=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:i,rules:s}=e;t.logger?.debug?.(`${ti} Initial EndpointParams: ${ts(r)}`);let o=Object.entries(i).filter(([,e])=>null!=e.default).map(([e,t])=>[e,t.default]);if(o.length>0)for(let[e,t]of o)r[e]=r[e]??t;for(let e of Object.entries(i).filter(([,e])=>e.required).map(([e])=>e))if(null==r[e])throw new to(`Missing required parameter: '${e}'`);let a=tA(s,{endpointParams:r,logger:n,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{let{protocol:e,port:r}=new URL(t.endpointParams.Endpoint);a.url.protocol=e,a.url.port=r}catch(e){}return t.logger?.debug?.(`${ti} Resolved endpoint: ${ts(a)}`),a},tI=(e,t=!1)=>{if(t){for(let t of e.split("."))if(!tI(t))return!1;return!0}return!(!tr(e)||e.length<3||e.length>63||e!==e.toLowerCase()||te(e))},tT=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}'),tO=()=>"";tn.aws={isVirtualHostableS3Bucket:tI,parseArn:e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,i,s,o,...a]=t;return"arn"!==r||""===n||""===i||""===a[0]?null:{partition:n,service:i,region:s,accountId:o,resourceId:a[0].includes("/")?a[0].split("/"):a}},partition:e=>{let{partitions:t}=tT;for(let r of t){let{regions:t,outputs:n}=r;for(let[r,i]of Object.entries(t))if(r===e)return{...n,...i}}for(let r of t){let{regionRegex:t,outputs:n}=r;if(new RegExp(t).test(e))return{...n}}let r=t.find(e=>"aws"===e.id);if(!r)throw Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}}};let tk="user-agent",tC="x-amz-user-agent",t_=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,tR=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,t$=e=>(t,r)=>async n=>{let{request:i}=n;if(!k.isInstance(i))return t(n);let{headers:s}=i,o=r?.userAgent?.map(tN)||[],a=(await e.defaultUserAgentProvider()).map(tN),l=e?.customUserAgent?.map(tN)||[],c=tO(),u=(c?[c]:[]).concat([...a,...o,...l]).join(" "),d=[...a.filter(e=>e.startsWith("aws-sdk-")),...l].join(" ");return"browser"!==e.runtime?(d&&(s[tC]=s[tC]?`${s[tk]} ${d}`:d),s[tk]=u):s[tC]=u,t({...n,request:i})},tN=e=>{let t=e[0].split("/").map(e=>e.replace(t_,"-")).join("/"),r=e[1]?.replace(tR,"-"),n=t.indexOf("/"),i=t.substring(0,n),s=t.substring(n+1);return"api"===i&&(s=s.toLowerCase()),[i,s,r].filter(e=>e&&e.length>0).reduce((e,t,r)=>{switch(r){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}},"")},tD={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},tj=e=>({applyToStack:t=>{t.add(t$(e),tD)}}),tU=(e,t,r)=>{if(t in e){if("true"===e[t])return!0;if("false"===e[t])return!1;throw Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};!function(e){e.ENV="env",e.CONFIG="shared config entry"}(d||(d={}));let tM={environmentVariableSelector:e=>tU(e,"AWS_USE_DUALSTACK_ENDPOINT",d.ENV),configFileSelector:e=>tU(e,"use_dualstack_endpoint",d.CONFIG),default:!1},tF={environmentVariableSelector:e=>tU(e,"AWS_USE_FIPS_ENDPOINT",d.ENV),configFileSelector:e=>tU(e,"use_fips_endpoint",d.CONFIG),default:!1},tz={environmentVariableSelector:e=>e.AWS_REGION,configFileSelector:e=>e.region,default:()=>{throw Error("Region is missing")}},tq={preferredFile:"credentials"},tL=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),tB=e=>tL(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,tW=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw Error("Region is missing");return{...e,region:async()=>"string"==typeof t?tB(t):tB(await t()),useFipsEndpoint:async()=>!!tL("string"==typeof t?t:await t())||("function"!=typeof r?Promise.resolve(!!r):r())}},tV=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),tH="content-length",tK={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},tG=e=>({applyToStack:t=>{var r;t.add((r=e.bodyLengthChecker,e=>async t=>{let n=t.request;if(k.isInstance(n)){let{body:e,headers:t}=n;if(e&&-1===Object.keys(t).map(e=>e.toLowerCase()).indexOf(tH))try{let t=r(e);n.headers={...n.headers,[tH]:String(t)}}catch(e){}}return e({...t,request:n})}),tK)}}),tX=async e=>{let t=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),t0(t)){if(!0===e.ForcePathStyle)throw Error("Path-style addressing cannot be used with ARN buckets")}else tQ(t)&&(-1===t.indexOf(".")||String(e.Endpoint).startsWith("http:"))&&t.toLowerCase()===t&&!(t.length<3)||(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},tJ=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,tY=/(\d+\.){3}\d+/,tZ=/\.\./,tQ=e=>tJ.test(e)&&!tY.test(e)&&!tZ.test(e),t0=e=>{let[t,r,n,i,s,o]=e.split(":"),a="arn"===t&&e.split(":").length>=6,l=5===[t,r,n,s,o].filter(Boolean).length;if(a&&!l)throw Error(`Invalid ARN: ${e} was an invalid ARN.`);return"arn"===t&&!!r&&!!n&&!!s&&!!o},t1=(e,t,r)=>{let n=async()=>{let n=r[e]??r[t];return"function"==typeof n?n():n};return"credentialScope"===e||"CredentialScope"===t?async()=>{let e="function"==typeof r.credentials?await r.credentials():r.credentials;return e?.credentialScope??e?.CredentialScope}:"endpoint"===e||"endpoint"===t?async()=>{let e=await n();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){let{protocol:t,hostname:r,port:n,path:i}=e;return`${t}//${r}${n?":"+n:""}${i}`}}return e}:n};class t2 extends Error{constructor(e,t=!0){super(e),this.tryNextLink=t,this.name="ProviderError",Object.setPrototypeOf(this,t2.prototype)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}let t3=(...e)=>async()=>{let t;if(0===e.length)throw new t2("No providers in chain");for(let r of e)try{return await r()}catch(e){if(t=e,e?.tryNextLink)continue;throw e}throw t};class t6 extends t2{constructor(e,t=!0){super(e,t),this.tryNextLink=t,this.name="CredentialsProviderError",Object.setPrototypeOf(this,t6.prototype)}}let t8=e=>async()=>{try{let t=e(process.env);if(void 0===t)throw Error();return t}catch(t){throw new t6(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var t4=r(22037),t5=r(71017);let t7={},t9=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",re=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${t5.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let i=t9();return t7[i]||(t7[i]=(0,t4.homedir)()),t7[i]},rt="AWS_PROFILE",rr=e=>e.profile||process.env[rt]||"default";var rn=r(6113),ri=r.n(rn);let rs=e=>{let t=(0,rn.createHash)("sha1").update(e).digest("hex");return(0,t5.join)(re(),".aws","sso","cache",`${t}.json`)};var ro=r(57147);let{readFile:ra}=ro.promises,rl=async e=>{let t=rs(e);return JSON.parse(await ra(t,"utf8"))},rc=e=>Object.entries(e).filter(([e])=>{let t=e.indexOf(rb);return -1!==t&&Object.values(l).includes(e.substring(0,t))}).reduce((e,[t,r])=>{let n=t.indexOf(rb);return e[t.substring(0,n)===l.PROFILE?t.substring(n+1):t]=r,e},{...e.default&&{default:e.default}}),ru=()=>process.env.AWS_CONFIG_FILE||(0,t5.join)(re(),".aws","config"),rd=()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,t5.join)(re(),".aws","credentials"),rp=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,rf=["__proto__","profile __proto__"],rh=e=>{let t,r;let n={};for(let i of e.split(/\r?\n/)){let e=i.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){t=void 0,r=void 0;let n=e.substring(1,e.length-1),i=rp.exec(n);if(i){let[,e,,r]=i;Object.values(l).includes(e)&&(t=[e,r].join(rb))}else t=n;if(rf.includes(n))throw Error(`Found invalid profile name "${n}"`)}else if(t){let s=e.indexOf("=");if(![0,-1].includes(s)){let[o,a]=[e.substring(0,s).trim(),e.substring(s+1).trim()];if(""===a)r=o;else{r&&i.trimStart()===i&&(r=void 0),n[t]=n[t]||{};let e=r?[r,o].join(rb):o;n[t][e]=a}}}}return n},{readFile:rg}=ro.promises,rm={},ry=(e,t)=>((!rm[e]||t?.ignoreCache)&&(rm[e]=rg(e,"utf8")),rm[e]),rw=()=>({}),rb=".",rv=async(e={})=>{let{filepath:t=rd(),configFilepath:r=ru()}=e,n=await Promise.all([ry(r,{ignoreCache:e.ignoreCache}).then(rh).then(rc).catch(rw),ry(t,{ignoreCache:e.ignoreCache}).then(rh).catch(rw)]);return{configFile:n[0],credentialsFile:n[1]}},rE=e=>Object.entries(e).filter(([e])=>e.startsWith(l.SSO_SESSION+rb)).reduce((e,[t,r])=>({...e,[t.split(rb)[1]]:r}),{}),rS=()=>({}),rx=async(e={})=>ry(e.configFilepath??ru()).then(rh).then(rE).catch(rS),rA=(...e)=>{let t={};for(let r of e)for(let[e,n]of Object.entries(r))void 0!==t[e]?Object.assign(t[e],n):t[e]=n;return t},rP=async e=>{let t=await rv(e);return rA(t.configFile,t.credentialsFile)},rI=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=rr(r),{configFile:i,credentialsFile:s}=await rv(r),o=s[n]||{},a=i[n]||{},l="config"===t?{...o,...a}:{...a,...o};try{let r=e(l,"config"===t?i:s);if(void 0===r)throw Error();return r}catch(t){throw new t6(t.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}},rT=e=>()=>Promise.resolve(e),rO=e=>"function"==typeof e,rk=e=>rO(e)?async()=>await e():rT(e),rC=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>q(t3(t8(e),rI(t,n),rk(r))),r_="AWS_ENDPOINT_URL",rR="endpoint_url",r$=e=>({environmentVariableSelector:t=>{let r=t[[r_,...e.split(" ").map(e=>e.toUpperCase())].join("_")];if(r)return r;let n=t[r_];if(n)return n},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join(rb)];if(n){let t=n[[e.split(" ").map(e=>e.toLowerCase()).join("_"),rR].join(rb)];if(t)return t}}let n=t[rR];if(n)return n},default:void 0}),rN=async e=>rC(r$(e))(),rD=e=>{let t;if("string"==typeof e)return rD(new URL(e));let{hostname:r,pathname:n,port:i,protocol:s,search:o}=e;return o&&(t=function(e){let t={};if(e=e.replace(/^\?/,""))for(let r of e.split("&")){let[e,n=null]=r.split("=");e=decodeURIComponent(e),n&&(n=decodeURIComponent(n)),e in t?Array.isArray(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n}return t}(o)),{hostname:r,port:i?parseInt(i):void 0,protocol:s,path:n,query:t}},rj=e=>"object"==typeof e?"url"in e?rD(e.url):e:rD(e),rU=async(e,t,r,n)=>{if(!r.endpoint){let e=await rN(r.serviceId||"");e&&(r.endpoint=()=>Promise.resolve(rj(e)))}let i=await rM(e,t,r);if("function"!=typeof r.endpointProvider)throw Error("config.endpointProvider is not set.");return r.endpointProvider(i,n)},rM=async(e,t,r)=>{let n={},i=t?.getEndpointParameterInstructions?.()||{};for(let[t,s]of Object.entries(i))switch(s.type){case"staticContextParams":n[t]=s.value;break;case"contextParams":n[t]=e[s.name];break;case"clientContextParams":case"builtInParams":n[t]=await t1(s.name,t,r)();break;default:throw Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(s))}return 0===Object.keys(i).length&&Object.assign(n,r),"s3"===String(r.serviceId).toLowerCase()&&await tX(n),n},rF=({config:e,instructions:t})=>(r,n)=>async i=>{let s=await rU(i.input,{getEndpointParameterInstructions:()=>t},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;let e=eu(n),t=e?.selectedHttpAuthScheme?.httpAuthOption;t&&(t.signingProperties=Object.assign(t.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...i})},rz=(e,t)=>(r,n)=>async n=>{let{response:i}=await r(n);try{let r=await t(i,e);return{response:i,output:r}}catch(e){throw Object.defineProperty(e,"$response",{value:i}),"$metadata"in e||(e.message+="\n  Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object."),e}},rq=(e,t)=>(r,n)=>async i=>{let s=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw Error("No valid endpoint provider available.");let o=await t(i.input,{...e,endpoint:s});return r({...i,request:o})},rL={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},rB={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function rW(e,t,r){return{applyToStack:n=>{n.add(rz(e,r),rL),n.add(rq(e,t),rB)}}}let rV={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:rB.name},rH=(e,t)=>({applyToStack:r=>{r.addRelativeTo(rF({config:e,instructions:t}),rV)}}),rK=e=>{let t=e.tls??!0,{endpoint:r}=e,n=null!=r?async()=>rj(await ed(r)()):void 0,i=!!r;return{...e,endpoint:n,tls:t,isCustomEndpoint:i,useDualstackEndpoint:ed(e.useDualstackEndpoint??!1),useFipsEndpoint:ed(e.useFipsEndpoint??!1)}};!function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(p||(p={}));let rG=p.STANDARD,rX=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],rJ=["TimeoutError","RequestTimeout","RequestTimeoutException"],rY=[500,502,503,504],rZ=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],rQ=e=>e.$metadata?.httpStatusCode===429||rX.includes(e.name)||e.$retryable?.throttling==!0,r0=e=>rJ.includes(e.name)||rZ.includes(e?.code||"")||rY.includes(e.$metadata?.httpStatusCode||0),r1=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;if(500<=t&&t<=599&&!r0(e))return!0}return!1};class r2{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(e=>setTimeout(e,t))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),rQ(e)){let e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());let r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=Math.floor(2*this.getCurrentTimeInSeconds())/2;if(this.requestCount++,e>this.lastTxRateBucket){let t=this.requestCount/(e-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(t*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=e}}getPrecise(e){return parseFloat(e.toFixed(8))}}let r3=()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(2e4,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}},r6=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});class r8{constructor(e){this.maxAttempts=e,this.mode=p.STANDARD,this.capacity=500,this.retryBackoffStrategy=r3(),this.maxAttemptsProvider="function"==typeof e?e:async()=>e}async acquireInitialRetryToken(e){return r6({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){let r=await this.getMaxAttempts();if(this.shouldRetry(e,t,r)){let r=t.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===r?500:100);let n=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,n):n,s=this.getCapacityCost(r);return this.capacity-=s,r6({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:s})}throw Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn("Max attempts provider could not resolve. Using default of 3"),3}}shouldRetry(e,t,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return"TRANSIENT"===e?10:5}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class r4{constructor(e,t){this.maxAttemptsProvider=e,this.mode=p.ADAPTIVE;let{rateLimiter:r}=t??{};this.rateLimiter=r??new r2,this.standardRetryStrategy=new r8(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}let r5="AWS_MAX_ATTEMPTS",r7="max_attempts",r9={environmentVariableSelector:e=>{let t=e[r5];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw Error(`Environment variable ${r5} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[r7];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw Error(`Shared config file entry ${r7} mast be a number, got "${t}"`);return r},default:3},ne=e=>{let{retryStrategy:t}=e,r=ed(e.maxAttempts??3);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await ed(e.retryMode)()===p.ADAPTIVE?new r4(r):new r8(r))}},nt={environmentVariableSelector:e=>e.AWS_RETRY_MODE,configFileSelector:e=>e.retry_mode,default:rG};class nr{trace(){}debug(){}info(){}warn(){}error(){}}let nn=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let e of t)r.push(e);return r},ni=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,ns=()=>{let e=[],t=[],r=!1,n=new Set,i=e=>e.sort((e,t)=>no[t.step]-no[e.step]||na[t.priority||"normal"]-na[e.priority||"normal"]),s=r=>{let i=!1,s=e=>{let t=nn(e.name,e.aliases);if(t.includes(r)){for(let e of(i=!0,t))n.delete(e);return!1}return!0};return e=e.filter(s),t=t.filter(s),i},o=r=>{let i=!1,s=e=>{if(e.middleware===r){for(let t of(i=!0,nn(e.name,e.aliases)))n.delete(t);return!1}return!0};return e=e.filter(s),t=t.filter(s),i},a=r=>(e.forEach(e=>{r.add(e.middleware,{...e})}),t.forEach(e=>{r.addRelativeTo(e.middleware,{...e})}),r.identifyOnResolve?.(u.identifyOnResolve()),r),l=e=>{let t=[];return e.before.forEach(e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...l(e))}),t.push(e),e.after.reverse().forEach(e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...l(e))}),t},c=(r=!1)=>{let n=[],s=[],o={};return e.forEach(e=>{let t={...e,before:[],after:[]};for(let e of nn(t.name,t.aliases))o[e]=t;n.push(t)}),t.forEach(e=>{let t={...e,before:[],after:[]};for(let e of nn(t.name,t.aliases))o[e]=t;s.push(t)}),s.forEach(e=>{if(e.toMiddleware){let t=o[e.toMiddleware];if(void 0===t){if(r)return;throw Error(`${e.toMiddleware} is not found when adding ${ni(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),i(n).map(l).reduce((e,t)=>(e.push(...t),e),[])},u={add:(t,r={})=>{let{name:i,override:s,aliases:o}=r,a={step:"initialize",priority:"normal",middleware:t,...r},l=nn(i,o);if(l.length>0){if(l.some(e=>n.has(e))){if(!s)throw Error(`Duplicate middleware name '${ni(i,o)}'`);for(let t of l){let r=e.findIndex(e=>e.name===t||e.aliases?.some(e=>e===t));if(-1===r)continue;let n=e[r];if(n.step!==a.step||a.priority!==n.priority)throw Error(`"${ni(n.name,n.aliases)}" middleware with ${n.priority} priority in ${n.step} step cannot be overridden by "${ni(i,o)}" middleware with ${a.priority} priority in ${a.step} step.`);e.splice(r,1)}}for(let e of l)n.add(e)}e.push(a)},addRelativeTo:(e,r)=>{let{name:i,override:s,aliases:o}=r,a={middleware:e,...r},l=nn(i,o);if(l.length>0){if(l.some(e=>n.has(e))){if(!s)throw Error(`Duplicate middleware name '${ni(i,o)}'`);for(let e of l){let r=t.findIndex(t=>t.name===e||t.aliases?.some(t=>t===e));if(-1===r)continue;let n=t[r];if(n.toMiddleware!==a.toMiddleware||n.relation!==a.relation)throw Error(`"${ni(n.name,n.aliases)}" middleware ${n.relation} "${n.toMiddleware}" middleware cannot be overridden by "${ni(i,o)}" middleware ${a.relation} "${a.toMiddleware}" middleware.`);t.splice(r,1)}}for(let e of l)n.add(e)}t.push(a)},clone:()=>a(ns()),use:e=>{e.applyToStack(u)},remove:e=>"string"==typeof e?s(e):o(e),removeByTag:r=>{let i=!1,s=e=>{let{tags:t,name:s,aliases:o}=e;if(t&&t.includes(r)){for(let e of nn(s,o))n.delete(e);return i=!0,!1}return!0};return e=e.filter(s),t=t.filter(s),i},concat:e=>{let t=a(ns());return t.use(e),t.identifyOnResolve(r||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:a,identify:()=>c(!0).map(e=>{let t=e.step??e.relation+" "+e.toMiddleware;return ni(e.name,e.aliases)+" - "+t}),identifyOnResolve:e=>("boolean"==typeof e&&(r=e),r),resolve:(e,t)=>{for(let r of c().map(e=>e.middleware).reverse())e=r(e,t);return r&&console.log(u.identify()),e}};return u},no={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},na={high:3,normal:2,low:1};class nl{constructor(e){this.middlewareStack=ns(),this.config=e}send(e,t,r){let n="function"==typeof t?t:r,i=e.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!n)return i(e).then(e=>e.output);i(e).then(e=>n(null,e.output),e=>n(e)).catch(()=>{})}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}let nc=/^[A-Za-z0-9+/]*={0,2}$/,nu=e=>{if(3*e.length%4!=0)throw TypeError("Incorrect padding on base64 string.");if(!nc.exec(e))throw TypeError("Invalid base64 string.");let t=eg(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},nd=e=>eh(e.buffer,e.byteOffset,e.byteLength).toString("base64");class np extends Uint8Array{static fromString(e,t="utf-8"){if("string"==typeof e)return"base64"===t?np.mutate(nu(e)):np.mutate(em(e));throw Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,np.prototype),e}transformToString(e="utf-8"){return function(e,t="utf-8"){return"base64"===t?nd(e):ew(e)}(this,e)}}var nf=r(12781),nh=r(13685),ng=r(95687);let nm=["ECONNRESET","EPIPE","ETIMEDOUT"],ny=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},nw=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",e=>{e.connecting?e.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})},nb=(e,{keepAlive:t,keepAliveMsecs:r})=>{!0===t&&e.on("socket",e=>{e.setKeepAlive(t,r||0)})},nv=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};async function nE(e,t,r=1e3){var n;let i=t.headers??{},s=i.Expect||i.expect,o=-1,a=!1;"100-continue"===s&&await Promise.race([new Promise(e=>{o=Number(setTimeout(e,Math.max(1e3,r)))}),new Promise(t=>{e.on("continue",()=>{clearTimeout(o),t()}),e.on("error",()=>{a=!0,clearTimeout(o),t()})})]),a||((n=t.body)instanceof nf.Readable?n.pipe(e):n?e.end(Buffer.from(n)):e.end())}class nS{static create(e){return"function"==typeof e?.handle?e:new nS(e)}constructor(e){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((t,r)=>{"function"==typeof e?e().then(e=>{t(this.resolveDefaultConfig(e))}).catch(r):t(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:t,connectionTimeout:r,socketTimeout:n,httpAgent:i,httpsAgent:s}=e||{};return{connectionTimeout:r,requestTimeout:t??n,httpAgent:i||new nh.Agent({keepAlive:!0,maxSockets:50}),httpsAgent:s||new ng.Agent({keepAlive:!0,maxSockets:50})}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:t}={}){return this.config||(this.config=await this.configProvider),new Promise((r,n)=>{let i,s;let o=async e=>{await i,r(e)},a=async e=>{await i,n(e)};if(!this.config)throw Error("Node HTTP request handler config is not resolved");if(t?.aborted){let e=Error("Request aborted");e.name="AbortError",a(e);return}let l="https:"===e.protocol,c=function(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=eF(r),Array.isArray(n))for(let e=0,i=n.length;e<i;e++)t.push(`${r}=${eF(n[e])}`);else{let e=r;(n||"string"==typeof n)&&(e+=`=${eF(n)}`),t.push(e)}}return t.join("&")}(e.query||{});if(null!=e.username||null!=e.password){let t=e.username??"",r=e.password??"";s=`${t}:${r}`}let u=e.path;c&&(u+=`?${c}`),e.fragment&&(u+=`#${e.fragment}`);let d={headers:e.headers,host:e.hostname,method:e.method,path:u,port:e.port,agent:l?this.config.httpsAgent:this.config.httpAgent,auth:s},p=(l?ng.request:nh.request)(d,e=>{o({response:new C({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:ny(e.headers),body:e})})});p.on("error",e=>{nm.includes(e.code)?a(Object.assign(e,{name:"TimeoutError"})):a(e)}),nw(p,a,this.config.connectionTimeout),nv(p,a,this.config.requestTimeout),t&&(t.onabort=()=>{p.abort();let e=Error("Request aborted");e.name="AbortError",a(e)});let f=d.agent;"object"==typeof f&&"keepAlive"in f&&nb(p,{keepAlive:f.keepAlive,keepAliveMsecs:f.keepAliveMsecs}),i=nE(p,e,this.config.requestTimeout).catch(n)})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(r=>({...r,[e]:t}))}httpHandlerConfigs(){return this.config??{}}}r(85158),Symbol.iterator;class nx extends nf.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,t,r){this.bufferedBytes.push(e),r()}}let nA=e=>new Promise((t,r)=>{let n=new nx;e.pipe(n),e.on("error",e=>{n.end(),r(e)}),n.on("error",r),n.on("finish",function(){t(new Uint8Array(Buffer.concat(this.bufferedBytes)))})});var nP=r(73837);let nI=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return np.mutate(e);if(!e)return np.mutate(new Uint8Array);let r=t.streamCollector(e);return np.mutate(await r)};class nT{constructor(){this.middlewareStack=ns()}static classBuilder(){return new nO}resolveMiddlewareWithContext(e,t,r,{middlewareFn:n,clientName:i,commandName:s,inputFilterSensitiveLog:o,outputFilterSensitiveLog:a,smithyContext:l,additionalContext:c,CommandCtor:u}){for(let i of n.bind(this)(u,e,t,r))this.middlewareStack.use(i);let d=e.concat(this.middlewareStack),{logger:p}=t,f={logger:p,clientName:i,commandName:s,inputFilterSensitiveLog:o,outputFilterSensitiveLog:a,[O]:{...l},...c},{requestHandler:h}=t;return d.resolve(e=>h.handle(e.request,r||{}),f)}}class nO{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,r={}){return this._smithyContext={service:e,operation:t,...r},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){let e;let t=this;return e=class extends nT{static getEndpointParameterInstructions(){return t._ep}constructor(e){super(),this.input=e,this.serialize=t._serializer,this.deserialize=t._deserializer,t._init(this)}resolveMiddleware(r,n,i){return this.resolveMiddlewareWithContext(r,n,i,{CommandCtor:e,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}let nk="***SensitiveInformation***",nC=e=>{if(null!=e){if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&nX.warn(nG(`Expected number but observed string: ${e}`)),t}if("number"==typeof e)return e;throw TypeError(`Expected number, got ${typeof e}: ${e}`)}},n_=Math.ceil(17014118346046923e22*(2-11920928955078125e-23)),nR=e=>{let t=nC(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>n_)throw TypeError(`Expected 32-bit float, got ${e}`);return t},n$=e=>{if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw TypeError(`Expected integer, got ${typeof e}: ${e}`)}},nN=e=>nU(e,32),nD=e=>nU(e,16),nj=e=>nU(e,8),nU=(e,t)=>{let r=n$(e);if(void 0!==r&&nM(r,t)!==r)throw TypeError(`Expected ${t}-bit integer, got ${e}`);return r},nM=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},nF=(e,t)=>{if(null==e){if(t)throw TypeError(`Expected a non-null value for ${t}`);throw TypeError("Expected a non-null value")}return e},nz=e=>{if(null==e)return;if("object"==typeof e&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw TypeError(`Expected object, got ${t}: ${e}`)},nq=e=>{if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return nX.warn(nG(`Expected string, got ${typeof e}: ${e}`)),String(e);throw TypeError(`Expected string, got ${typeof e}: ${e}`)}},nL=e=>"string"==typeof e?nR(nW(e)):nR(e),nB=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,nW=e=>{let t=e.match(nB);if(null===t||t[0].length!==e.length)throw TypeError("Expected real number, got implicit NaN");return parseFloat(e)},nV=e=>"string"==typeof e?nN(nW(e)):nN(e),nH=e=>"string"==typeof e?nD(nW(e)):nD(e),nK=e=>"string"==typeof e?nj(nW(e)):nj(e),nG=e=>String(TypeError(e).stack||e).split("\n").slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join("\n"),nX={warn:console.warn},nJ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nY=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),nZ=e=>{if(null==e)return;if("string"!=typeof e)throw TypeError("RFC-3339 date-times must be expressed as strings");let t=nY.exec(e);if(!t)throw TypeError("Invalid RFC-3339 date-time value");let[r,n,i,s,o,a,l,c,u]=t,d=nQ(nH(n4(n)),n3(i,"month",1,12),n3(s,"day",1,31),{hours:o,minutes:a,seconds:l,fractionalMilliseconds:c});return"Z"!=u.toUpperCase()&&d.setTime(d.getTime()-n8(u)),d},nQ=(e,t,r,n)=>{let i=t-1;return n1(e,i,r),new Date(Date.UTC(e,i,r,n3(n.hours,"hour",0,23),n3(n.minutes,"minute",0,59),n3(n.seconds,"seconds",0,60),n6(n.fractionalMilliseconds)))},n0=[31,28,31,30,31,30,31,31,30,31,30,31],n1=(e,t,r)=>{let n=n0[t];if(1===t&&n2(e)&&(n=29),r>n)throw TypeError(`Invalid day for ${nJ[t]} in ${e}: ${r}`)},n2=e=>e%4==0&&(e%100!=0||e%400==0),n3=(e,t,r,n)=>{let i=nK(n4(e));if(i<r||i>n)throw TypeError(`${t} must be between ${r} and ${n}, inclusive`);return i},n6=e=>null==e?0:1e3*nL("0."+e),n8=e=>{let t=e[0],r=1;if("+"==t)r=1;else if("-"==t)r=-1;else throw TypeError(`Offset direction, ${t}, must be "+" or "-"`);return r*(60*Number(e.substring(1,3))+Number(e.substring(4,6)))*6e4},n4=e=>{let t=0;for(;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)};class n5 extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,n5.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}}let n7=(e,t={})=>{Object.entries(t).filter(([,e])=>void 0!==e).forEach(([t,r])=>{(void 0==e[t]||""===e[t])&&(e[t]=r)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},n9=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let i=it(e),s=i.httpStatusCode?i.httpStatusCode+"":void 0;throw n7(new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:i}),t)},ie=e=>({output:t,parsedBody:r,errorCode:n})=>{n9({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},it=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ir=e=>{switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},ii=!1,is=e=>{e&&!ii&&14>parseInt(e.substring(1,e.indexOf(".")))&&(ii=!0)},io=e=>{let t=[];for(let r in o){let n=o[r];void 0!==e[n]&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(e){this._checksumAlgorithms.push(e)},checksumAlgorithms(){return this._checksumAlgorithms}}},ia=e=>{let t={};return e.checksumAlgorithms().forEach(e=>{t[e.algorithmId()]=e.checksumConstructor()}),t},il=e=>{let t=e.retryStrategy;return{setRetryStrategy(e){t=e},retryStrategy:()=>t}},ic=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},iu=e=>({...io(e),...il(e)}),id=e=>({...ia(e),...ic(e)});function ip(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}let ih=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&void 0!==e[r][t]?e[r]=e[r][t]:"object"==typeof e[r]&&null!==e[r]&&(e[r]=ih(e[r]));return e},ig=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};function im(e,t,r){let n,i;if(void 0===t&&void 0===r)n={},i=e;else{if(n=e,"function"==typeof t)return iw(n,t,i=r);i=t}for(let e of Object.keys(i)){if(!Array.isArray(i[e])){n[e]=i[e];continue}ib(n,null,i,e)}return n}ig.prototype=Object.create(String.prototype,{constructor:{value:ig,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(ig,String);let iy=(e,t)=>{let r={};for(let n in t)ib(r,e,t,n);return r},iw=(e,t,r)=>im(e,Object.entries(r).reduce((e,[r,n])=>(Array.isArray(n)?e[r]=n:"function"==typeof n?e[r]=[t,n()]:e[r]=[t,n],e),{})),ib=(e,t,r,n)=>{if(null!==t){let i=r[n];"function"==typeof i&&(i=[,i]);let[s=iv,o=iE,a=n]=i;("function"==typeof s&&s(t[a])||"function"!=typeof s&&s)&&(e[n]=o(t[a]));return}let[i,s]=r[n];if("function"==typeof s){let t;let r=void 0===i&&null!=(t=s()),o="function"==typeof i&&!!i(void 0)||"function"!=typeof i&&!!i;r?e[n]=t:o&&(e[n]=s())}else{let t=void 0===i&&null!=s,r="function"==typeof i&&!!i(s)||"function"!=typeof i&&!!i;(t||r)&&(e[n]=s)}},iv=e=>null!=e,iE=e=>e,iS=(e,t,r,n,i,s)=>{if(null!=t&&void 0!==t[r]){let t=n();if(t.length<=0)throw Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(i,s?t.split("/").map(e=>ip(e)).join("/"):ip(t))}else throw Error("No value provided for input HTTP label: "+r+".");return e},ix=e=>{if(null==e)return{};if(Array.isArray(e))return e.filter(e=>null!=e).map(ix);if("object"==typeof e){let t={};for(let r of Object.keys(e))null!=e[r]&&(t[r]=ix(e[r]));return t}return e},iA=new Uint8Array(256),iP=iA.length,iI=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,iT=[];for(let e=0;e<256;++e)iT.push((e+256).toString(16).substr(1));let iO=function(e,t=0){let r=(iT[e[t+0]]+iT[e[t+1]]+iT[e[t+2]]+iT[e[t+3]]+"-"+iT[e[t+4]]+iT[e[t+5]]+"-"+iT[e[t+6]]+iT[e[t+7]]+"-"+iT[e[t+8]]+iT[e[t+9]]+"-"+iT[e[t+10]]+iT[e[t+11]]+iT[e[t+12]]+iT[e[t+13]]+iT[e[t+14]]+iT[e[t+15]]).toLowerCase();if(!("string"==typeof r&&iI.test(r)))throw TypeError("Stringified UUID is invalid");return r},ik=function(e,t,r){let n=(e=e||{}).random||(e.rng||function(){return iP>iA.length-16&&(ri().randomFillSync(iA),iP=0),iA.slice(iP,iP+=16)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return iO(n)},iC=e=>e?.body instanceof nf.Readable||"undefined"!=typeof ReadableStream&&e?.body instanceof ReadableStream,i_=e=>e instanceof Error?e:e instanceof Object?Object.assign(Error(),e):"string"==typeof e?Error(e):Error(`AWS SDK error wrapper for ${e}`),iR=e=>(t,r)=>async n=>{let i=await e.retryStrategy(),s=await e.maxAttempts();if(!i$(i))return i?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",i.mode]]),i.retry(t,n);{let e=await i.acquireInitialRetryToken(r.partition_id),o=Error(),a=0,l=0,{request:c}=n,u=k.isInstance(c);for(u&&(c.headers["amz-sdk-invocation-id"]=ik());;)try{u&&(c.headers["amz-sdk-request"]=`attempt=${a+1}; max=${s}`);let{response:r,output:o}=await t(n);return i.recordSuccess(e),o.$metadata.attempts=a+1,o.$metadata.totalRetryDelay=l,{response:r,output:o}}catch(s){let t=iN(s);if(o=i_(s),u&&iC(c))throw(r.logger instanceof nr?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),o;try{e=await i.refreshRetryTokenForRetry(e,t)}catch(e){throw o.$metadata||(o.$metadata={}),o.$metadata.attempts=a+1,o.$metadata.totalRetryDelay=l,o}a=e.getRetryCount();let n=e.getRetryDelay();l+=n,await new Promise(e=>setTimeout(e,n))}}},i$=e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess,iN=e=>{let t={errorType:iD(e)},r=iM(e.$response);return r&&(t.retryAfterHint=r),t},iD=e=>rQ(e)?"THROTTLING":r0(e)?"TRANSIENT":r1(e)?"SERVER_ERROR":"CLIENT_ERROR",ij={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},iU=e=>({applyToStack:t=>{t.add(iR(e),ij)}}),iM=e=>{if(!C.isInstance(e))return;let t=Object.keys(e.headers).find(e=>"retry-after"===e.toLowerCase());if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(1e3*n)},iF=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),iz={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},iq={i8:"3.496.0"},iL=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),iB={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class iW extends n5{constructor(e){super(e),Object.setPrototypeOf(this,iW.prototype)}}class iV extends iW{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,iV.prototype)}}class iH extends iW{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,iH.prototype)}}class iK extends iW{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,iK.prototype)}}class iG extends iW{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,iG.prototype)}}class iX extends iW{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,iX.prototype)}}class iJ extends iW{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,iJ.prototype)}}class iY extends iW{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,iY.prototype)}}let iZ=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:nk}}),iQ=e=>({...e,...e.Credentials&&{Credentials:iZ(e.Credentials)}}),i0=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:nk}}),i1=e=>({...e,...e.Credentials&&{Credentials:iZ(e.Credentials)}});var i2=r(52123);let i3=async(e,t)=>{let r;return r=oo({...so(e,t),[sR]:sN,[s9]:s_}),sk(t,sC,"/",void 0,r)},i6=async(e,t)=>{let r;return r=oo({...sa(e,t),[sR]:sU,[s9]:s_}),sk(t,sC,"/",void 0,r)},i8=async(e,t)=>{if(e.statusCode>=300)return i4(e,t);let r=await oi(e.body,t),n={};return n=sm(r.AssumeRoleResult,t),{$metadata:sI(e),...n}},i4=async(e,t)=>{let r={...e,body:await os(e.body,t)},n=oa(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await i9(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await sn(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await si(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ss(r,t);default:return sO({output:e,parsedBody:r.body.Error,errorCode:n})}},i5=async(e,t)=>{if(e.statusCode>=300)return i7(e,t);let r=await oi(e.body,t),n={};return n=sy(r.AssumeRoleWithWebIdentityResult,t),{$metadata:sI(e),...n}},i7=async(e,t)=>{let r={...e,body:await os(e.body,t)},n=oa(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await i9(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await se(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await st(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await sr(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await sn(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await si(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ss(r,t);default:return sO({output:e,parsedBody:r.body.Error,errorCode:n})}},i9=async(e,t)=>{let r=e.body,n=sb(r.Error,t);return n7(new iV({$metadata:sI(e),...n}),r)},se=async(e,t)=>{let r=e.body,n=sv(r.Error,t);return n7(new iY({$metadata:sI(e),...n}),r)},st=async(e,t)=>{let r=e.body,n=sE(r.Error,t);return n7(new iX({$metadata:sI(e),...n}),r)},sr=async(e,t)=>{let r=e.body,n=sS(r.Error,t);return n7(new iJ({$metadata:sI(e),...n}),r)},sn=async(e,t)=>{let r=e.body,n=sx(r.Error,t);return n7(new iH({$metadata:sI(e),...n}),r)},si=async(e,t)=>{let r=e.body,n=sA(r.Error,t);return n7(new iK({$metadata:sI(e),...n}),r)},ss=async(e,t)=>{let r=e.body,n=sP(r.Error,t);return n7(new iG({$metadata:sI(e),...n}),r)},so=(e,t)=>{let r={};if(null!=e[sQ]&&(r[sQ]=e[sQ]),null!=e[s0]&&(r[s0]=e[s0]),null!=e[sK]){let n=sl(e[sK],t);e[sK]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([e,t])=>{r[`PolicyArns.${e}`]=t})}if(null!=e[sH]&&(r[sH]=e[sH]),null!=e[sL]&&(r[sL]=e[sL]),null!=e[s4]){let n=sh(e[s4],t);e[s4]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([e,t])=>{r[`Tags.${e}`]=t})}if(null!=e[s7]){let n=sf(e[s7],t);e[s7]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([e,t])=>{r[`TransitiveTagKeys.${e}`]=t})}if(null!=e[sW]&&(r[sW]=e[sW]),null!=e[s6]&&(r[s6]=e[s6]),null!=e[s5]&&(r[s5]=e[s5]),null!=e[s3]&&(r[s3]=e[s3]),null!=e[sX]){let n=sd(e[sX],t);e[sX]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([e,t])=>{r[`ProvidedContexts.${e}`]=t})}return r},sa=(e,t)=>{let r={};if(null!=e[sQ]&&(r[sQ]=e[sQ]),null!=e[s0]&&(r[s0]=e[s0]),null!=e[ot]&&(r[ot]=e[ot]),null!=e[sJ]&&(r[sJ]=e[sJ]),null!=e[sK]){let n=sl(e[sK],t);e[sK]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([e,t])=>{r[`PolicyArns.${e}`]=t})}return null!=e[sH]&&(r[sH]=e[sH]),null!=e[sL]&&(r[sL]=e[sL]),r},sl=(e,t)=>{let r={},n=1;for(let i of e)null!==i&&(Object.entries(sc(i,t)).forEach(([e,t])=>{r[`member.${n}.${e}`]=t}),n++);return r},sc=(e,t)=>{let r={};return null!=e[or]&&(r[or]=e[or]),r},su=(e,t)=>{let r={};return null!=e[sG]&&(r[sG]=e[sG]),null!=e[sq]&&(r[sq]=e[sq]),r},sd=(e,t)=>{let r={},n=1;for(let i of e)null!==i&&(Object.entries(su(i,t)).forEach(([e,t])=>{r[`member.${n}.${e}`]=t}),n++);return r},sp=(e,t)=>{let r={};return null!=e[sV]&&(r[sV]=e[sV]),null!=e[oe]&&(r[oe]=e[oe]),r},sf=(e,t)=>{let r={},n=1;for(let t of e)null!==t&&(r[`member.${n}`]=t,n++);return r},sh=(e,t)=>{let r={},n=1;for(let i of e)null!==i&&(Object.entries(sp(i,t)).forEach(([e,t])=>{r[`member.${n}.${e}`]=t}),n++);return r},sg=(e,t)=>{let r={};return null!=e[sD]&&(r[sD]=nq(e[sD])),null!=e[sM]&&(r[sM]=nq(e[sM])),r},sm=(e,t)=>{let r={};return null!=e[sz]&&(r[sz]=sw(e[sz],t)),null!=e[sj]&&(r[sj]=sg(e[sj],t)),null!=e[sY]&&(r[sY]=nV(e[sY])),null!=e[s3]&&(r[s3]=nq(e[s3])),r},sy=(e,t)=>{let r={};return null!=e[sz]&&(r[sz]=sw(e[sz],t)),null!=e[s2]&&(r[s2]=nq(e[s2])),null!=e[sj]&&(r[sj]=sg(e[sj],t)),null!=e[sY]&&(r[sY]=nV(e[sY])),null!=e[sZ]&&(r[sZ]=nq(e[sZ])),null!=e[sF]&&(r[sF]=nq(e[sF])),null!=e[s3]&&(r[s3]=nq(e[s3])),r},sw=(e,t)=>{let r={};return null!=e[s$]&&(r[s$]=nq(e[s$])),null!=e[s1]&&(r[s1]=nq(e[s1])),null!=e[s8]&&(r[s8]=nq(e[s8])),null!=e[sB]&&(r[sB]=nF(nZ(e[sB]))),r},sb=(e,t)=>{let r={};return null!=e[on]&&(r[on]=nq(e[on])),r},sv=(e,t)=>{let r={};return null!=e[on]&&(r[on]=nq(e[on])),r},sE=(e,t)=>{let r={};return null!=e[on]&&(r[on]=nq(e[on])),r},sS=(e,t)=>{let r={};return null!=e[on]&&(r[on]=nq(e[on])),r},sx=(e,t)=>{let r={};return null!=e[on]&&(r[on]=nq(e[on])),r},sA=(e,t)=>{let r={};return null!=e[on]&&(r[on]=nq(e[on])),r},sP=(e,t)=>{let r={};return null!=e[on]&&(r[on]=nq(e[on])),r},sI=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),sT=(e,t)=>nI(e,t).then(e=>t.utf8Encoder(e)),sO=ie(iW),sk=async(e,t,r,n,i)=>{let{hostname:s,protocol:o="https",port:a,path:l}=await e.endpoint(),c={protocol:o,hostname:s,port:a,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+r:l+r,headers:t};return void 0!==n&&(c.hostname=n),void 0!==i&&(c.body=i),new k(c)},sC={"content-type":"application/x-www-form-urlencoded"},s_="2011-06-15",sR="Action",s$="AccessKeyId",sN="AssumeRole",sD="AssumedRoleId",sj="AssumedRoleUser",sU="AssumeRoleWithWebIdentity",sM="Arn",sF="Audience",sz="Credentials",sq="ContextAssertion",sL="DurationSeconds",sB="Expiration",sW="ExternalId",sV="Key",sH="Policy",sK="PolicyArns",sG="ProviderArn",sX="ProvidedContexts",sJ="ProviderId",sY="PackedPolicySize",sZ="Provider",sQ="RoleArn",s0="RoleSessionName",s1="SecretAccessKey",s2="SubjectFromWebIdentityToken",s3="SourceIdentity",s6="SerialNumber",s8="SessionToken",s4="Tags",s5="TokenCode",s7="TransitiveTagKeys",s9="Version",oe="Value",ot="WebIdentityToken",or="arn",on="message",oi=(e,t)=>sT(e,t).then(e=>{if(e.length){let t=new i2.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>""===t.trim()&&t.includes("\n")?"":void 0});t.addEntity("#xD","\r"),t.addEntity("#10","\n");let r=t.parse(e),n="#text",i=Object.keys(r)[0],s=r[i];return s[n]&&(s[i]=s[n],delete s[n]),ih(s)}return{}}),os=async(e,t)=>{let r=await oi(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},oo=e=>Object.entries(e).map(([e,t])=>ip(e)+"="+ip(t)).join("&"),oa=(e,t)=>t.Error?.Code!==void 0?t.Error.Code:404==e.statusCode?"NotFound":void 0;class ol extends nT.classBuilder().ep({...iB}).m(function(e,t,r,n){return[rW(r,this.serialize,this.deserialize),rH(r,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,iQ).ser(i3).de(i8).build(){}class oc extends nT.classBuilder().ep({...iB}).m(function(e,t,r,n){return[rW(r,this.serialize,this.deserialize),rH(r,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(i0,i1).ser(i6).de(i5).build(){}let ou="us-east-1",od=e=>"function"!=typeof e?void 0===e?ou:e:async()=>{try{return await e()}catch(e){return ou}},op=(e,t)=>{let r,n;return async(i,s)=>{if(n=i,!r){let{logger:i,region:s,requestHandler:o}=e;r=new t({logger:i,credentialDefaultProvider:()=>async()=>n,region:od(s||e.region),...o?{requestHandler:o}:{}})}let{Credentials:o}=await r.send(new ol(s));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,credentialScope:o.CredentialScope}}},of=(e,t)=>{let r;return async n=>{if(!r){let{logger:n,region:i,requestHandler:s}=e;r=new t({logger:n,region:od(i||e.region),...s?{requestHandler:s}:{}})}let{Credentials:i}=await r.send(new oc(n));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,credentialScope:i.CredentialScope}}},oh=e=>t=>e({roleAssumer:op(t,t.stsClientCtor),roleAssumerWithWebIdentity:of(t,t.stsClientCtor),...t}),og=(e,t)=>(r,n)=>async i=>{let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,i.input)),o=function(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}(e.httpAuthSchemes),a=eu(n),l=[];for(let r of s){let i=o.get(r.schemeId);if(!i){l.push(`HttpAuthScheme \`${r.schemeId}\` was not enabled for this service.`);continue}let s=i.identityProvider(await t.identityProviderConfigProvider(e));if(!s){l.push(`HttpAuthScheme \`${r.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:c={},signingProperties:u={}}=r.propertiesExtractor?.(e,n)||{};r.identityProperties=Object.assign(r.identityProperties||{},c),r.signingProperties=Object.assign(r.signingProperties||{},u),a.selectedHttpAuthScheme={httpAuthOption:r,identity:await s(r.identityProperties),signer:i.signer};break}if(!a.selectedHttpAuthScheme)throw Error(l.join("\n"));return r(i)},om={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:rV.name},oy=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(og(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),om)}});rB.name;let ow=e=>e=>{throw e},ob=(e,t)=>{},ov=e=>(e,t)=>async r=>{if(!k.isInstance(r.request))return e(r);let n=eu(t).selectedHttpAuthScheme;if(!n)throw Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:s,signer:o}=n,a=await e({...r,request:await o.sign(r.request,s,i)}).catch((o.errorHandler||ow)(i));return(o.successHandler||ob)(a.response,i),a},oE={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:ij.name},oS=e=>({applyToStack:t=>{t.addRelativeTo(ov(e),oE)}});class ox{constructor(e){for(let[t,r]of(this.authSchemes=new Map,Object.entries(e)))void 0!==r&&this.authSchemes.set(t,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}class oA{async sign(e,t,r){return e}}let oP=e=>oI(e)&&e.expiration.getTime()-Date.now()<3e5,oI=e=>void 0!==e.expiration,oT=(e,t,r)=>{let n,i,s;if(void 0===e)return;let o="function"!=typeof e?async()=>Promise.resolve(e):e,a=!1,l=async e=>{i||(i=o(e));try{n=await i,s=!0,a=!1}finally{i=void 0}return n};return void 0===t?async e=>((!s||e?.forceRefresh)&&(n=await l(e)),n):async e=>((!s||e?.forceRefresh)&&(n=await l(e)),a||(r(n)?t(n)&&await l(e):a=!0),n)},oO=e=>{if("function"==typeof e)return e;let t=Promise.resolve(e);return()=>t};class ok{constructor(e,t){this.input=e,this.context=t,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:e,protocol:t="https",port:r,path:n}=await this.context.endpoint();for(let e of(this.path=n,this.resolvePathStack))e(this.path);return new k({protocol:t,hostname:this.hostname||e,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(t=>{this.path=`${t?.endsWith("/")?t.slice(0,-1):t||""}`+e}),this}p(e,t,r,n){return this.resolvePathStack.push(i=>{this.path=iS(i,this.input,e,t,r,n)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}let oC=e=>{let t,r;e.credentials&&(t=oT(e.credentials,oP,oI)),t||(t=e.credentialDefaultProvider?oO(e.credentialDefaultProvider(e)):async()=>{throw Error("`credentials` is missing")});let{signingEscapePath:n=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:s}=e;return r=e.signer?oO(e.signer):e.regionInfoProvider?()=>oO(e.region)().then(async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t]).then(([r,i])=>{let{signingRegion:o,signingService:a}=r;e.signingRegion=e.signingRegion||o||i,e.signingName=e.signingName||a||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:n};return new(e.signerConstructor||eJ)(l)}):async r=>{let i=(r=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await oO(e.region)(),properties:{}},r)).signingRegion,o=r.signingName;e.signingRegion=e.signingRegion||i,e.signingName=e.signingName||o||e.serviceId;let a={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:n};return new(e.signerConstructor||eJ)(a)},{...e,systemClockOffset:i,signingEscapePath:n,credentials:t,signer:r}},o_=async(e,t,r)=>({operation:eu(t).operation,region:await ed(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),oR=e=>{let t=[];switch(e.operation){case"AssumeRoleWithSAML":case"AssumeRoleWithWebIdentity":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push({schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})})}return t},o$=e=>({...e,stsClientCtor:uK}),oN=e=>({...oC(o$(e))}),oD={i8:"3.496.0"},oj=!1,oU=e=>{e&&!oj&&16>parseInt(e.substring(1,e.indexOf(".")))&&(oj=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 14.x on May 1, 2024.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to an active Node.js LTS version.

More information can be found at: https://a.co/dzr2AJd`))},oM=e=>new Date(Date.now()+e),oF=e=>C.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,oz=(e,t)=>Math.abs(oM(t).getTime()-e)>=3e5,oq=(e,t)=>{let r=Date.parse(e);return oz(r,t)?r-Date.now():t},oL=(e,t)=>{if(!t)throw Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},oB=async e=>{let t=oL("context",e.context),r=oL("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],i=oL("signer",r.signer);return{config:r,signer:await i(n),signingRegion:e?.signingRegion,signingName:e?.signingName}};class oW{async sign(e,t,r){if(!k.isInstance(e))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:n,signer:i,signingRegion:s,signingName:o}=await oB(r);return await i.sign(e,{signingDate:oM(n.systemClockOffset),signingRegion:s,signingService:o})}errorHandler(e){return t=>{let r=t.ServerTime??oF(t.$response);if(r){let t=oL("config",e.config);t.systemClockOffset=oq(r,t.systemClockOffset)}throw t}}successHandler(e,t){let r=oF(e);if(r){let e=oL("config",t.config);e.systemClockOffset=oq(r,e.systemClockOffset)}}}let oV=()=>async()=>{let e=process.env.AWS_ACCESS_KEY_ID,t=process.env.AWS_SECRET_ACCESS_KEY,r=process.env.AWS_SESSION_TOKEN,n=process.env.AWS_CREDENTIAL_EXPIRATION,i=process.env.AWS_CREDENTIAL_SCOPE;if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)},...i&&{credentialScope:i}};throw new t6("Unable to find environment variable credentials.")};var oH=r(57310);function oK(e){return new Promise((t,r)=>{let n=(0,nh.request)({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",e=>{r(Object.assign(new t2("Unable to connect to instance metadata service"),e)),n.destroy()}),n.on("timeout",()=>{r(new t2("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",e=>{let{statusCode:i=400}=e;(i<200||300<=i)&&(r(Object.assign(new t2("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let s=[];e.on("data",e=>{s.push(e)}),e.on("end",()=>{t(ef.Buffer.concat(s)),n.destroy()})}),n.end()})}let oG=e=>!!e&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration,oX=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}),oJ=1e3,oY=0,oZ=({maxRetries:e=oY,timeout:t=oJ})=>({maxRetries:e,timeout:t}),oQ=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},o0="AWS_CONTAINER_CREDENTIALS_FULL_URI",o1="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",o2="AWS_CONTAINER_AUTHORIZATION_TOKEN",o3=(e={})=>{let{timeout:t,maxRetries:r}=oZ(e);return()=>oQ(async()=>{let e=await o5(),r=JSON.parse(await o6(t,e));if(!oG(r))throw new t6("Invalid response received from instance metadata service.");return oX(r)},r)},o6=async(e,t)=>(process.env[o2]&&(t.headers={...t.headers,Authorization:process.env[o2]}),(await oK({...t,timeout:e})).toString()),o8={localhost:!0,"127.0.0.1":!0},o4={"http:":!0,"https:":!0},o5=async()=>{if(process.env[o1])return{hostname:"169.254.170.2",path:process.env[o1]};if(process.env[o0]){let e=(0,oH.parse)(process.env[o0]);if(!e.hostname||!(e.hostname in o8))throw new t6(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in o4))throw new t6(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new t6(`The container metadata credential provider cannot be used unless the ${o1} or ${o0} environment variable is set`,!1)};class o7 extends t6{constructor(e,t=!0){super(e,t),this.tryNextLink=t,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,o7.prototype)}}!function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"}(f||(f={}));let o9={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT,configFileSelector:e=>e.ec2_metadata_service_endpoint,default:void 0};!function(e){e.IPv4="IPv4",e.IPv6="IPv6"}(h||(h={}));let ae={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE,configFileSelector:e=>e.ec2_metadata_service_endpoint_mode,default:h.IPv4},at=async()=>rD(await ar()||await an()),ar=async()=>rC(o9)(),an=async()=>{let e=await rC(ae)();switch(e){case h.IPv4:return f.IPv4;case h.IPv6:return f.IPv6;default:throw Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(h)}`)}},ai=(e,t)=>{let r=new Date(Date.now()+1e3*(300+Math.floor(300*Math.random())));t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html");let n=e.originalExpiration??e.expiration;return{...e,...n?{originalExpiration:n}:{},expiration:r}},as=(e,t={})=>{let r;let n=t?.logger||console;return async()=>{let t;try{(t=await e()).expiration&&t.expiration.getTime()<Date.now()&&(t=ai(t,n))}catch(e){if(r)n.warn("Credential renew failed: ",e),t=ai(r,n);else throw e}return r=t,t}},ao="/latest/meta-data/iam/security-credentials/",aa="AWS_EC2_METADATA_V1_DISABLED",al="ec2_metadata_v1_disabled",ac="x-aws-ec2-metadata-token",au=(e={})=>as(ad(e),{logger:e.logger}),ad=e=>{let t=!1,{logger:r,profile:n}=e,{timeout:i,maxRetries:s}=oZ(e),o=async(r,i)=>{if(t||i.headers?.[ac]==null){let t=!1,r=!1,i=await rC({environmentVariableSelector:e=>{let t=e[aa];if(r=!!t&&"false"!==t,void 0===t)throw new t6(`${aa} not set in env, checking config file next.`);return r},configFileSelector:e=>{let r=e[al];return t=!!r&&"false"!==r},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||i){let n=[];throw e.ec2MetadataV1Disabled&&n.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),t&&n.push(`config file profile (${al})`),r&&n.push(`process environment variable (${aa})`),new o7(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${n.join(", ")}].`)}}let s=(await oQ(async()=>{let e;try{e=await af(i)}catch(e){throw 401===e.statusCode&&(t=!1),e}return e},r)).trim();return oQ(async()=>{let e;try{e=await ah(s,i)}catch(e){throw 401===e.statusCode&&(t=!1),e}return e},r)};return async()=>{let e=await at();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),o(s,{...e,timeout:i});{let n;try{n=(await ap({...e,timeout:i})).toString()}catch(n){if(n?.statusCode===400)throw Object.assign(n,{message:"EC2 Metadata token request returned error"});return("TimeoutError"===n.message||[403,404,405].includes(n.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),o(s,{...e,timeout:i})}return o(s,{...e,headers:{[ac]:n},timeout:i})}}},ap=async e=>oK({...e,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),af=async e=>(await oK({...e,path:ao})).toString(),ah=async(e,t)=>{let r=JSON.parse((await oK({...t,path:ao+e})).toString());if(!oG(r))throw new t6("Invalid response received from instance metadata service.");return oX(r)},ag=(e,t)=>{let r={EcsContainer:o3,Ec2InstanceMetadata:au,Environment:oV};if(e in r)return r[e]();throw new t6(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)},am=e=>!!e&&"object"==typeof e&&"string"==typeof e.role_arn&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(ay(e)||aw(e)),ay=e=>"string"==typeof e.source_profile&&void 0===e.credential_source,aw=e=>"string"==typeof e.credential_source&&void 0===e.source_profile,ab=async(e,t,r,n={})=>{let i=t[e];if(!r.roleAssumer)throw new t6(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=i;if(s&&s in n)throw new t6(`Detected a cycle attempting to resolve credentials for profile ${rr(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let o=s?ui(s,t,r,{...n,[s]:!0}):ag(i.credential_source,e)(),a={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:l}=i;if(l){if(!r.mfaCodeProvider)throw new t6(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=l,a.TokenCode=await r.mfaCodeProvider(l)}let c=await o;return r.roleAssumer(c,a)};var av=r(32081);let aE=(e,t)=>{if(1!==t.Version)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(void 0===t.AccessKeyId||void 0===t.SecretAccessKey)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope}}},aS=async(e,t)=>{let r=t[e];if(t[e]){let t=r.credential_process;if(void 0!==t){let r=(0,nP.promisify)(av.exec);try{let n;let{stdout:i}=await r(t);try{n=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return aE(e,n)}catch(e){throw new t6(e.message)}}else throw new t6(`Profile ${e} did not contain credential_process.`)}else throw new t6(`Profile ${e} could not be found in shared credentials file.`)},ax=(e={})=>async()=>{let t=await rP(e);return aS(rr(e),t)},aA=e=>!!e&&"object"==typeof e&&"string"==typeof e.credential_process,aP=async(e,t)=>ax({...e,profile:t})(),aI=e=>e&&("string"==typeof e.sso_start_url||"string"==typeof e.sso_account_id||"string"==typeof e.sso_session||"string"==typeof e.sso_region||"string"==typeof e.sso_role_name),aT=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),aO={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},ak={i8:"3.496.0"};var aC=r(77282);let a_={isCrtAvailable:!1},aR=()=>a_.isCrtAvailable?["md/crt-avail"]:null,a$=({serviceId:e,clientVersion:t})=>{let r;let n=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,t4.platform)()}`,(0,t4.release)()],["lang/js"],["md/nodejs",`${aC.versions.node}`]],i=aR();i&&n.push(i),e&&n.push([`api/${e}`,t]),aC.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${aC.env.AWS_EXECUTION_ENV}`]);let s=rC({environmentVariableSelector:e=>e.AWS_SDK_UA_APP_ID,configFileSelector:e=>e["sdk-ua-app-id"],default:void 0})();return async()=>{if(!r){let e=await s;r=e?[...n,[`app/${e}`]]:[...n]}return r}};class aN{constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){this.hash.update(ey(aD(e,t)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,rn.createHmac)(this.algorithmIdentifier,aD(this.secret)):(0,rn.createHash)(this.algorithmIdentifier)}}function aD(e,t){return ef.Buffer.isBuffer(e)?e:"string"==typeof e?eg(e,t):ArrayBuffer.isView(e)?eh(e.buffer,e.byteOffset,e.byteLength):eh(e)}let aj=e=>{if(!e)return 0;if("string"==typeof e)return Buffer.from(e).length;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;if("number"==typeof e.start&&"number"==typeof e.end)return e.end+1-e.start;if("string"==typeof e.path||Buffer.isBuffer(e.path))return(0,ro.lstatSync)(e.path).size;if("number"==typeof e.fd)return(0,ro.fstatSync)(e.fd).size;throw Error(`Body Length computation failed for ${e}`)},aU="required",aM="argv",aF="isSet",az="booleanEquals",aq="error",aL="endpoint",aB="tree",aW="PartitionResult",aV="getAttr",aH={[aU]:!1,type:"String"},aK={[aU]:!0,default:!1,type:"Boolean"},aG={ref:"Endpoint"},aX={fn:az,[aM]:[{ref:"UseFIPS"},!0]},aJ={fn:az,[aM]:[{ref:"UseDualStack"},!0]},aY={},aZ={fn:aV,[aM]:[{ref:aW},"supportsFIPS"]},aQ={ref:aW},a0={fn:az,[aM]:[!0,{fn:aV,[aM]:[aQ,"supportsDualStack"]}]},a1=[aX],a2=[aJ],a3=[{ref:"Region"}],a6={version:"1.0",parameters:{Region:aH,UseDualStack:aK,UseFIPS:aK,Endpoint:aH},rules:[{conditions:[{fn:aF,[aM]:[aG]}],rules:[{conditions:a1,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:aq},{conditions:a2,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:aq},{endpoint:{url:aG,properties:aY,headers:aY},type:aL}],type:aB},{conditions:[{fn:aF,[aM]:a3}],rules:[{conditions:[{fn:"aws.partition",[aM]:a3,assign:aW}],rules:[{conditions:[aX,aJ],rules:[{conditions:[{fn:az,[aM]:[!0,aZ]},a0],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:aY,headers:aY},type:aL}],type:aB},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:aq}],type:aB},{conditions:a1,rules:[{conditions:[{fn:az,[aM]:[aZ,!0]}],rules:[{conditions:[{fn:"stringEquals",[aM]:[{fn:aV,[aM]:[aQ,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:aY,headers:aY},type:aL},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:aY,headers:aY},type:aL}],type:aB},{error:"FIPS is enabled but this partition does not support FIPS",type:aq}],type:aB},{conditions:a2,rules:[{conditions:[a0],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:aY,headers:aY},type:aL}],type:aB},{error:"DualStack is enabled but this partition does not support DualStack",type:aq}],type:aB},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:aY,headers:aY},type:aL}],type:aB}],type:aB},{error:"Invalid Configuration: Missing Region",type:aq}]},a8=(e,t={})=>tP(a6,{endpointParams:e,logger:t.logger}),a4=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??nu,base64Encoder:e?.base64Encoder??nd,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??a8,extensions:e?.extensions??[],logger:e?.logger??new nr,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??rD,utf8Decoder:e?.utf8Decoder??em,utf8Encoder:e?.utf8Encoder??ew}),a5="AWS_REGION",a7="AWS_DEFAULT_REGION",a9=["in-region","cross-region","mobile","standard","legacy"],le={environmentVariableSelector:e=>e.AWS_DEFAULTS_MODE,configFileSelector:e=>e.defaults_mode,default:"legacy"},lt=({region:e=rC(tz),defaultsMode:t=rC(le)}={})=>q(async()=>{let r="function"==typeof t?await t():t;switch(r?.toLowerCase()){case"auto":return lr(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw Error(`Invalid parameter for "defaultsMode", expect ${a9.join(", ")}, got ${r}`)}}),lr=async e=>{if(e){let t="function"==typeof e?await e():e,r=await ln();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},ln=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[a5]||process.env[a7]))return process.env[a5]??process.env[a7];if(!process.env.AWS_EC2_METADATA_DISABLED)try{let e=await at();return(await oK({...e,path:"/latest/meta-data/placement/region"})).toString()}catch(e){}},li=e=>{is(process.version);let t=lt(e),r=()=>t().then(ir),n=a4(e);return oU(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??aj,defaultUserAgentProvider:e?.defaultUserAgentProvider??a$({serviceId:n.serviceId,clientVersion:ak.i8}),maxAttempts:e?.maxAttempts??rC(r9),region:e?.region??rC(tz,tq),requestHandler:e?.requestHandler??new nS(r),retryMode:e?.retryMode??rC({...nt,default:async()=>(await r()).retryMode||rG}),sha256:e?.sha256??aN.bind(null,"sha256"),streamCollector:e?.streamCollector??nA,useDualstackEndpoint:e?.useDualstackEndpoint??rC(tM),useFipsEndpoint:e?.useFipsEndpoint??rC(tF)}},ls=e=>{let t=async()=>{if(void 0===e.region)throw Error("Region is missing from runtimeConfig");let t=e.region;return"string"==typeof t?t:t()};return{setRegion(e){t=e},region:()=>t}},lo=e=>({region:e.region()}),la=e=>e,ll=(e,t)=>{let r={...la(ls(e)),...la(iu(e)),...la(I(e))};return t.forEach(e=>e.configure(r)),{...e,...lo(r),...id(r),...T(r)}};class lc extends nl{constructor(...[e]){let t=ll(e7(ne(rK(tW(aT(li(e||{})))))),e?.extensions||[]);super(t),this.config=t,this.middlewareStack.use(iU(this.config)),this.middlewareStack.use(tG(this.config)),this.middlewareStack.use($(this.config)),this.middlewareStack.use(j(this.config)),this.middlewareStack.use(z(this.config)),this.middlewareStack.use(tj(this.config))}destroy(){super.destroy()}}class lu extends n5{constructor(e){super(e),Object.setPrototypeOf(this,lu.prototype)}}class ld extends lu{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,ld.prototype)}}class lp extends lu{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,lp.prototype)}}class lf extends lu{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,lf.prototype)}}class lh extends lu{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,lh.prototype)}}let lg=e=>({...e,...e.accessToken&&{accessToken:nk}}),lm=e=>({...e,...e.secretAccessKey&&{secretAccessKey:nk},...e.sessionToken&&{sessionToken:nk}}),ly=e=>({...e,...e.roleCredentials&&{roleCredentials:lm(e.roleCredentials)}}),lw=async(e,t)=>{let r;let n=new ok(e,t),i=im({},lO,{[lN]:e[lC]});n.bp("/federation/credentials");let s=im({[l$]:[,nF(e[lR],"roleName")],[l_]:[,nF(e[lk],"accountId")]});return n.m("GET").h(i).q(s).b(r),n.build()},lb=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return lv(e,t);let r=im({$metadata:lI(e)});return Object.assign(r,iy(nF(nz(await lD(e.body,t)),"body"),{roleCredentials:ix})),r},lv=async(e,t)=>{let r={...e,body:await lj(e.body,t)},n=lU(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await lS(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await lx(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await lA(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await lP(r,t);default:return lE({output:e,parsedBody:r.body,errorCode:n})}},lE=ie(lu),lS=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new ld({$metadata:lI(e),...r}),e.body)},lx=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new lp({$metadata:lI(e),...r}),e.body)},lA=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new lf({$metadata:lI(e),...r}),e.body)},lP=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new lh({$metadata:lI(e),...r}),e.body)},lI=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),lT=(e,t)=>nI(e,t).then(e=>t.utf8Encoder(e)),lO=e=>null!=e&&""!==e&&(!Object.getOwnPropertyNames(e).includes("length")||0!=e.length)&&(!Object.getOwnPropertyNames(e).includes("size")||0!=e.size),lk="accountId",lC="accessToken",l_="account_id",lR="roleName",l$="role_name",lN="x-amz-sso_bearer_token",lD=(e,t)=>lT(e,t).then(e=>e.length?JSON.parse(e):{}),lj=async(e,t)=>{let r=await lD(e,t);return r.message=r.message??r.Message,r},lU=(e,t)=>{let r=e=>{let t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},n=Object.keys(e.headers).find(e=>"x-amzn-errortype"===e.toLowerCase());return void 0!==n?r(e.headers[n]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):void 0};class lM extends nT.classBuilder().ep({...aO}).m(function(e,t,r,n){return[rW(r,this.serialize,this.deserialize),rH(r,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(lg,ly).ser(lw).de(lb).build(){}class lF extends t2{constructor(e,t=!0){super(e,t),this.tryNextLink=t,this.name="TokenProviderError",Object.setPrototypeOf(this,lF.prototype)}}let lz="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var lq=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),lL={version:"3.429.0"},lB="required",lW="argv",lV="isSet",lH="tree",lK="error",lG="endpoint",lX="PartitionResult",lJ="getAttr",lY={[lB]:!1,type:"String"},lZ={[lB]:!0,default:!1,type:"Boolean"},lQ={ref:"Endpoint"},l0={fn:"booleanEquals",[lW]:[{ref:"UseFIPS"},!0]},l1={fn:"booleanEquals",[lW]:[{ref:"UseDualStack"},!0]},l2={},l3={fn:"booleanEquals",[lW]:[!0,{fn:lJ,[lW]:[{ref:lX},"supportsFIPS"]}]},l6={ref:lX},l8={fn:"booleanEquals",[lW]:[!0,{fn:lJ,[lW]:[l6,"supportsDualStack"]}]},l4=[l0],l5=[l1],l7=[{ref:"Region"}],l9={version:"1.0",parameters:{Region:lY,UseDualStack:lZ,UseFIPS:lZ,Endpoint:lY},rules:[{conditions:[{fn:lV,[lW]:[lQ]}],type:lH,rules:[{conditions:l4,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:lK},{conditions:l5,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:lK},{endpoint:{url:lQ,properties:l2,headers:l2},type:lG}]},{conditions:[{fn:lV,[lW]:l7}],type:lH,rules:[{conditions:[{fn:"aws.partition",[lW]:l7,assign:lX}],type:lH,rules:[{conditions:[l0,l1],type:lH,rules:[{conditions:[l3,l8],type:lH,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:l2,headers:l2},type:lG}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:lK}]},{conditions:l4,type:lH,rules:[{conditions:[l3],type:lH,rules:[{conditions:[{fn:"stringEquals",[lW]:["aws-us-gov",{fn:lJ,[lW]:[l6,"name"]}]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:l2,headers:l2},type:lG},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:l2,headers:l2},type:lG}]},{error:"FIPS is enabled but this partition does not support FIPS",type:lK}]},{conditions:l5,type:lH,rules:[{conditions:[l8],type:lH,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:l2,headers:l2},type:lG}]},{error:"DualStack is enabled but this partition does not support DualStack",type:lK}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:l2,headers:l2},type:lG}]}]},{error:"Invalid Configuration: Missing Region",type:lK}]},ce=(e,t={})=>tP(l9,{endpointParams:e,logger:t.logger}),ct=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??nu,base64Encoder:e?.base64Encoder??nd,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??ce,extensions:e?.extensions??[],logger:e?.logger??new nr,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??rD,utf8Decoder:e?.utf8Decoder??em,utf8Encoder:e?.utf8Encoder??ew}),cr=e=>{is(process.version);let t=lt(e),r=()=>t().then(ir),n=ct(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??aj,defaultUserAgentProvider:e?.defaultUserAgentProvider??a$({serviceId:n.serviceId,clientVersion:lL.version}),maxAttempts:e?.maxAttempts??rC(r9),region:e?.region??rC(tz,tq),requestHandler:e?.requestHandler??new nS(r),retryMode:e?.retryMode??rC({...nt,default:async()=>(await r()).retryMode||rG}),sha256:e?.sha256??aN.bind(null,"sha256"),streamCollector:e?.streamCollector??nA,useDualstackEndpoint:e?.useDualstackEndpoint??rC(tM),useFipsEndpoint:e?.useFipsEndpoint??rC(tF)}},cn=e=>e,ci=(e,t)=>{let r={...cn(ls(e)),...cn(iu(e)),...cn(I(e))};return t.forEach(e=>e.configure(r)),{...e,...lo(r),...id(r),...T(r)}},cs=class extends nl{constructor(...[e]){let t=ci(e7(ne(rK(tW(lq(cr(e||{})))))),e?.extensions||[]);super(t),this.config=t,this.middlewareStack.use(iU(this.config)),this.middlewareStack.use(tG(this.config)),this.middlewareStack.use($(this.config)),this.middlewareStack.use(j(this.config)),this.middlewareStack.use(z(this.config)),this.middlewareStack.use(tj(this.config))}destroy(){super.destroy()}},co=class e extends n5{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},ca=class e extends co{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cl=class e extends co{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cc=class e extends co{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cu=class e extends co{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cd=class e extends co{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cp=class e extends co{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cf=class e extends co{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ch=class e extends co{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cg=class e extends co{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cm=class e extends co{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cy=class e extends co{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cw=class e extends co{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cb=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint();return new k({protocol:n,hostname:r,port:i,method:"POST",headers:{"content-type":"application/json"},path:`${s?.endsWith("/")?s.slice(0,-1):s||""}/token`,body:JSON.stringify(iy(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:e=>ix(e)}))})},cv=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint();return new k({protocol:n,hostname:r,port:i,method:"POST",headers:{"content-type":"application/json"},path:`${s?.endsWith("/")?s.slice(0,-1):s||""}/client/register`,body:JSON.stringify(iy(e,{clientName:[],clientType:[],scopes:e=>ix(e)}))})},cE=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint();return new k({protocol:n,hostname:r,port:i,method:"POST",headers:{"content-type":"application/json"},path:`${s?.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,body:JSON.stringify(iy(e,{clientId:[],clientSecret:[],startUrl:[]}))})},cS=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return cx(e,t);let r=im({$metadata:cq(e)});return Object.assign(r,iy(nF(nz(await cB(e.body,t)),"body"),{accessToken:nq,expiresIn:nN,idToken:nq,refreshToken:nq,tokenType:nq})),r},cx=async(e,t)=>{let r={...e,body:await cW(e.body,t)},n=cV(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await ck(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await cC(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await c_(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await cR(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await c$(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await cD(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await cj(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await cU(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await cM(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await cF(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await cz(r,t);default:return cO({output:e,parsedBody:r.body,errorCode:n})}},cA=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return cP(e,t);let r=im({$metadata:cq(e)});return Object.assign(r,iy(nF(nz(await cB(e.body,t)),"body"),{authorizationEndpoint:nq,clientId:nq,clientIdIssuedAt:n$,clientSecret:nq,clientSecretExpiresAt:n$,tokenEndpoint:nq})),r},cP=async(e,t)=>{let r={...e,body:await cW(e.body,t)},n=cV(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await cR(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await cN(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await cj(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await cU(r,t);default:return cO({output:e,parsedBody:r.body,errorCode:n})}},cI=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return cT(e,t);let r=im({$metadata:cq(e)});return Object.assign(r,iy(nF(nz(await cB(e.body,t)),"body"),{deviceCode:nq,expiresIn:nN,interval:nN,userCode:nq,verificationUri:nq,verificationUriComplete:nq})),r},cT=async(e,t)=>{let r={...e,body:await cW(e.body,t)},n=cV(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await cR(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await c$(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await cj(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await cM(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await cF(r,t);default:return cO({output:e,parsedBody:r.body,errorCode:n})}},cO=ie(co),ck=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new ca({$metadata:cq(e),...r}),e.body)},cC=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cl({$metadata:cq(e),...r}),e.body)},c_=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cc({$metadata:cq(e),...r}),e.body)},cR=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cu({$metadata:cq(e),...r}),e.body)},c$=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cd({$metadata:cq(e),...r}),e.body)},cN=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cw({$metadata:cq(e),...r}),e.body)},cD=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cp({$metadata:cq(e),...r}),e.body)},cj=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cf({$metadata:cq(e),...r}),e.body)},cU=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new ch({$metadata:cq(e),...r}),e.body)},cM=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cg({$metadata:cq(e),...r}),e.body)},cF=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cm({$metadata:cq(e),...r}),e.body)},cz=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{error:nq,error_description:nq})),n7(new cy({$metadata:cq(e),...r}),e.body)},cq=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),cL=(e,t)=>nI(e,t).then(e=>t.utf8Encoder(e)),cB=(e,t)=>cL(e,t).then(e=>e.length?JSON.parse(e):{}),cW=async(e,t)=>{let r=await cB(e,t);return r.message=r.message??r.Message,r},cV=(e,t)=>{let r=e=>{let t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},n=Object.keys(e.headers).find(e=>"x-amzn-errortype"===e.toLowerCase());return void 0!==n?r(e.headers[n]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):void 0};class cH extends nT{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,r){this.middlewareStack.use(rW(t,this.serialize,this.deserialize)),this.middlewareStack.use(rH(t,_CreateTokenCommand.getEndpointParameterInstructions()));let n=e.concat(this.middlewareStack),{logger:i}=t,{requestHandler:s}=t;return n.resolve(e=>s.handle(e.request,r||{}),{logger:i,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:e=>e,outputFilterSensitiveLog:e=>e,[O]:{service:"AWSSSOOIDCService",operation:"CreateToken"}})}serialize(e,t){return cb(e,t)}deserialize(e,t){return cS(e,t)}}class cK extends nT{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,r){this.middlewareStack.use(rW(t,this.serialize,this.deserialize)),this.middlewareStack.use(rH(t,_RegisterClientCommand.getEndpointParameterInstructions()));let n=e.concat(this.middlewareStack),{logger:i}=t,{requestHandler:s}=t;return n.resolve(e=>s.handle(e.request,r||{}),{logger:i,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:e=>e,outputFilterSensitiveLog:e=>e,[O]:{service:"AWSSSOOIDCService",operation:"RegisterClient"}})}serialize(e,t){return cv(e,t)}deserialize(e,t){return cA(e,t)}}class cG extends nT{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,t,r){this.middlewareStack.use(rW(t,this.serialize,this.deserialize)),this.middlewareStack.use(rH(t,_StartDeviceAuthorizationCommand.getEndpointParameterInstructions()));let n=e.concat(this.middlewareStack),{logger:i}=t,{requestHandler:s}=t;return n.resolve(e=>s.handle(e.request,r||{}),{logger:i,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:e=>e,outputFilterSensitiveLog:e=>e,[O]:{service:"AWSSSOOIDCService",operation:"StartDeviceAuthorization"}})}serialize(e,t){return cE(e,t)}deserialize(e,t){return cI(e,t)}}((e,t)=>{for(let r of Object.keys(e)){let n=e[r],i=async function(e,t,r){let i=new n(e);if("function"==typeof t)this.send(i,t);else{if("function"!=typeof r)return this.send(i,t);if("object"!=typeof t)throw Error(`Expected http options but got ${typeof t}`);this.send(i,t||{},r)}},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=i}})({CreateTokenCommand:cH,RegisterClientCommand:cK,StartDeviceAuthorizationCommand:cG},class extends cs{});let cX={},cJ=e=>{if(cX[e])return cX[e];let t=new cs({region:e});return cX[e]=t,t},cY=(e,t)=>cJ(t).send(new cH({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"})),cZ=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new lF(`Token is expired. ${lz}`,!1)},cQ=(e,t,r=!1)=>{if(void 0===t)throw new lF(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${lz}`,!1)},{writeFile:c0}=ro.promises,c1=(e,t)=>c0(rs(e),JSON.stringify(t,null,2)),c2=new Date(0),c3=(e={})=>async()=>{let t;let r=await rP(e),n=rr(e),i=r[n];if(i){if(!i.sso_session)throw new lF(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new lF(`Profile '${n}' could not be found in shared credentials file.`,!1);let s=i.sso_session,o=(await rx(e))[s];if(!o)throw new lF(`Sso session '${s}' could not be found in shared credentials file.`,!1);for(let e of["sso_start_url","sso_region"])if(!o[e])throw new lF(`Sso session '${s}' is missing required property '${e}'.`,!1);o.sso_start_url;let a=o.sso_region;try{t=await rl(s)}catch(e){throw new lF(`The SSO session token associated with profile=${n} was not found or is invalid. ${lz}`,!1)}cQ("accessToken",t.accessToken),cQ("expiresAt",t.expiresAt);let{accessToken:l,expiresAt:c}=t,u={token:l,expiration:new Date(c)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-c2.getTime()<3e4)return cZ(u),u;cQ("clientId",t.clientId,!0),cQ("clientSecret",t.clientSecret,!0),cQ("refreshToken",t.refreshToken,!0);try{c2.setTime(Date.now());let e=await cY(t,a);cQ("accessToken",e.accessToken),cQ("expiresIn",e.expiresIn);let r=new Date(Date.now()+1e3*e.expiresIn);try{await c1(s,{...t,accessToken:e.accessToken,expiresAt:r.toISOString(),refreshToken:e.refreshToken})}catch(e){}return{token:e.accessToken,expiration:r}}catch(e){return cZ(u),u}},c6=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:s,profile:o})=>{let a,l;let c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let e=await c3({profile:o})();a={accessToken:e.token,expiresAt:new Date(e.expiration).toISOString()}}catch(e){throw new t6(e.message,!1)}else try{a=await rl(e)}catch(e){throw new t6(`The SSO session associated with this profile is invalid. ${c}`,!1)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new t6(`The SSO session associated with this profile has expired. ${c}`,!1);let{accessToken:u}=a,d=s||new lc({region:n});try{l=await d.send(new lM({accountId:r,roleName:i,accessToken:u}))}catch(e){throw t6.from(e,!1)}let{roleCredentials:{accessKeyId:p,secretAccessKey:f,sessionToken:h,expiration:g}={}}=l,m=l?.roleCredentials?.credentialScope;if(!p||!f||!h||!g)throw new t6("SSO returns an invalid temporary credential.",!1);return{accessKeyId:p,secretAccessKey:f,sessionToken:h,expiration:new Date(g),credentialScope:m}},c8=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:i}=e;if(!t||!r||!n||!i)throw new t6(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e},c4=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:s,ssoSession:o}=e,a=rr(e);if(t||r||n||i||o){if(t&&r&&n&&i)return c6({ssoStartUrl:t,ssoSession:o,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:s,profile:a});throw new t6('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"')}{let r=(await rP(e))[a];if(!r)throw new t6(`Profile ${a} was not found.`);if(!aI(r))throw new t6(`Profile ${a} is not configured with SSO credentials.`);if(r?.sso_session){let i=(await rx(e))[r.sso_session],s=` configurations in profile ${a} and sso-session ${r.sso_session}`;if(n&&n!==i.sso_region)throw new t6("Conflicting SSO region"+s,!1);if(t&&t!==i.sso_start_url)throw new t6("Conflicting SSO start_url"+s,!1);r.sso_region=i.sso_region,r.sso_start_url=i.sso_start_url}let{sso_start_url:i,sso_account_id:o,sso_region:l,sso_role_name:c,sso_session:u}=c8(r);return c6({ssoStartUrl:i,ssoSession:u,ssoAccountId:o,ssoRegion:l,ssoRoleName:c,ssoClient:s,profile:a})}},c5=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:i,sso_role_name:s}=c8(e);return c4({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:i,ssoRoleName:s})()},c7=e=>!!e&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,c9=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,credentialScope:e.aws_credential_scope}),ue=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:i,policyArns:s,policy:o,durationSeconds:a,roleAssumerWithWebIdentity:l}=e;if(!l)throw new t6(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return l({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:i,PolicyArns:s,Policy:o,DurationSeconds:a})},ut=(e={})=>async()=>{let t=e?.webIdentityTokenFile??process.env.AWS_WEB_IDENTITY_TOKEN_FILE,r=e?.roleArn??process.env.AWS_ROLE_ARN,n=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!t||!r)throw new t6("Web identity configuration not specified");return ue({...e,webIdentityToken:(0,ro.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()},ur=e=>!!e&&"object"==typeof e&&"string"==typeof e.web_identity_token_file&&"string"==typeof e.role_arn&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,un=async(e,t)=>ut({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})(),ui=async(e,t,r,n={})=>{let i=t[e];if(Object.keys(n).length>0&&c7(i))return c9(i);if(am(i))return ab(e,t,r,n);if(c7(i))return c9(i);if(ur(i))return un(i,r);if(aA(i))return aP(r,e);if(aI(i))return c5(i);throw new t6(`Profile ${e} could not be found or parsed in shared credentials file.`)},us=(e={})=>async()=>{let t=await rP(e);return ui(rr(e),t,e)},uo=e=>process.env[o1]||process.env[o0]?o3(e):process.env.AWS_EC2_METADATA_DISABLED?async()=>{throw new t6("EC2 Instance Metadata Service access disabled")}:au(e),ua=(e={})=>q(t3(...e.profile||process.env[rt]?[]:[oV()],c4(e),us(e),ax(e),ut(e),uo(e),async()=>{throw new t6("Could not load credentials from any providers",!1)}),e=>void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5,e=>void 0!==e.expiration),ul="required",uc="type",uu="argv",ud="booleanEquals",up="stringEquals",uf="sigv4",uh="us-east-1",ug="endpoint",um="https://sts.{Region}.{PartitionResult#dnsSuffix}",uy="tree",uw="error",ub="getAttr",uv={[ul]:!1,[uc]:"String"},uE={[ul]:!0,default:!1,[uc]:"Boolean"},uS={ref:"Endpoint"},ux={fn:"isSet",[uu]:[{ref:"Region"}]},uA={ref:"Region"},uP={fn:"aws.partition",[uu]:[uA],assign:"PartitionResult"},uI={ref:"UseFIPS"},uT={ref:"UseDualStack"},uO={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:uf,signingName:"sts",signingRegion:uh}]},headers:{}},uk={},uC={conditions:[{fn:up,[uu]:[uA,"aws-global"]}],[ug]:uO,[uc]:ug},u_={fn:ud,[uu]:[uI,!0]},uR={fn:ud,[uu]:[uT,!0]},u$={fn:ub,[uu]:[{ref:"PartitionResult"},"supportsFIPS"]},uN={ref:"PartitionResult"},uD={fn:ud,[uu]:[!0,{fn:ub,[uu]:[uN,"supportsDualStack"]}]},uj=[{fn:"isSet",[uu]:[uS]}],uU=[u_],uM=[uR],uF={version:"1.0",parameters:{Region:uv,UseDualStack:uE,UseFIPS:uE,Endpoint:uv,UseGlobalEndpoint:uE},rules:[{conditions:[{fn:ud,[uu]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[uu]:uj},ux,uP,{fn:ud,[uu]:[uI,!1]},{fn:ud,[uu]:[uT,!1]}],rules:[{conditions:[{fn:up,[uu]:[uA,"ap-northeast-1"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"ap-south-1"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"ap-southeast-1"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"ap-southeast-2"]}],endpoint:uO,[uc]:ug},uC,{conditions:[{fn:up,[uu]:[uA,"ca-central-1"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"eu-central-1"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"eu-north-1"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"eu-west-1"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"eu-west-2"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"eu-west-3"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"sa-east-1"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,uh]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"us-east-2"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"us-west-1"]}],endpoint:uO,[uc]:ug},{conditions:[{fn:up,[uu]:[uA,"us-west-2"]}],endpoint:uO,[uc]:ug},{endpoint:{url:um,properties:{authSchemes:[{name:uf,signingName:"sts",signingRegion:"{Region}"}]},headers:uk},[uc]:ug}],[uc]:uy},{conditions:uj,rules:[{conditions:uU,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[uc]:uw},{conditions:uM,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[uc]:uw},{endpoint:{url:uS,properties:uk,headers:uk},[uc]:ug}],[uc]:uy},{conditions:[ux],rules:[{conditions:[uP],rules:[{conditions:[u_,uR],rules:[{conditions:[{fn:ud,[uu]:[!0,u$]},uD],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:uk,headers:uk},[uc]:ug}],[uc]:uy},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[uc]:uw}],[uc]:uy},{conditions:uU,rules:[{conditions:[{fn:ud,[uu]:[u$,!0]}],rules:[{conditions:[{fn:up,[uu]:[{fn:ub,[uu]:[uN,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:uk,headers:uk},[uc]:ug},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:uk,headers:uk},[uc]:ug}],[uc]:uy},{error:"FIPS is enabled but this partition does not support FIPS",[uc]:uw}],[uc]:uy},{conditions:uM,rules:[{conditions:[uD],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:uk,headers:uk},[uc]:ug}],[uc]:uy},{error:"DualStack is enabled but this partition does not support DualStack",[uc]:uw}],[uc]:uy},uC,{endpoint:{url:um,properties:uk,headers:uk},[uc]:ug}],[uc]:uy}],[uc]:uy},{error:"Invalid Configuration: Missing Region",[uc]:uw}]},uz=(e,t={})=>tP(uF,{endpointParams:e,logger:t.logger}),uq=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??nu,base64Encoder:e?.base64Encoder??nd,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??uz,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??oR,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new oW},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new oA}],logger:e?.logger??new nr,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??rD,utf8Decoder:e?.utf8Decoder??em,utf8Encoder:e?.utf8Encoder??ew}),uL=e=>{is(process.version);let t=lt(e),r=()=>t().then(ir),n=uq(e);return oU(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??aj,credentialDefaultProvider:e?.credentialDefaultProvider??oh(ua),defaultUserAgentProvider:e?.defaultUserAgentProvider??a$({serviceId:n.serviceId,clientVersion:oD.i8}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4")||(async e=>await oh(ua)(e?.__config||{})()),signer:new oW},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new oA}],maxAttempts:e?.maxAttempts??rC(r9),region:e?.region??rC(tz,tq),requestHandler:e?.requestHandler??new nS(r),retryMode:e?.retryMode??rC({...nt,default:async()=>(await r()).retryMode||rG}),sha256:e?.sha256??aN.bind(null,"sha256"),streamCollector:e?.streamCollector??nA,useDualstackEndpoint:e?.useDualstackEndpoint??rC(tM),useFipsEndpoint:e?.useFipsEndpoint??rC(tF)}},uB=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(e){let r=t.findIndex(t=>t.schemeId===e.schemeId);-1===r?t.push(e):t.splice(r,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){r=e},httpAuthSchemeProvider:()=>r,setCredentials(e){n=e},credentials:()=>n}},uW=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),uV=e=>e,uH=(e,t)=>{let r={...uV(ls(e)),...uV(iu(e)),...uV(I(e)),...uV(uB(e))};return t.forEach(e=>e.configure(r)),{...e,...lo(r),...id(r),...T(r),...uW(r)}};class uK extends nl{constructor(...[e]){let t=uH(oN(e7(ne(rK(tW(iL(uL(e||{}))))))),e?.extensions||[]);super(t),this.config=t,this.middlewareStack.use(iU(this.config)),this.middlewareStack.use(tG(this.config)),this.middlewareStack.use($(this.config)),this.middlewareStack.use(j(this.config)),this.middlewareStack.use(z(this.config)),this.middlewareStack.use(tj(this.config)),this.middlewareStack.use(oy(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use(oS(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return o_}getIdentityProviderConfigProvider(){return async e=>new ox({"aws.auth#sigv4":e.credentials})}}let uG=(e,t)=>t?class extends e{constructor(e){for(let r of(super(e),t))this.middlewareStack.use(r)}}:e,uX=(e={},t)=>op(e,uG(uK,t)),uJ=(e={},t)=>of(e,uG(uK,t)),uY=e=>t=>e({roleAssumer:uX(t),roleAssumerWithWebIdentity:uJ(t),...t});class uZ{constructor({utf8Encoder:e,utf8Decoder:t}){this.eventStreamCodec=new es(e,t),this.utfEncoder=e}deserialize(e,t){var r;return new el({messageStream:new eo({inputStream:function(e){let t=0,r=0,n=null,i=null,s=e=>{if("number"!=typeof e)throw Error("Attempted to allocate an event message where size was not a number: "+e);t=e,r=4,n=new Uint8Array(e),new DataView(n.buffer).setUint32(0,e,!1)};return{[Symbol.asyncIterator]:async function*(){let o=e[Symbol.asyncIterator]();for(;;){let{value:e,done:a}=await o.next();if(a){if(t){if(t===r)yield n;else throw Error("Truncated event message received.")}return}let l=e.length,c=0;for(;c<l;){if(!n){let t=l-c;i||(i=new Uint8Array(4));let n=Math.min(4-r,t);if(i.set(e.slice(c,c+n),r),r+=n,c+=n,r<4)break;s(new DataView(i.buffer).getUint32(0,!1)),i=null}let o=Math.min(t-r,l-c);n.set(e.slice(c,c+o),r),r+=o,c+=o,t&&t===r&&(yield n,n=null,t=0,r=0)}}}}}(e),decoder:this.eventStreamCodec}),deserializer:(r=this.utfEncoder,async function(e){let{value:n}=e.headers[":message-type"];if("error"===n){let t=Error(e.headers[":error-message"].value||"UnknownError");throw t.name=e.headers[":error-code"].value,t}if("exception"===n){let n=e.headers[":exception-type"].value,i=await t({[n]:e});if(i.$unknown){let t=Error(r(e.body));throw t.name=n,t}throw i[n]}if("event"===n){let r={[e.headers[":event-type"].value]:e},n=await t(r);if(n.$unknown)return;return n}throw Error(`Unrecognizable event type: ${e.headers[":event-type"].value}`)})})}serialize(e,t){return new ea({messageStream:new ec({inputStream:e,serializer:t}),encoder:this.eventStreamCodec,includeEndFrame:!0})}}async function*uQ(e){let t=!1,r=!1,n=[];for(e.on("error",e=>{if(t||(t=!0),e)throw e}),e.on("data",e=>{n.push(e)}),e.on("end",()=>{t=!0});!r;){let e=await new Promise(e=>setTimeout(()=>e(n.shift()),0));e&&(yield e),r=t&&0===n.length}}class u0{constructor({utf8Encoder:e,utf8Decoder:t}){this.universalMarshaller=new uZ({utf8Decoder:t,utf8Encoder:e})}deserialize(e,t){let r="function"==typeof e[Symbol.asyncIterator]?e:uQ(e);return this.universalMarshaller.deserialize(r,t)}serialize(e,t){return nf.Readable.from(this.universalMarshaller.serialize(e,t))}}let u1=e=>new u0(e),u2="required",u3="argv",u6="isSet",u8="booleanEquals",u4="error",u5="endpoint",u7="tree",u9="PartitionResult",de={[u2]:!1,type:"String"},dt={[u2]:!0,default:!1,type:"Boolean"},dr={ref:"Endpoint"},dn={fn:u8,[u3]:[{ref:"UseFIPS"},!0]},di={fn:u8,[u3]:[{ref:"UseDualStack"},!0]},ds={},da={fn:"getAttr",[u3]:[{ref:u9},"supportsFIPS"]},dl={fn:u8,[u3]:[!0,{fn:"getAttr",[u3]:[{ref:u9},"supportsDualStack"]}]},dc=[dn],du=[di],dd=[{ref:"Region"}],dp={version:"1.0",parameters:{Region:de,UseDualStack:dt,UseFIPS:dt,Endpoint:de},rules:[{conditions:[{fn:u6,[u3]:[dr]}],rules:[{conditions:dc,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:u4},{rules:[{conditions:du,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:u4},{endpoint:{url:dr,properties:ds,headers:ds},type:u5}],type:u7}],type:u7},{rules:[{conditions:[{fn:u6,[u3]:dd}],rules:[{conditions:[{fn:"aws.partition",[u3]:dd,assign:u9}],rules:[{conditions:[dn,di],rules:[{conditions:[{fn:u8,[u3]:[!0,da]},dl],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ds,headers:ds},type:u5}],type:u7}],type:u7},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:u4}],type:u7},{conditions:dc,rules:[{conditions:[{fn:u8,[u3]:[da,!0]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ds,headers:ds},type:u5}],type:u7}],type:u7},{error:"FIPS is enabled but this partition does not support FIPS",type:u4}],type:u7},{conditions:du,rules:[{conditions:[dl],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ds,headers:ds},type:u5}],type:u7}],type:u7},{error:"DualStack is enabled but this partition does not support DualStack",type:u4}],type:u7},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:ds,headers:ds},type:u5}],type:u7}],type:u7}],type:u7},{error:"Invalid Configuration: Missing Region",type:u4}],type:u7}]},df=(e,t={})=>tP(dp,{endpointParams:e,logger:t.logger}),dh=e=>({apiVersion:"2023-09-30",base64Decoder:e?.base64Decoder??nu,base64Encoder:e?.base64Encoder??nd,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??df,extensions:e?.extensions??[],logger:e?.logger??new nr,serviceId:e?.serviceId??"Bedrock Runtime",urlParser:e?.urlParser??rD,utf8Decoder:e?.utf8Decoder??em,utf8Encoder:e?.utf8Encoder??ew}),dg=e=>{is(process.version);let t=lt(e),r=()=>t().then(ir),n=dh(e);return oU(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??aj,credentialDefaultProvider:e?.credentialDefaultProvider??uY(ua),defaultUserAgentProvider:e?.defaultUserAgentProvider??a$({serviceId:n.serviceId,clientVersion:iq.i8}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??u1,maxAttempts:e?.maxAttempts??rC(r9),region:e?.region??rC(tz,tq),requestHandler:e?.requestHandler??new nS(r),retryMode:e?.retryMode??rC({...nt,default:async()=>(await r()).retryMode||rG}),sha256:e?.sha256??aN.bind(null,"sha256"),streamCollector:e?.streamCollector??nA,useDualstackEndpoint:e?.useDualstackEndpoint??rC(tM),useFipsEndpoint:e?.useFipsEndpoint??rC(tF)}},dm=e=>e,dy=(e,t)=>{let r={...dm(ls(e)),...dm(iu(e)),...dm(I(e))};return t.forEach(e=>e.configure(r)),{...e,...lo(r),...id(r),...T(r)}};class dw extends nl{constructor(...[e]){let t=dy(tV(e7(eQ(ne(rK(tW(iF(dg(e||{})))))))),e?.extensions||[]);super(t),this.config=t,this.middlewareStack.use(iU(this.config)),this.middlewareStack.use(tG(this.config)),this.middlewareStack.use($(this.config)),this.middlewareStack.use(j(this.config)),this.middlewareStack.use(z(this.config)),this.middlewareStack.use(e5(this.config)),this.middlewareStack.use(tj(this.config))}destroy(){super.destroy()}}class db extends n5{constructor(e){super(e),Object.setPrototypeOf(this,db.prototype)}}class dv extends db{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,dv.prototype)}}class dE extends db{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,dE.prototype)}}class dS extends db{constructor(e){super({name:"ModelErrorException",$fault:"client",...e}),this.name="ModelErrorException",this.$fault="client",Object.setPrototypeOf(this,dS.prototype),this.originalStatusCode=e.originalStatusCode,this.resourceName=e.resourceName}}class dx extends db{constructor(e){super({name:"ModelNotReadyException",$fault:"client",...e}),this.name="ModelNotReadyException",this.$fault="client",Object.setPrototypeOf(this,dx.prototype)}}class dA extends db{constructor(e){super({name:"ModelTimeoutException",$fault:"client",...e}),this.name="ModelTimeoutException",this.$fault="client",Object.setPrototypeOf(this,dA.prototype)}}class dP extends db{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,dP.prototype)}}class dI extends db{constructor(e){super({name:"ServiceQuotaExceededException",$fault:"client",...e}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,dI.prototype)}}class dT extends db{constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),this.name="ThrottlingException",this.$fault="client",Object.setPrototypeOf(this,dT.prototype)}}class dO extends db{constructor(e){super({name:"ValidationException",$fault:"client",...e}),this.name="ValidationException",this.$fault="client",Object.setPrototypeOf(this,dO.prototype)}}class dk extends db{constructor(e){super({name:"ModelStreamErrorException",$fault:"client",...e}),this.name="ModelStreamErrorException",this.$fault="client",Object.setPrototypeOf(this,dk.prototype),this.originalStatusCode=e.originalStatusCode,this.originalMessage=e.originalMessage}}(g||(g={})).visit=(e,t)=>void 0!==e.chunk?t.chunk(e.chunk):void 0!==e.internalServerException?t.internalServerException(e.internalServerException):void 0!==e.modelStreamErrorException?t.modelStreamErrorException(e.modelStreamErrorException):void 0!==e.validationException?t.validationException(e.validationException):void 0!==e.throttlingException?t.throttlingException(e.throttlingException):void 0!==e.modelTimeoutException?t.modelTimeoutException(e.modelTimeoutException):t._(e.$unknown[0],e.$unknown[1]);let dC=e=>({...e,...e.body&&{body:nk}}),d_=e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),dR=async(e,t)=>{let r;let n=new ok(e,t),i=im({},d2,{[d8]:e[d6]||"application/octet-stream",[d4]:e[d3]});return n.bp("/model/{modelId}/invoke-with-response-stream"),n.p("modelId",()=>e.modelId,"{modelId}",!1),void 0!==e.body&&(r=e.body),n.m("POST").h(i).b(r),n.build()},d$=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return dN(e,t);let r=im({$metadata:d0(e),[d6]:[,e.headers[d5]]}),n=e.body;return r.body=dH(n,t),r},dN=async(e,t)=>{let r={...e,body:await d9(e.body,t)},n=pe(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.bedrockruntime#AccessDeniedException":throw await dj(r,t);case"InternalServerException":case"com.amazonaws.bedrockruntime#InternalServerException":throw await dU(r,t);case"ModelErrorException":case"com.amazonaws.bedrockruntime#ModelErrorException":throw await dM(r,t);case"ModelNotReadyException":case"com.amazonaws.bedrockruntime#ModelNotReadyException":throw await dF(r,t);case"ModelStreamErrorException":case"com.amazonaws.bedrockruntime#ModelStreamErrorException":throw await dz(r,t);case"ModelTimeoutException":case"com.amazonaws.bedrockruntime#ModelTimeoutException":throw await dq(r,t);case"ResourceNotFoundException":case"com.amazonaws.bedrockruntime#ResourceNotFoundException":throw await dL(r,t);case"ServiceQuotaExceededException":case"com.amazonaws.bedrockruntime#ServiceQuotaExceededException":throw await dB(r,t);case"ThrottlingException":case"com.amazonaws.bedrockruntime#ThrottlingException":throw await dW(r,t);case"ValidationException":case"com.amazonaws.bedrockruntime#ValidationException":throw await dV(r,t);default:return dD({output:e,parsedBody:r.body,errorCode:n})}},dD=ie(db),dj=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new dv({$metadata:d0(e),...r}),e.body)},dU=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new dE({$metadata:d0(e),...r}),e.body)},dM=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq,originalStatusCode:nN,resourceName:nq})),n7(new dS({$metadata:d0(e),...r}),e.body)},dF=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new dx({$metadata:d0(e),...r}),e.body)},dz=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq,originalMessage:nq,originalStatusCode:nN})),n7(new dk({$metadata:d0(e),...r}),e.body)},dq=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new dA({$metadata:d0(e),...r}),e.body)},dL=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new dP({$metadata:d0(e),...r}),e.body)},dB=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new dI({$metadata:d0(e),...r}),e.body)},dW=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new dT({$metadata:d0(e),...r}),e.body)},dV=async(e,t)=>{let r=im({});return Object.assign(r,iy(e.body,{message:nq})),n7(new dO({$metadata:d0(e),...r}),e.body)},dH=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>null!=r.chunk?{chunk:await dJ(r.chunk,t)}:null!=r.internalServerException?{internalServerException:await dK(r.internalServerException,t)}:null!=r.modelStreamErrorException?{modelStreamErrorException:await dG(r.modelStreamErrorException,t)}:null!=r.validationException?{validationException:await dZ(r.validationException,t)}:null!=r.throttlingException?{throttlingException:await dY(r.throttlingException,t)}:null!=r.modelTimeoutException?{modelTimeoutException:await dX(r.modelTimeoutException,t)}:{$unknown:e}),dK=async(e,t)=>dU({...e,body:await d7(e.body,t)},t),dG=async(e,t)=>dz({...e,body:await d7(e.body,t)},t),dX=async(e,t)=>dq({...e,body:await d7(e.body,t)},t),dJ=async(e,t)=>{let r={};return Object.assign(r,dQ(await d7(e.body,t),t)),r},dY=async(e,t)=>dW({...e,body:await d7(e.body,t)},t),dZ=async(e,t)=>dV({...e,body:await d7(e.body,t)},t),dQ=(e,t)=>iy(e,{bytes:t.base64Decoder}),d0=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),d1=(e,t)=>nI(e,t).then(e=>t.utf8Encoder(e)),d2=e=>null!=e&&""!==e&&(!Object.getOwnPropertyNames(e).includes("length")||0!=e.length)&&(!Object.getOwnPropertyNames(e).includes("size")||0!=e.size),d3="accept",d6="contentType",d8="content-type",d4="x-amzn-bedrock-accept",d5="x-amzn-bedrock-content-type",d7=(e,t)=>d1(e,t).then(e=>e.length?JSON.parse(e):{}),d9=async(e,t)=>{let r=await d7(e,t);return r.message=r.message??r.Message,r},pe=(e,t)=>{let r=e=>{let t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},n=Object.keys(e.headers).find(e=>"x-amzn-errortype"===e.toLowerCase());return void 0!==n?r(e.headers[n]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):void 0};class pt extends nT.classBuilder().ep({...iz}).m(function(e,t,r,n){return[rW(r,this.serialize,this.deserialize),rH(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").f(dC,d_).ser(dR).de(d$).build(){}var pr=r(66285),pn=r(51444);async function pi(){return Response.json("",{status:v.Xd?.secrets?.Bedrock_accessKeyId&&v.Xd?.secrets?.Bedrock_secretAccessKey?200:401})}async function ps(e){if(v.Xd?.config?.apiKey?.toLowerCase()!=="bedrock")return Response.json("You are not using Bedrock as your provider.",{status:400});let{messages:t}=await e.json();"user"!==(t=(0,P.D)({messages:t}))[0].role&&(t=t.slice(1));let r=e.headers.get("model"),n=e.headers.get("promptType"),i=await A.Z.getLanguage(),s=await A.Z.getIdeLanguage();if(n){let e=(0,S.u)({promptType:t[t.length-1].content,cleanPromptText:await A.Z.getSelectedText(),language:s});e&&(t[t.length-1].content=e)}let o=await A.Z.getSelectedText();o&&(t[t.length-1].content+="\n```"+i+"\n"+o+"\n```");try{if(!v.Xd.secrets?.Bedrock_accessKeyId||!v.Xd.secrets?.Bedrock_secretAccessKey||!v.Xd.secrets?.Bedrock_region){let e=Error("You need to set your AWS credentials first.");throw e.status=401,e}let e=new dw({region:v.Xd.secrets?.Bedrock_region??"us-east-1",credentials:{accessKeyId:v.Xd.secrets?.Bedrock_accessKeyId??"",secretAccessKey:v.Xd.secrets?.Bedrock_secretAccessKey??""}}),s=v.Xd?.globalState?.config,a=await e.send(new pt({modelId:r??"anthropic.claude-v2",contentType:"application/json",accept:"application/json",body:JSON.stringify({prompt:(0,pn.C0)(t),max_tokens_to_sample:s?.maxTokens||500,temperature:s?.temperature||.7})}));(0,E.q)({promptType:n?t[t.length-1].content+"CodeGPT":"Chat",isAnonymous:!0,provider:"Bedrock",model:r??"anthropic.claude-2",statusCode:200});let l=(0,pr.si)(a),c=t.slice(0,-1).some(e=>e.content.includes(o));if(o&&(n||!c)){let e=await (0,x.V)(["```"+i+"\n"+o+"\n```"],l);return new pr.wn(e)}return new pr.wn(l)}catch(e){return(0,E.q)({promptType:n?t[t.length-1].content+"CodeGPT":"Chat",isAnonymous:!0,provider:"Bedrock",model:r??"anthropic.claude-2",statusCode:e.status??500}),Response.json({message:e.message,status:e.status??500},{status:e.status??500})}}let po=new y.AppRouteRouteModule({definition:{kind:w.x.APP_ROUTE,page:"/api/(providers)/bedrock/route",pathname:"/api/bedrock",filename:"route",bundlePath:"app/api/(providers)/bedrock/route"},resolvedPagePath:"/Users/danipower/Proyectos/Node/vscode-blog/codegpt-nextjs/app/api/(providers)/bedrock/route.ts",nextConfigOutput:"standalone",userland:m}),{requestAsyncStorage:pa,staticGenerationAsyncStorage:pl,serverHooks:pc,headerHooks:pu,staticGenerationBailout:pd}=po,pp="/api/(providers)/bedrock/route";function pf(){return(0,b.patchFetch)({serverHooks:pc,staticGenerationAsyncStorage:pl})}},58753:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=void 0;var n=r(75914),i=r(71086),s=r(15007),o=function(){function e(){this.crc32=new s.Crc32}return e.prototype.update=function(e){(0,i.isEmptyData)(e)||this.crc32.update((0,i.convertToBuffer)(e))},e.prototype.digest=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){return[2,(0,i.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new s.Crc32},e}();t.AwsCrc32=o},15007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsCrc32=t.Crc32=t.crc32=void 0;var n=r(75914),i=r(71086);t.crc32=function(e){return new s().update(e).digest()};var s=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,r;try{for(var i=n.__values(e),s=i.next();!s.done;s=i.next()){var a=s.value;this.checksum=this.checksum>>>8^o[(this.checksum^a)&255]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=s;var o=(0,i.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),a=r(58753);Object.defineProperty(t,"AwsCrc32",{enumerable:!0,get:function(){return a.AwsCrc32}})},75914:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>v,__asyncGenerator:()=>b,__asyncValues:()=>E,__await:()=>w,__awaiter:()=>u,__classPrivateFieldGet:()=>P,__classPrivateFieldSet:()=>I,__createBinding:()=>p,__decorate:()=>a,__exportStar:()=>f,__extends:()=>i,__generator:()=>d,__importDefault:()=>A,__importStar:()=>x,__makeTemplateObject:()=>S,__metadata:()=>c,__param:()=>l,__read:()=>g,__rest:()=>o,__spread:()=>m,__spreadArrays:()=>y,__values:()=>h});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})}function d(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function p(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function w(e){return this instanceof w?(this.v=e,this):new w(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||a(e,t)})})}function a(e,t){try{var r;(r=i[e](t)).value instanceof w?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:w(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=h(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,i,(t=e[r](t)).done,t.value)})}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function I(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var n=r(60983),i="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:n.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}},71086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var n=r(893);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return n.convertToBuffer}});var i=r(51322);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var s=r(47501);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return s.numToUint8}});var o=r(61008);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return o.uint32ArrayFrom}})},51322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},47501:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},61008:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}},60983:(e,t,r)=>{"use strict";r.r(t),r.d(t,{fromUtf8:()=>s,toUtf8:()=>o});let n=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let n=e.charCodeAt(r);if(n<128)t.push(n);else if(n<2048)t.push(n>>6|192,63&n|128);else if(r+1<e.length&&(64512&n)==55296&&(64512&e.charCodeAt(r+1))==56320){let i=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(n>>12|224,n>>6&63|128,63&n|128)}return Uint8Array.from(t)},i=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let n=e[r];n<128?t+=String.fromCharCode(n):192<=n&&n<224?t+=String.fromCharCode((31&n)<<6|63&e[++r]):240<=n&&n<365?t+=decodeURIComponent("%"+[n,e[++r],e[++r],e[++r]].map(e=>e.toString(16)).join("%")):t+=String.fromCharCode((15&n)<<12|(63&e[++r])<<6|63&e[++r])}return t},s=e=>"function"==typeof TextEncoder?new TextEncoder().encode(e):n(e),o=e=>"function"==typeof TextDecoder?new TextDecoder("utf-8").decode(e):i(e)},52123:(e,t,r)=>{"use strict";let n=r(52239),i=r(11173),s=r(2829);e.exports={XMLParser:i,XMLValidator:n,XMLBuilder:s}},79295:(e,t)=>{"use strict";let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=RegExp("^"+n+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,r){if(t){let n=Object.keys(t),i=n.length;for(let s=0;s<i;s++)"strict"===r?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.isName=function(e){return null!=i.exec(e)},t.getAllMatches=function(e,t){let r=[],n=t.exec(e);for(;n;){let i=[];i.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let e=0;e<s;e++)i.push(n[e]);r.push(i),n=t.exec(e)}return r},t.nameRegexp=n},52239:(e,t,r)=>{"use strict";let n=r(79295),i={allowBooleanAttributes:!1,unpairedTags:[]};function s(e){return" "===e||"	"===e||"\n"===e||"\r"===e}function o(e,t){let r=t;for(;t<e.length;t++)if("?"==e[t]||" "==e[t]){let n=e.substr(r,t-r);if(t>5&&"xml"===n)return u("InvalidXml","XML declaration allowed only at the start of the document.",d(e,t));if("?"!=e[t]||">"!=e[t+1])continue;t++;break}return t}function a(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&0==--r)break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7]){for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}}return t}t.validate=function(e,t){t=Object.assign({},i,t);let r=[],l=!1,p=!1;"\uFEFF"===e[0]&&(e=e.substr(1));for(let i=0;i<e.length;i++)if("<"===e[i]&&"?"===e[i+1]){if(i+=2,(i=o(e,i)).err)return i}else if("<"===e[i]){let h=i;if("!"===e[++i]){i=a(e,i);continue}{var f;let g=!1;"/"===e[i]&&(g=!0,i++);let m="";for(;i<e.length&&">"!==e[i]&&" "!==e[i]&&"	"!==e[i]&&"\n"!==e[i]&&"\r"!==e[i];i++)m+=e[i];if("/"===(m=m.trim())[m.length-1]&&(m=m.substring(0,m.length-1),i--),f=m,!n.isName(f))return u("InvalidTag",0===m.trim().length?"Invalid space after '<'.":"Tag '"+m+"' is an invalid name.",d(e,i));let y=function(e,t){let r="",n="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])""===n?n=e[t]:n!==e[t]||(n="");else if(">"===e[t]&&""===n){i=!0;break}r+=e[t]}return""===n&&{value:r,index:t,tagClosed:i}}(e,i);if(!1===y)return u("InvalidAttr","Attributes for '"+m+"' have open quote.",d(e,i));let w=y.value;if(i=y.index,"/"===w[w.length-1]){let r=i-w.length,n=c(w=w.substring(0,w.length-1),t);if(!0!==n)return u(n.err.code,n.err.msg,d(e,r+n.err.line));l=!0}else if(g){if(!y.tagClosed)return u("InvalidTag","Closing tag '"+m+"' doesn't have proper closing.",d(e,i));if(w.trim().length>0)return u("InvalidTag","Closing tag '"+m+"' can't have attributes or invalid starting.",d(e,h));{let t=r.pop();if(m!==t.tagName){let r=d(e,t.tagStartPos);return u("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+m+"'.",d(e,h))}0==r.length&&(p=!0)}}else{let n=c(w,t);if(!0!==n)return u(n.err.code,n.err.msg,d(e,i-w.length+n.err.line));if(!0===p)return u("InvalidXml","Multiple possible root nodes found.",d(e,i));-1!==t.unpairedTags.indexOf(m)||r.push({tagName:m,tagStartPos:h}),l=!0}for(i++;i<e.length;i++)if("<"===e[i]){if("!"===e[i+1]){i=a(e,++i);continue}if("?"===e[i+1]){if((i=o(e,++i)).err)return i}else break}else if("&"===e[i]){let t=function(e,t){if(";"===e[++t])return -1;if("#"===e[t])return function(e,t){let r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return -1}(e,++t);let r=0;for(;t<e.length;t++,r++)if(!e[t].match(/\w/)||!(r<20)){if(";"===e[t])break;return -1}return t}(e,i);if(-1==t)return u("InvalidChar","char '&' is not expected.",d(e,i));i=t}else if(!0===p&&!s(e[i]))return u("InvalidXml","Extra text at the end",d(e,i));"<"===e[i]&&i--}}else{if(s(e[i]))continue;return u("InvalidChar","char '"+e[i]+"' is not expected.",d(e,i))}return l?1==r.length?u("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",d(e,r[0].tagStartPos)):!(r.length>0)||u("InvalidXml","Invalid '"+JSON.stringify(r.map(e=>e.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):u("InvalidXml","Start tag expected.",1)};let l=RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function c(e,t){let r=n.getAllMatches(e,l),i={};for(let e=0;e<r.length;e++){if(0===r[e][1].length)return u("InvalidAttr","Attribute '"+r[e][2]+"' has no space in starting.",p(r[e]));if(void 0!==r[e][3]&&void 0===r[e][4])return u("InvalidAttr","Attribute '"+r[e][2]+"' is without value.",p(r[e]));if(void 0===r[e][3]&&!t.allowBooleanAttributes)return u("InvalidAttr","boolean attribute '"+r[e][2]+"' is not allowed.",p(r[e]));let s=r[e][2];if(!n.isName(s))return u("InvalidAttr","Attribute '"+s+"' is an invalid name.",p(r[e]));if(i.hasOwnProperty(s))return u("InvalidAttr","Attribute '"+s+"' is repeated.",p(r[e]));i[s]=1}return!0}function u(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function d(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function p(e){return e.startIndex+e[1].length}},2829:(e,t,r)=>{"use strict";let n=r(83847),i={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:RegExp("&","g"),val:"&amp;"},{regex:RegExp(">","g"),val:"&gt;"},{regex:RegExp("<","g"),val:"&lt;"},{regex:RegExp("'","g"),val:"&apos;"},{regex:RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function s(e){this.options=Object.assign({},i,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=l),this.processTextOrObjNode=o,this.options.format?(this.indentate=a,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function o(e,t,r){let n=this.j2x(e,r+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}function a(e){return this.options.indentBy.repeat(e)}function l(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}s.prototype.build=function(e){return this.options.preserveOrder?n(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)},s.prototype.j2x=function(e,t){let r="",n="";for(let i in e)if(void 0===e[i]);else if(null===e[i])"?"===i[0]?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)n+=this.buildTextValNode(e[i],i,"",t);else if("object"!=typeof e[i]){let s=this.isAttribute(i);if(s)r+=this.buildAttrPairStr(s,""+e[i]);else if(i===this.options.textNodeName){let t=this.options.tagValueProcessor(i,""+e[i]);n+=this.replaceEntitiesValue(t)}else n+=this.buildTextValNode(e[i],i,"",t)}else if(Array.isArray(e[i])){let r=e[i].length,s="";for(let o=0;o<r;o++){let r=e[i][o];void 0===r||(null===r?"?"===i[0]?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar:"object"==typeof r?this.options.oneListGroup?s+=this.j2x(r,t+1).val:s+=this.processTextOrObjNode(r,i,t):s+=this.buildTextValNode(r,i,"",t))}this.options.oneListGroup&&(s=this.buildObjectNode(s,i,"",t)),n+=s}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){let t=Object.keys(e[i]),n=t.length;for(let s=0;s<n;s++)r+=this.buildAttrPairStr(t[s],""+e[i][t[s]])}else n+=this.processTextOrObjNode(e[i],i,t);return{attrStr:r,val:n}},s.prototype.buildAttrPairStr=function(e,t){return(t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t)?" "+e:" "+e+'="'+t+'"'},s.prototype.buildObjectNode=function(e,t,r,n){if(""===e)return"?"===t[0]?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let i="</"+t+this.tagEndChar,s="";return("?"===t[0]&&(s="?",i=""),r&&-1===e.indexOf("<"))?this.indentate(n)+"<"+t+r+s+">"+e+i:!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===s.length?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+i}},s.prototype.closeTag=function(e){let t="";return -1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode||(t="/"):t=this.options.suppressEmptyNode?"/":`></${e}`,t},s.prototype.buildTextValNode=function(e,t,r,n){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if("?"===t[0])return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return""===(i=this.replaceEntitiesValue(i))?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+i+"</"+t+this.tagEndChar}},s.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e},e.exports=s},83847:e=>{"use strict";function t(e,t){let n="";if(e&&!t.ignoreAttributes)for(let i in e){let s=t.attributeValueProcessor(i,e[i]);!0===(s=r(s,t))&&t.suppressBooleanAttributes?n+=` ${i.substr(t.attributeNamePrefix.length)}`:n+=` ${i.substr(t.attributeNamePrefix.length)}="${s}"`}return n}function r(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}e.exports=function(e,n){let i="";return n.format&&n.indentBy.length>0&&(i="\n"),function e(n,i,s,o){let a="",l=!1;for(let c=0;c<n.length;c++){let u=n[c],d=function(e){let t=Object.keys(e);for(let e=0;e<t.length;e++){let r=t[e];if(":@"!==r)return r}}(u),p="";if(p=0===s.length?d:`${s}.${d}`,d===i.textNodeName){let e=u[d];!function(e,t){let r=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}(p,i)&&(e=r(e=i.tagValueProcessor(d,e),i)),l&&(a+=o),a+=e,l=!1;continue}if(d===i.cdataPropName){l&&(a+=o),a+=`<![CDATA[${u[d][0][i.textNodeName]}]]>`,l=!1;continue}if(d===i.commentPropName){a+=o+`<!--${u[d][0][i.textNodeName]}-->`,l=!0;continue}if("?"===d[0]){let e=t(u[":@"],i),r="?xml"===d?"":o,n=u[d][0][i.textNodeName];n=0!==n.length?" "+n:"",a+=r+`<${d}${n}${e}?>`,l=!0;continue}let f=o;""!==f&&(f+=i.indentBy);let h=t(u[":@"],i),g=o+`<${d}${h}`,m=e(u[d],i,p,f);-1!==i.unpairedTags.indexOf(d)?i.suppressUnpairedNode?a+=g+">":a+=g+"/>":(!m||0===m.length)&&i.suppressEmptyNode?a+=g+"/>":m&&m.endsWith(">")?a+=g+`>${m}${o}</${d}>`:(a+=g+">",m&&""!==o&&(m.includes("/>")||m.includes("</"))?a+=o+i.indentBy+m+o:a+=m,a+=`</${d}>`),l=!0}return a}(e,n,"",i)}},59377:(e,t,r)=>{"use strict";let n=r(79295);function i(e,t){return"!"===e[t+1]&&"-"===e[t+2]&&"-"===e[t+3]}e.exports=function(e,t){let r={};if("O"===e[t+3]&&"C"===e[t+4]&&"T"===e[t+5]&&"Y"===e[t+6]&&"P"===e[t+7]&&"E"===e[t+8]){t+=9;let f=1,h=!1,g=!1;for(;t<e.length;t++)if("<"!==e[t]||g){if(">"===e[t]){if(g?"-"===e[t-1]&&"-"===e[t-2]&&(g=!1,f--):f--,0===f)break}else"["===e[t]?h=!0:e[t]}else{var s,o,a,l,c,u,d,p;if(h&&"!"===(s=e)[(o=t)+1]&&"E"===s[o+2]&&"N"===s[o+3]&&"T"===s[o+4]&&"I"===s[o+5]&&"T"===s[o+6]&&"Y"===s[o+7])t+=7,[entityName,val,t]=function(e,t){let r="";for(;t<e.length&&"'"!==e[t]&&'"'!==e[t];t++)r+=e[t];if(-1!==(r=r.trim()).indexOf(" "))throw Error("External entites are not supported");let n=e[t++],i="";for(;t<e.length&&e[t]!==n;t++)i+=e[t];return[r,i,t]}(e,t+1),-1===val.indexOf("&")&&(r[function(e){if(n.isName(e))return e;throw Error(`Invalid entity name ${e}`)}(entityName)]={regx:RegExp(`&${entityName};`,"g"),val:val});else if(h&&"!"===(a=e)[(l=t)+1]&&"E"===a[l+2]&&"L"===a[l+3]&&"E"===a[l+4]&&"M"===a[l+5]&&"E"===a[l+6]&&"N"===a[l+7]&&"T"===a[l+8])t+=8;else if(h&&"!"===(c=e)[(u=t)+1]&&"A"===c[u+2]&&"T"===c[u+3]&&"T"===c[u+4]&&"L"===c[u+5]&&"I"===c[u+6]&&"S"===c[u+7]&&"T"===c[u+8])t+=8;else if(h&&"!"===(d=e)[(p=t)+1]&&"N"===d[p+2]&&"O"===d[p+3]&&"T"===d[p+4]&&"A"===d[p+5]&&"T"===d[p+6]&&"I"===d[p+7]&&"O"===d[p+8]&&"N"===d[p+9])t+=9;else if(i)g=!0;else throw Error("Invalid DOCTYPE");f++}if(0!==f)throw Error("Unclosed DOCTYPE")}else throw Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}},32826:(e,t)=>{let r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}};t.buildOptions=function(e){return Object.assign({},r,e)},t.defaultOptions=r},54068:(e,t,r)=>{"use strict";let n=r(79295),i=r(94572),s=r(59377),o=r(44489);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,n.nameRegexp);class a{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xa2"},pound:{regex:/&(pound|#163);/g,val:"\xa3"},yen:{regex:/&(yen|#165);/g,val:"\xa5"},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:"\xa9"},reg:{regex:/&(reg|#174);/g,val:"\xae"},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=l,this.parseXml=f,this.parseTextData=c,this.resolveNameSpace=u,this.buildAttributesMap=p,this.isItStopNode=y,this.replaceEntitiesValue=g,this.readStopNodeData=v,this.saveTextToParentTag=m,this.addChild=h}}function l(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:RegExp("&"+n+";","g"),val:e[n]}}}function c(e,t,r,n,i,s,o){if(void 0!==e&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));let n=this.options.tagValueProcessor(t,e,r,i,s);return null==n?e:typeof n!=typeof e||n!==e?n:this.options.trimValues?E(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?E(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function u(e){if(this.options.removeNSPrefix){let t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}let d=RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function p(e,t,r){if(!this.options.ignoreAttributes&&"string"==typeof e){let r=n.getAllMatches(e,d),i=r.length,s={};for(let e=0;e<i;e++){let n=this.resolveNameSpace(r[e][1]),i=r[e][4],o=this.options.attributeNamePrefix+n;if(n.length){if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),"__proto__"===o&&(o="#__proto__"),void 0!==i){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let e=this.options.attributeValueProcessor(n,i,t);null==e?s[o]=i:typeof e!=typeof i||e!==i?s[o]=e:s[o]=E(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[o]=!0)}}if(Object.keys(s).length){if(this.options.attributesGroupName){let e={};return e[this.options.attributesGroupName]=s,e}return s}}}let f=function(e){e=e.replace(/\r\n?/g,"\n");let t=new i("!xml"),r=t,n="",o="";for(let a=0;a<e.length;a++)if("<"===e[a]){if("/"===e[a+1]){let t=w(e,">",a,"Closing Tag is not closed."),i=e.substring(a+2,t).trim();if(this.options.removeNSPrefix){let e=i.indexOf(":");-1!==e&&(i=i.substr(e+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),r&&(n=this.saveTextToParentTag(n,r,o));let s=o.substring(o.lastIndexOf(".")+1);if(i&&-1!==this.options.unpairedTags.indexOf(i))throw Error(`Unpaired tag can not be used as closing tag: </${i}>`);let l=0;s&&-1!==this.options.unpairedTags.indexOf(s)?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",a=t}else if("?"===e[a+1]){let t=b(e,a,!1,"?>");if(!t)throw Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{let e=new i(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,o,t.tagName)),this.addChild(r,e,o)}a=t.closeIndex+1}else if("!--"===e.substr(a+1,3)){let t=w(e,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){let i=e.substring(a+4,t-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}a=t}else if("!D"===e.substr(a+1,2)){let t=s(e,a);this.docTypeEntities=t.entities,a=t.i}else if("!["===e.substr(a+1,2)){let t=w(e,"]]>",a,"CDATA is not closed.")-2,i=e.substring(a+9,t);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]);else{let e=this.parseTextData(i,r.tagname,o,!0,!1,!0);void 0==e&&(e=""),r.add(this.options.textNodeName,e)}a=t+2}else{let s=b(e,a,this.options.removeNSPrefix),l=s.tagName,c=s.tagExp,u=s.attrExpPresent,d=s.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&n&&"!xml"!==r.tagname&&(n=this.saveTextToParentTag(n,r,o,!1));let p=r;if(p&&-1!==this.options.unpairedTags.indexOf(p.tagname)&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),l!==t.tagname&&(o+=o?"."+l:l),this.isItStopNode(this.options.stopNodes,o,l)){let t="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)a=s.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(l))a=s.closeIndex;else{let r=this.readStopNodeData(e,l,d+1);if(!r)throw Error(`Unexpected end of ${l}`);a=r.i,t=r.tagContent}let n=new i(l);l!==c&&u&&(n[":@"]=this.buildAttributesMap(c,o,l)),t&&(t=this.parseTextData(t,l,o,!0,u,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),n.add(this.options.textNodeName,t),this.addChild(r,n,o)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){c="/"===l[l.length-1]?l=l.substr(0,l.length-1):c.substr(0,c.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));let e=new i(l);l!==c&&u&&(e[":@"]=this.buildAttributesMap(c,o,l)),this.addChild(r,e,o),o=o.substr(0,o.lastIndexOf("."))}else{let e=new i(l);this.tagsNodeStack.push(r),l!==c&&u&&(e[":@"]=this.buildAttributesMap(c,o,l)),this.addChild(r,e,o),r=e}n="",a=d}}}else n+=e[a];return t.child};function h(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);!1===n||("string"==typeof n&&(t.tagname=n),e.addChild(t))}let g=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function m(e,t,r,n){return e&&(void 0===n&&(n=0===Object.keys(t.child).length),void 0!==(e=this.parseTextData(e,t.tagname,r,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,n))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function y(e,t,r){let n="*."+r;for(let r in e){let i=e[r];if(n===i||t===i)return!0}return!1}function w(e,t,r,n){let i=e.indexOf(t,r);if(-1!==i)return i+t.length-1;throw Error(n)}function b(e,t,r,n=">"){let i=function(e,t,r=">"){let n;let i="";for(let s=t;s<e.length;s++){let t=e[s];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else if(t===r[0]){if(!r[1]||e[s+1]===r[1])return{data:i,index:s}}else"	"===t&&(t=" ");i+=t}}(e,t+1,n);if(!i)return;let s=i.data,o=i.index,a=s.search(/\s/),l=s,c=!0;if(-1!==a&&(l=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let e=l.indexOf(":");-1!==e&&(c=(l=l.substr(e+1))!==i.data.substr(e+1))}return{tagName:l,tagExp:s,closeIndex:o,attrExpPresent:c}}function v(e,t,r){let n=r,i=1;for(;r<e.length;r++)if("<"===e[r]){if("/"===e[r+1]){let s=w(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&0==--i)return{tagContent:e.substring(n,r),i:s};r=s}else if("?"===e[r+1])r=w(e,"?>",r+1,"StopNode is not closed.");else if("!--"===e.substr(r+1,3))r=w(e,"-->",r+3,"StopNode is not closed.");else if("!["===e.substr(r+1,2))r=w(e,"]]>",r,"StopNode is not closed.")-2;else{let n=b(e,r,">");n&&((n&&n.tagName)===t&&"/"!==n.tagExp[n.tagExp.length-1]&&i++,r=n.closeIndex)}}}function E(e,t,r){if(t&&"string"==typeof e){let t=e.trim();return"true"===t||"false"!==t&&o(e,r)}return n.isExist(e)?e:""}e.exports=a},11173:(e,t,r)=>{"use strict";let{buildOptions:n}=r(32826),i=r(54068),{prettify:s}=r(16035),o=r(52239);class a{constructor(e){this.externalEntities={},this.options=n(e)}parse(e,t){if("string"==typeof e);else if(e.toString)e=e.toString();else throw Error("XML data is accepted in String or Bytes[] form.");if(t){!0===t&&(t={});let r=o.validate(e,t);if(!0!==r)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}let r=new i(this.options);r.addExternalEntities(this.externalEntities);let n=r.parseXml(e);return this.options.preserveOrder||void 0===n?n:s(n,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}}e.exports=a},16035:(e,t)=>{"use strict";t.prettify=function(e,t){return function e(t,r,n){let i;let s={};for(let o=0;o<t.length;o++){let a=t[o],l=function(e){let t=Object.keys(e);for(let e=0;e<t.length;e++){let r=t[e];if(":@"!==r)return r}}(a),c="";if(c=void 0===n?l:n+"."+l,l===r.textNodeName)void 0===i?i=a[l]:i+=""+a[l];else if(void 0===l)continue;else if(a[l]){let t=e(a[l],r,c),n=function(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return 0===n||1===n&&(!!e[r]||"boolean"==typeof e[r]||0===e[r])}(t,r);a[":@"]?function(e,t,r,n){if(t){let i=Object.keys(t),s=i.length;for(let o=0;o<s;o++){let s=i[o];n.isArray(s,r+"."+s,!0,!0)?e[s]=[t[s]]:e[s]=t[s]}}}(t,a[":@"],c,r):1!==Object.keys(t).length||void 0===t[r.textNodeName]||r.alwaysCreateTextNode?0===Object.keys(t).length&&(r.alwaysCreateTextNode?t[r.textNodeName]="":t=""):t=t[r.textNodeName],void 0!==s[l]&&s.hasOwnProperty(l)?(Array.isArray(s[l])||(s[l]=[s[l]]),s[l].push(t)):r.isArray(l,c,n)?s[l]=[t]:s[l]=t}}return"string"==typeof i?i.length>0&&(s[r.textNodeName]=i):void 0!==i&&(s[r.textNodeName]=i),s}(e,t)}},94572:e=>{"use strict";class t{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}e.exports=t},44489:e=>{"use strict";let t=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);let n={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};e.exports=function(e,i={}){if(i=Object.assign({},n,i),!e||"string"!=typeof e)return e;let s=e.trim();if(void 0!==i.skipLike&&i.skipLike.test(s))return e;if(i.hex&&t.test(s))return Number.parseInt(s,16);{let t=r.exec(s);if(!t)return e;{var o;let r=t[1],n=t[2],a=((o=t[3])&&-1!==o.indexOf(".")&&("."===(o=o.replace(/0+$/,""))?o="0":"."===o[0]?o="0"+o:"."===o[o.length-1]&&(o=o.substr(0,o.length-1))),o),l=t[4]||t[6];if(!i.leadingZeros&&n.length>0&&r&&"."!==s[2])return e;{if(!i.leadingZeros&&n.length>0&&!r&&"."!==s[1])return e;let t=Number(s),o=""+t;return -1!==o.search(/[eE]/)||l?i.eNotation?t:e:-1!==s.indexOf(".")?"0"===o&&""===a?t:o===a?t:r&&o==="-"+a?t:e:n?a===o?t:r+a===o?t:e:s===o?t:s===r+o?t:e}}}}},51444:(e,t,r)=>{"use strict";function n(e){return e.map(({content:e,role:t})=>"user"===t?`

Human: ${e}`:`

Assistant: ${e}`)+"\n\nAssistant:"}function i(e){return e.map(({content:e,role:t})=>{if("user"===t)return`<|prompter|>${e}<|endoftext|>`;if("function"===t)throw Error("OpenAssistant does not support function calls.");if("system"!==t)return`<|assistant|>${e}<|endoftext|>`;throw Error("OpenAssistant does not support system messages.")}).join("")+"<|assistant|>"}r.d(t,{C0:()=>n,y7:()=>i})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[1638,3567,3792,9751],()=>r(35341));module.exports=n})();