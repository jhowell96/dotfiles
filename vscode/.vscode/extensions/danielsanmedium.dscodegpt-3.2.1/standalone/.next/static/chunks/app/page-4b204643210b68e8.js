(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{70006:function(e,t,a){Promise.resolve().then(a.bind(a,53986)),Promise.resolve().then(a.bind(a,88471))},53986:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eY}});var l=a(3827),s=a(330),n=a(29327),o=a(87809);let i=async e=>new Promise(async t=>{setTimeout(async()=>{let a={maxTokens:500,temperature:.7,windowMemory:6},l=await fetch("/api/".concat(e,"/config")).then(e=>e.json()).catch(()=>a);t({...a,...l})},500)});function r(){let e=(0,n.Y)(e=>e.selectedProvider),{data:t,mutate:a,isLoading:l,isValidating:s}=(0,o.ZP)("/api/agents/".concat(e,"/config"),()=>i(e),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:0});return{configuration:t,isLoading:null!=l?l:s,mutate:()=>new Promise(e=>{setTimeout(()=>{a().then(t=>{e(t)})},300)})}}var c=a(22020);let d=(0,c.Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}));var u=a(10401),m=a(14178),p=a(73234),h=a(22561),x=a(7725),g=a(85700),f=a(32904),v=a(2646),b=a(7908),j=a(83928),k=a(66296),y=a(5187);let w=()=>j.F.getState().port;var N={codegptplus:{name:"CodeGPT Plus (legacy)",oAuthLogin:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k.A,{color:"primary",variant:"bordered",onClick:async()=>{await (0,u.Yo)("https://account.codegpt.co/external-signin"),e(!1)},children:"Connect to CodeGPT Plus (legacy)"}),(0,l.jsx)(y.j,{})]}),apikey:!0,apikey_placeholder:"CodeGPT Plus (legacy) ApiKey",connection_info_link:[{label:"Read more about CodeGPT Plus (legacy) apikey",link:"https://plus.codegpt.co/settings/apikey"}],max_tokens:!0,temperature:!0},codegptplusbeta:{name:"CodeGPT Plus",oAuthLogin:e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"grid grid-cols-1 content-stretch items-center justify-center gap-2",children:[(0,l.jsx)(k.A,{color:"primary",fullWidth:!0,onPress:async()=>{await (0,u.Yo)("http://localhost:".concat(w(),"/signup")),e(!1)},children:"Sign Up"}),(0,l.jsx)(k.A,{variant:"bordered",fullWidth:!0,className:"border",onPress:async()=>{await (0,u.Yo)("http://localhost:".concat(w(),"/login")),e(!1)},children:"Sign In"})]})}),apikey:!0,apikey_placeholder:"CodeGPT Plus ApiKey",org:!0,connection_info_link:[{label:"Read more about CodeGPT Plus apikey",link:"https://app.codegpt.co/en/apikeys"}],max_tokens:!0,temperature:!0},openai:{name:"OpenAI",apikey:!0,org:!0,connection_info_link:[{label:"Read more about OpenAI apikey",link:"https://platform.openai.com/api-keys"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about OpenAI config",link:"https://platform.openai.com/docs/api-reference/chat/create"}]},azure:{name:"Azure",apikey:!0,customLink:!0,connection_info_link:[{label:"Read more about Azure apikey",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Azure (OpenAI) config",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#chat-completions"}]},cohere:{name:"Cohere",apikey:!0,connection_info_link:[{label:"Read more about Cohere apikey",link:"https://dashboard.cohere.com/api-keys"}],temperature:!0,config_info_link:[{label:"Read more about Cohere config",link:"https://docs.cohere.com/docs/cochat-beta#define-the-model-settings"}]},anthropic:{name:"Anthropic",apikey:!0,connection_info_link:[{label:"Read more about Anthropic apikey",link:"https://console.anthropic.com/login"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Anthropic config",link:"https://docs.anthropic.com/claude/reference/messages_post"}]},googleaistudio:{name:"Google AI Studio",apikey:!0,apikey_placeholder:"ApiKey (Google-AI-Studio models)",connection_info_link:[{label:"Read more about Google-Ai-Studio",link:"https://makersuite.google.com/app/apikey"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Google-Ai-Studio config",link:"https://ai.google.dev/docs/gemini_api_overview"}]},vertex:{name:"Vertex",customLink:!0,customLink_placeholder:"Custom Link (Vertex models)",oAuthFile:!0,oAuthFile_placeholder:'Upload JSON file ↑ (Vertex "apikey" (credentials.json))',connection_info_link:[{label:"Read more about Vertex credentials",link:"https://developers.google.com/workspace/guides/create-credentials"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Vertex config",link:"https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/gemini?hl=es-419#request_body"}]},ollama:{name:"Ollama",disableConnection:!0},fireworksai:{name:"FireworksAI",apikey:!0,connection_info_link:[{label:"Read more about FireworksAI apikey",link:"https://app.fireworks.ai/users?tab=apps"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about FireworksAI config",link:"https://readme.fireworks.ai/reference/createchatcompletion"}]},mistral:{name:"Mistral",apikey:!0,connection_info_link:[{label:"Read more about Mistral apikey",link:"https://console.mistral.ai/user/api-keys/"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Mistral config",link:"https://docs.mistral.ai/api"}]},huggingface:{name:"HuggingFace",apikey:!0,connection_info_link:[{label:"Read more about HuggingFace apikey",link:"https://huggingface.co/settings/tokens"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about HuggingFace config",link:"https://huggingface.co/docs/api-inference/detailed_parameters?code=js"}]},custom:{name:"Custom",apikey:!0,customLink:!0,max_tokens:!0,temperature:!0},bedrock:{name:"Bedrock",region:!0,access_key_id:!0,secret_access_key:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Bedrock connection info",link:"https://aws.amazon.com/bedrock/"}]},perplexity:{name:"Perplexity",apikey:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Perplexity apikey",link:"https://docs.perplexity.ai/reference/post_chat_completions"}]},lmstudio:{name:"LM Studio",max_tokens:!0,temperature:!0,disableConnection:!0}};function C(){let{configuration:e,mutate:t}=r(),a=null==e?void 0:e.maxTokens,o=null==e?void 0:e.temperature,i=null==e?void 0:e.windowMemory,{isOpen:c,setOpen:j}=d(),k=(0,n.Y)(e=>e.selectedProvider),y=N[k],w=async(e,a)=>{await b.Z.post("/api/actions",{action:"set".concat(a),value:e}),t()};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(m.R,{isOpen:c,placement:"top",scrollBehavior:"inside",classNames:{closeButton:"bg-white/5 active:bg-white/10 h-10 w-10 p-0 flex items-center justify-center rounded-full absolute top-3 right-6"},onOpenChange:async()=>{t(),j(!1)},children:(0,l.jsx)(p.A,{children:()=>{var e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.k,{className:"flex flex-row items-center gap-4 font-normal",children:[(0,l.jsx)("div",{className:"size-fit",children:(0,l.jsx)(s.T,{provider:k,width:40,height:40,className:"rounded-lg border"})}),(0,l.jsxs)("div",{className:"flex select-none flex-col",children:[(0,l.jsxs)("span",{className:"pt-1",children:[y.name," Settings"]}),(0,l.jsx)("span",{className:"text-small text-default-500",children:"Ensure to properly configure your providers parameters here"})]})]}),(0,l.jsx)(x.I,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.Y,{defaultValue:null==i?void 0:i.toString(),onValueChange:e=>w(Number(e),"WindowMemory"),"aria-label":"windowMemory",classNames:{inputWrapper:"bg-default-100",input:"text-md"},labelPlacement:"inside",label:"Window Memory (number of messages)",type:"number"}),y.max_tokens&&(0,l.jsx)(f.L,{color:"primary",maxValue:6e3,minValue:150,step:10,defaultValue:a,onChangeEnd:e=>w(Number(e),"MaxTokens"),label:"Max Tokens","aria-label":"Max Tokens",className:"max-w-md"}),y.temperature&&(0,l.jsx)(f.L,{color:"primary",maxValue:1,minValue:0,step:.01,defaultValue:o,onChangeEnd:e=>w(Number(e),"Temperature"),label:"Temperature","aria-label":"Temperature",className:"max-w-md"})]})}),(0,l.jsx)(v.R,{className:"justify-start",children:(0,l.jsx)("p",{className:"flex flex-col text-small text-default-500",children:null===(e=y.config_info_link)||void 0===e?void 0:e.map((e,t)=>(0,l.jsx)("span",{children:e.label&&(0,l.jsx)("a",{className:"text-primary-500 hover:underline",href:e.link,target:"_blank",rel:"noreferrer",onClick:()=>(0,u.Yo)(e.link),children:e.label})},t))})})]})}})})})}var P=a(72585),A=a(51723),_=a(79601),T=a(60463),Z=a(45228),z=a(90239),M=a(1759),O=a(30461),S=a(28953),R=a(34523),L=a(64090),I=a(54739),F=a(56288);function V(){let{isOpen:e,setOpen:t}=(0,A.U)(),[a,o]=(0,L.useState)(""),[i,r]=(0,L.useState)(""),[c,d]=(0,L.useState)(""),[f,j]=(0,L.useState)(""),[y,w]=(0,L.useState)(""),[C,V]=(0,L.useState)(""),[K,E]=(0,L.useState)(!1),{isConnected:G,mutate:D}=(0,P.T)(),Y=async e=>{let t=e[0];if("json"!==t.name.split(".").pop()){F.A.error("File type not supported",{position:"top-center"});return}try{let e=await t.text();(await fetch("/api/actions",{method:"POST",body:JSON.stringify({action:"setGoogleOauth",value:e})})).ok?F.A.success("File uploaded",{position:"top-center"}):F.A.error("Error uploading file",{position:"top-center"})}catch(e){F.A.error("Error processing json")}},{getRootProps:W,getInputProps:B}=(0,I.uI)({onDrop:Y,multiple:!1,useFsAccessApi:!1}),H=(0,n.Y)(e=>e.selectedProvider),U=N[H],q=(0,L.useCallback)(async()=>{await Promise.all([a?b.Z.post("/api/actions",{action:"setApiKey",value:a}).then(()=>o("")):null,i?b.Z.post("/api/actions",{action:"setOrgId",value:i}).then(()=>r("")):null,c?b.Z.post("/api/actions",{action:"setCustomLink",value:c}).then(()=>d("")):null,f?b.Z.post("/api/actions",{action:"setRegion",value:f}).then(()=>j("")):null,y?b.Z.post("/api/actions",{action:"setAccessKeyId",value:y}).then(()=>w("")):null,C?b.Z.post("/api/actions",{action:"setSecretAccessKey",value:C}).then(()=>V("")):null]),D(),t(!1)},[y,a,c,D,i,f,C,t]),J=()=>{U.apikey&&b.Z.post("/api/actions",{action:"setApiKey",value:""}).then(()=>o("")),U.org&&b.Z.post("/api/actions",{action:"setOrgId",value:""}).then(()=>r("")),U.customLink&&b.Z.post("/api/actions",{action:"setCustomLink",value:""}).then(()=>d("")),U.region&&b.Z.post("/api/actions",{action:"setRegion",value:""}).then(()=>j("")),U.access_key_id&&b.Z.post("/api/actions",{action:"setAccessKeyId",value:""}).then(()=>w("")),U.secret_access_key&&b.Z.post("/api/actions",{action:"setSecretAccessKey",value:""}).then(()=>V("")),"CodeGPT Plus"===U.name&&b.Z.post("/api/actions",{action:"setVicunaSession",session:{accessToken:"",refreshToken:"",expiresAt:""}}),D()},X=(e,t)=>{let a=e.target.value;if(("x"===e.key.toLowerCase()||"KeyX"===e.code)&&(e.metaKey||e.ctrlKey)&&e.target instanceof HTMLInputElement){e.preventDefault();let l=e.target,{selectionStart:s,selectionEnd:n}=l;if(null!==s&&null!==n&&s!==n){let e=l.value.substring(s,n);(0,u.zp)(e).then(()=>{let e=a.substring(0,s)+a.substring(n);"apikey"===t&&o(e),"orgid"===t&&r(e),"customlink"===t&&d(e),"region"===t&&j(e),"accesskeyid"===t&&w(e),"secretaccesskey"===t&&V(e)})}}("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,u.M1)().then(l=>{let{selectionStart:s,selectionEnd:n}=e.target,i=a.substring(0,null!=s?s:a.length)+l+a.substring(null!=n?n:a.length);"apikey"===t&&o(i),"orgid"===t&&r(i),"customlink"===t&&d(i),"region"===t&&j(i),"accesskeyid"===t&&w(i),"secretaccesskey"===t&&V(i)})),(0,u.gT)(e)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(m.R,{isOpen:e,placement:"center",scrollBehavior:"inside",onOpenChange:()=>{D(),t(!1)},children:(0,l.jsx)(p.A,{children:()=>{var e,n,m,p;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.k,{className:"flex flex-row items-center gap-4",children:[(0,l.jsx)("div",{className:"size-fit",children:(0,l.jsx)(s.T,{provider:H,width:48,height:48,className:"rounded-lg border border-default-200"})}),(0,l.jsxs)("div",{className:"flex flex-col font-normal",children:[(0,l.jsxs)("span",{className:"select-none",children:["Connect to ",U.name]}),(0,l.jsx)("span",{className:"text-small text-default-500",children:"CodeGPT Plus"!==U.name?"Before engaging with this model, ensure proper configuration or connection.":"Connect to CodeGPT Plus to use the latest features for free."})]})]}),(0,l.jsx)(x.I,{children:G?(0,l.jsx)(k.A,{color:"danger",variant:"flat",className:"border border-danger-500/20",onPress:J,children:"CodeGPT Plus"===U.name?"Disconnect from CodeGPT Plus":"Disconnect"}):(0,l.jsxs)(l.Fragment,{children:[U.oAuthLogin&&U.oAuthLogin(t),"CodeGPT Plus"!==U.name&&(0,l.jsxs)(l.Fragment,{children:[U.apikey&&(0,l.jsx)(g.Y,{value:a,onChange:e=>o(e.target.value),onKeyDown:e=>X(e,"apikey"),"aria-label":"Password",classNames:{inputWrapper:"bg-default-100",input:"text-sm"},labelPlacement:"outside",placeholder:null!==(n=U.apikey_placeholder)&&void 0!==n?n:"ApiKey",startContent:(0,l.jsx)(_.Z,{className:"size-4 text-base text-default-500"}),endContent:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>E(!K),className:"cursor-pointer",children:K?(0,l.jsx)(T.Z,{className:"size-5"}):(0,l.jsx)(Z.Z,{className:"size-5"})}),(0,l.jsx)(R.z,{variant:"flat",color:"primary",size:"sm",onClick:()=>(0,u.M1)().then(e=>o(e)),className:"cursor-pointer",children:"Paste"})]}),type:K?"text":"password",isRequired:!0}),U.org&&(0,l.jsx)(g.Y,{value:i,onChange:e=>r(e.target.value),onKeyDown:e=>X(e,"orgid"),"aria-label":"Password",classNames:{inputWrapper:"bg-default-100",input:"text-sm"},labelPlacement:"outside",placeholder:"Organization ID (optional)",startContent:(0,l.jsx)(z.Z,{className:"size-4 text-base text-default-500"}),endContent:(0,l.jsx)(R.z,{variant:"flat",color:"primary",size:"sm",onClick:()=>(0,u.M1)().then(e=>r(e)),className:"cursor-pointer",children:"Paste"}),type:"search"}),U.customLink&&(0,l.jsx)(g.Y,{value:c,onChange:e=>d(e.target.value),onKeyDown:e=>X(e,"customlink"),"aria-label":"Password",classNames:{inputWrapper:"bg-default-100",input:"text-sm"},labelPlacement:"outside",placeholder:null!==(m=U.customLink_placeholder)&&void 0!==m?m:"Custom Link",startContent:(0,l.jsx)(M.Z,{className:"size-4 text-base text-default-500"}),endContent:(0,l.jsx)(R.z,{variant:"flat",color:"primary",size:"sm",onClick:()=>(0,u.M1)().then(e=>d(e)),className:"cursor-pointer",children:"Paste"}),type:"search"}),U.region&&(0,l.jsx)(g.Y,{value:f,onChange:e=>j(e.target.value),onKeyDown:e=>X(e,"region"),"aria-label":"Password",classNames:{inputWrapper:"bg-default-100",input:"text-sm"},labelPlacement:"outside",placeholder:"Region",startContent:(0,l.jsx)(O.Z,{className:"size-4 text-base text-default-500"}),endContent:(0,l.jsx)(R.z,{variant:"flat",color:"primary",size:"sm",onClick:()=>(0,u.M1)().then(e=>j(e)),className:"cursor-pointer",children:"Paste"}),type:"search"}),U.access_key_id&&(0,l.jsx)(g.Y,{value:y,onChange:e=>w(e.target.value),onKeyDown:e=>X(e,"accesskeyid"),"aria-label":"Password",classNames:{inputWrapper:"bg-default-100",input:"text-sm"},labelPlacement:"outside",placeholder:"Access Key ID",startContent:(0,l.jsx)(_.Z,{className:"size-4 text-base text-default-500"}),endContent:(0,l.jsx)(R.z,{variant:"flat",color:"primary",size:"sm",onClick:()=>(0,u.M1)().then(e=>w(e)),className:"cursor-pointer",children:"Paste"}),type:"search"}),U.secret_access_key&&(0,l.jsx)(g.Y,{value:C,onChange:e=>V(e.target.value),onKeyDown:e=>X(e,"secretaccesskey"),"aria-label":"Password",classNames:{inputWrapper:"bg-default-100",input:"text-sm"},labelPlacement:"outside",placeholder:"Secret Access Key",startContent:(0,l.jsx)(_.Z,{className:"size-4 text-base text-default-500"}),endContent:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>E(!K),className:"cursor-pointer",children:K?(0,l.jsx)(T.Z,{className:"size-5"}):(0,l.jsx)(Z.Z,{className:"size-5"})}),(0,l.jsx)(R.z,{variant:"flat",color:"primary",size:"sm",onClick:()=>(0,u.M1)().then(e=>V(e)),className:"cursor-pointer",children:"Paste"})]}),type:K?"text":"password"}),U.oAuthFile&&(0,l.jsxs)("div",{...W(),children:[(0,l.jsx)("input",{...B(),className:"hidden"}),(0,l.jsx)("div",{className:"pointer-events-none",children:(0,l.jsx)(g.Y,{value:"","aria-label":"Password",classNames:{inputWrapper:"bg-default-100",input:"text-sm"},size:"lg",placeholder:null!==(p=U.oAuthFile_placeholder)&&void 0!==p?p:"Upload JSON file ↑",startContent:(0,l.jsx)(S.Z,{className:"size-4 text-base text-default-500"})})})]}),(0,l.jsx)(k.A,{type:"submit",color:"default",onPress:q,children:"Connect"})]})]})}),(0,l.jsx)(v.R,{className:"justify-center",children:(0,l.jsx)("p",{className:"flex flex-col text-small text-default-500",children:"CodeGPT Plus"!==U.name&&(null===(e=U.connection_info_link)||void 0===e?void 0:e.map((e,t)=>(0,l.jsx)("span",{children:e.label&&(0,l.jsx)("a",{className:"text-primary-500 hover:underline",href:e.link,target:"_blank",rel:"noreferrer",onClick:()=>(0,u.Yo)(e.link),children:e.label})},t)))})})]})}})})})}var K=a(8827);let E={codegptplus:{label:"Manage your AI Agents",link:"https://plus.codegpt.co/"},codegptplusbeta:{label:"Manage your AI Agents",link:"https://app.codegpt.co/"},default:{label:"Try CodeGPT Plus for Free"}};function G(){let{selectedProvider:e,setSelectedProvider:t}=(0,n.Y)(),{mutate:a}=(0,P.T)(),s=(0,A.U)(e=>e.setOpen),o=e in E?E[e]:E.default;return(0,l.jsx)(k.A,{className:"mt-4",variant:"solid",color:"primary",...o.link?{onClick:()=>(0,u.Yo)(o.link)}:{onClick:()=>{(0,K.$)(),t("codegptplusbeta"),a().then(e=>{e||s(!0)})}},children:(0,l.jsx)("span",{children:o.label})})}var D=a(24424),Y=a(22529),W=a(48150),B=a(61114),H=a(19391),U=a(48786),q=a(17100);let J=(0,c.Ue)(e=>({image:"",setImage:t=>e({image:t})}));var X=a(28889),$=a(95110),Q=a(16089),ee=a(49474),et=a(74785),ea=a(6346);function el(e){let{isLoading:t}=e,[a,s]=(0,L.useState)(!1),{selectedProvider:o,setSelectedProvider:i}=(0,n.Y)(),{mutate:r}=(0,P.T)(),c=(0,A.U)(e=>e.setOpen),{image:d,setImage:u}=J(),m=async e=>{let t=e[0],a=t.name.split(".").pop();if(console.log(t),console.log(a),["png","jpg","jpeg","webp"].includes("image/"+a)){F.A.error("File type not supported",{position:"top-center"});return}try{let e=await new Promise((e,a)=>{let l=new FileReader;l.readAsDataURL(t),l.onload=()=>e(l.result),l.onerror=e=>a(e)});u(e)}catch(e){F.A.error("Error uploading file")}},{getInputProps:p,open:h}=(0,I.uI)({onDrop:m,multiple:!1,useFsAccessApi:!1,noClick:!0});return(0,l.jsx)("div",{className:"flex flex-wrap gap-4",children:"codegptplusbeta"===o?(0,l.jsx)($.e,{showArrow:!0,placement:"top-start",isOpen:!!d,color:"primary",content:"What do you want to do with this image?",children:(0,l.jsxs)(k.A,{isIconOnly:!0,variant:"light",color:"default",onClick:()=>d?u(""):h(),isDisabled:t,className:"w-fit",children:[(0,l.jsx)("input",{...p(),className:"hidden"}),d?(0,l.jsx)("div",{className:"flex size-[32px] items-center justify-center",children:(0,l.jsx)(Q.J,{src:d,alt:"image",className:"h-auto w-full object-cover"})}):(0,l.jsx)(X.Z,{color:"gray",height:24,width:24})]})}):(0,l.jsxs)(ee.j,{showArrow:!0,offset:20,placement:"top-start",backdrop:"opaque",isOpen:a,onOpenChange:e=>s(e),children:[(0,l.jsx)(et.b,{children:(0,l.jsx)(k.A,{color:"default",variant:"light",isIconOnly:!0,className:"w-fit",children:(0,l.jsx)(X.Z,{height:24,width:24,color:"gray",className:"shrink-0"})})}),(0,l.jsx)(ea.g,{children:e=>(0,l.jsxs)("div",{className:"w-full px-1 py-2",children:[(0,l.jsx)("p",{className:"text-small font-bold text-foreground",...e,children:"This feature is only available in CodeGPT Plus."}),(0,l.jsx)("div",{className:"mt-2 flex w-full gap-2",children:(0,l.jsx)(k.A,{color:"default",variant:"faded",onClick:()=>{s(!1),(0,K.$)(),i("codegptplusbeta"),r().then(e=>{e||c(!0)})},children:"Change to CodeGPT Plus"})})]})})]})})}function es(e){let{onSubmit:t,onChange:a,value:s,isLoading:o,stop:i,showReloadButton:r,reload:c,append:d,clearChat:m}=e,{setSelectedProvider:p,selectedProvider:h}=(0,n.Y)();(0,L.useEffect)(()=>{let e=e=>{let t=e.data.promptType;(null==t?void 0:t.toLowerCase())==="clearchat"?m():(null==t?void 0:t.toLowerCase())==="syncprovider"?e.data.value.toLowerCase().replaceAll(" ","")!==h&&p(e.data.value.toLowerCase().replaceAll(" ","")):t&&d({role:"user",content:t},{options:{headers:{"Content-Type":"application/json",promptType:"true"}}})};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[d,m]);let x=async e=>{if("submit"===e.type||"Enter"===e.key&&!e.shiftKey){if(o)return;t(e);return}if(("x"===e.key.toLowerCase()||"KeyX"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){e.preventDefault();let t=e.target,{selectionStart:l,selectionEnd:n}=t;if(null!==l&&null!==n&&l!==n){let e=t.value.substring(l,n);(0,u.zp)(e).then(()=>{a({target:{value:s.substring(0,l)+s.substring(n)}})})}}("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,u.M1)().then(t=>{let l=e.target,{selectionStart:n,selectionEnd:o}=l;a({target:{value:s.substring(0,null!=n?n:s.length)+t+s.substring(null!=o?o:s.length)}}),l.selectionStart=0,l.selectionEnd=0})),(0,u.gT)(e)};return(0,l.jsx)("div",{className:"flex w-full flex-col items-center justify-center",children:(0,l.jsxs)("div",{className:"relative flex w-full max-w-xl flex-col items-center",children:[(0,l.jsx)("div",{className:"absolute -top-10 left-0 flex w-full justify-end gap-2",children:r&&!o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k.A,{onClick:()=>m(),className:"border text-default-500",color:"default",variant:"faded",size:"sm",startContent:(0,l.jsx)(D.Z,{className:"w-4 shrink-0"}),children:"Clear"}),(0,l.jsx)(k.A,{onClick:()=>c(),className:"border text-default-500",color:"default",variant:"faded",size:"sm",startContent:(0,l.jsx)(Y.Z,{className:"w-4 shrink-0"}),children:"Reload"})]})}),(0,l.jsx)("form",{className:"w-full",onSubmit:x,children:(0,l.jsx)(H.Y,{className:"h-fit w-full resize-none overflow-y-auto",placeholder:"Type your message here...",autoFocus:!0,value:s,size:"lg",minRows:1,maxRows:6,color:"default",variant:"faded",onChange:a,onKeyDown:x,classNames:{innerWrapper:"items-center",inputWrapper:"border"},startContent:(0,l.jsx)(el,{isLoading:o}),endContent:o?o&&(0,l.jsx)(k.A,{color:"danger",variant:"flat",isDisabled:!o,onClick:async()=>i(),startContent:(0,l.jsx)(B.Z,{className:"w-6 shrink-0"}),children:"Stop"}):(0,l.jsx)(k.A,{color:"primary",type:o?"button":"submit",isDisabled:o,isIconOnly:!o,startContent:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W.Z,{className:"".concat((0,U.cn)({hidden:o})," w-6 -rotate-45")}),(0,l.jsx)("span",{className:(0,U.cn)("",{hidden:!o}),children:(0,l.jsx)(q.Z,{size:32,speed:1.5,color:"pink"})})]})})})})]})})}var en=a(70184);let eo=async e=>{try{let t=await b.Z.get("/api/".concat(e));return t.data?{...t.data}:{agents:[],marketplace:[]}}catch(e){return{agents:[],marketplace:[]}}};var ei=a(40621);parseInt(a(65199).env.PORT);let er=[{id:"CodeGPT Plus Beta",name:"CodeGPT Plus",link:"codegptplusbeta",agents:!0,models:["GPT-4"],autocompleteModels:["Plus"]},{name:"OpenAI",link:"openai",models:["gpt-3.5-turbo","gpt-4","gpt-4-1106-preview","gpt-4-32k","gpt-3.5-turbo-16k"],autocompleteModels:["gpt-3.5-turbo-instruct"]},{name:"Azure",link:"azure",models:["Azure"]},{name:"Anthropic",link:"anthropic",models:["claude-2.1","claude-instant-1.2"],autocompleteModels:["claude-2","claude-instant-1"]},{name:"Cohere",link:"cohere",models:["command","command-light"]},{name:"Vertex",link:"vertex",models:["gemini-pro","gemini-1.5-pro-latest","gemini-ultra","gemini-nano"]},{name:"Google AI Studio",link:"googleaistudio",models:["gemini-pro","gemini-1.0-pro","gemini-1.5-pro-latest","gemini-ultra","gemini-nano","chat-bison-001"]},{name:"Ollama",link:"ollama",editable:!0,models:["gemma:7b","gemma:2b","mistral","mixtral","llama2","codellama","deepseek-coder","phi","dolphin-mixtral","starling-lm","llama2-uncensored"],autocompleteModels:["codegpt/deepseek-coder-1.3b-typescript","deepseek-coder:base"]},{name:"Fireworks AI",link:"fireworksai",models:["mixtral-8x7b","zephyr-7b-beta","llama-v2-7b-chat","llama-v2-70b-chat"],editable:!0},{name:"Mistral",link:"mistral",models:["mistral-large-latest","mistral-medium-latest","mistral-small-latest","mistral-tiny","open-mixtral-8x7b","open-mistral-7b"]},{name:"Huggingface",link:"huggingface",models:["OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5","mistralai/Mistral-7B-Instruct-v0.1","mistralai/Mixtral-8x7B-Instruct-v0.1"],editable:!0},{name:"Bedrock",link:"bedrock",editable:!0,models:["anthropic.claude-v2","anthropic.claude-v2:1","anthropic.claude-v1","anthropic.claude-instant-v1"]},{name:"Custom",link:"custom",editable:!0,models:[]},{name:"Perplexity",link:"perplexity",models:["llama-2-70b-chat","codellama-34b-instruct","codellama-70b-instruct","mistral-7b-instruct","mixtral-8x7b-instruct","pplx-7b-chat","pplx-70b-chat","pplx-7b-online","pplx-70b-online"]},{name:"LM Studio",link:"lmstudio",models:["Not required"]},{id:"CodeGPT Plus",name:"CodeGPT Plus legacy",description:"deprecated",link:"codegptplus",agents:!0,models:["Plus"]}];var ec=a(58621),ed=a(23900),eu=a(98005),em=a(42685),ep=a(38504),eh=a(74009),ex=a(80954),eg=a(34102),ef=a(17161),ev=a(98908),eb=a(14078),ej=a(79147),ek=a(3155),ey=a(92455),ew=a(50278);function eN(e){var t,a,i,r,c,m,p,h,x,g,f;let{isLoading:v}=e,{currentProviderModel:y,setCurrentProviderModel:w}=(0,n.o)(),C=(0,A.U)(e=>e.setOpen),{selectedProvider:T,setSelectedProvider:Z}=(0,n.Y)(),{agents:z,mutate:M,isLoading:O}=function(){let e=(0,n.Y)(e=>e.selectedProvider),{data:t,mutate:a,isLoading:l,isValidating:s}=(0,o.ZP)("/api/agents/",()=>eo(e),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:0});return{agents:t,isLoading:l||s,mutate:a}}(),{isConnected:S}=(0,P.T)(),I=null===(t=er.find(e=>e.link===T))||void 0===t?void 0:t.models.map(e=>({label:e,value:e})),F=(null==z?void 0:z.agents)?null===(a=z.agents)||void 0===a?void 0:a.map(e=>({label:e.name,value:e.id})):[],V=(null==z?void 0:z.marketplace)?null==z?void 0:z.marketplace.map(e=>({label:e.name,value:e.id})):[],K=null===(i=er.find(e=>e.link===T))||void 0===i?void 0:i.editable,E=null!==(x=null===(r=er.find(e=>e.link===T))||void 0===r?void 0:r.agents)&&void 0!==x&&x,G=N[T],D=e=>{var t,a,l,s,n,o,i,r;let{model:c,newProvider:d}=e,u=[...(null==I?void 0:I.length)?I:[],...F,...V].find(e=>e.label===c),m=null!==(s=null!==(l=null==u?void 0:u.value)&&void 0!==l?l:c)&&void 0!==s?s:null===(t=y[d])||void 0===t?void 0:t.id,p=null!==(o=null!==(n=null==u?void 0:u.label)&&void 0!==n?n:c)&&void 0!==o?o:null===(a=y[d])||void 0===a?void 0:a.label;console.log({item:u,model:c,label:p,newValue:m}),(!m||""===m&&K)&&(p=m=null!==(r=null===(i=er.find(e=>e.link===d))||void 0===i?void 0:i.models[0])&&void 0!==r?r:"");let h=!!V.find(e=>e.label===c);(m||""===m)&&w(null!=d?d:T,{label:p,id:m,fromMarketplace:h})},Y=e=>{let t=e.currentTarget.value;("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,u.M1)().then(a=>{let{selectionStart:l,selectionEnd:s}=e.target,n=t.substring(0,null!=l?l:t.length)+a+t.substring(null!=s?s:t.length);w(T,{label:n,id:n,fromMarketplace:!!V.find(e=>e.label===a.trim())})}))},W=d(e=>e.setOpen),B=(0,ei.w)(e=>e.setOpen),H=(0,j.F)(e=>e.port),[U,q]=(0,L.useState)(!1),[J,X]=(0,L.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{id:"sidebar",className:"".concat(U?"visible z-50":"invisible -z-50"," fixed left-0 top-0 h-screen w-screen transition-all"),children:[(0,l.jsx)("div",{className:"".concat(U?"opacity-100":"opacity-0"," absolute left-0 top-0 z-10 h-screen w-screen cursor-pointer bg-black/50 transition-opacity"),onClick:()=>q(!1)}),(0,l.jsxs)("div",{id:"sidebar-content",className:"".concat(U?"opacity-100":"-translate-x-full opacity-50"," absolute left-0 top-0 z-20 grid h-full w-full max-w-sm grid-flow-row grid-cols-1 grid-rows-[auto_1fr] content-between bg-white shadow-lg transition-all ease-in-out dark:bg-black dark:shadow-none"),children:[(0,l.jsxs)("header",{className:"grid grid-flow-col items-center justify-between p-3",children:[(0,l.jsx)("span",{children:"CodeGPT"}),(0,l.jsx)(k.A,{startContent:(0,l.jsx)(ec.Z,{className:"w-5"}),onPress:()=>q(!1),isIconOnly:!0})]}),(0,l.jsx)("div",{className:"grid content-start items-start p-3",children:(0,l.jsxs)(ef.X,{variant:"flat","aria-label":"Menu",children:[(0,l.jsx)(ev.y,{title:"Account",showDivider:!0,children:(0,l.jsx)(eb.R,{onClick:()=>(0,u.Yo)("http://localhost:".concat(H,"/login")),children:"Sign In"},"signin")}),(0,l.jsxs)(ev.y,{title:"Tools",showDivider:!0,children:[(0,l.jsx)(eb.R,{textValue:"Chat",children:(0,l.jsx)(en.Z,{href:"/",children:"Chat"})},"chat"),(0,l.jsx)(eb.R,{textValue:"Marketplace",children:(0,l.jsx)(en.Z,{href:"/assistants",children:"Marketplace"})},"Marketplace"),(0,l.jsx)(eb.R,{onClick:()=>(0,u.Yo)("http://localhost:".concat(H,"/vision")),children:"React Sandbox"},"vision")]}),(0,l.jsxs)(ev.y,{title:"Help",showDivider:!0,children:[(0,l.jsx)(eb.R,{onClick:()=>(0,u.os)("https://docs.codegpt.co/docs/intro"),children:"Documentation"},"docsLink"),(0,l.jsx)(eb.R,{onClick:()=>(0,u.Yo)("https://github.com/davila7/code-gpt-docs/issues"),children:"Issues"},"issues")]}),(0,l.jsxs)(ev.y,{title:"Settings",className:"mt-auto",children:[(0,l.jsx)(eb.R,{onClick:()=>B(!0),children:"Autocomplete"},"autocomplete"),(0,l.jsxs)(eb.R,{classNames:{title:"flex justify-between"},textValue:"Theme",children:[(0,l.jsx)("span",{children:"Theme"}),(0,l.jsx)(ew.O,{})]},"theme"),(0,l.jsxs)(eb.R,{classNames:{title:"flex justify-between"},textValue:"Version",children:[(0,l.jsx)("span",{children:"Version"}),(0,l.jsx)(R.z,{size:"sm",children:"v3.1.1"})]},"version")]})]})})]})]}),(0,l.jsxs)("div",{className:"grid grid-flow-col grid-cols-3 items-center justify-between px-3 py-2",children:[(0,l.jsxs)("div",{className:"col-span-2 flex w-full items-center gap-2",children:[(0,l.jsx)(k.A,{startContent:U?(0,l.jsx)(ec.Z,{className:"w-5"}):(0,l.jsx)(ed.Z,{className:"w-5"}),onPress:()=>q(!U),isIconOnly:!0,variant:"bordered",className:"border"},"settings"),(0,l.jsxs)(ee.j,{showArrow:!0,placement:"bottom",backdrop:"opaque",isOpen:J,onOpenChange:e=>X(e),classNames:{content:"w-full w-[28rem]"},children:[(0,l.jsx)(et.b,{children:(0,l.jsx)(k.A,{className:"w-full max-w-sm content-start items-center justify-start border",variant:"bordered",isDisabled:v,startContent:(0,l.jsx)(s.T,{provider:T,className:"aspect-square shrink-0 rounded-full",width:20,height:20}),endContent:(0,l.jsx)(eu.Z,{className:"w-5"}),children:(0,l.jsx)("div",{className:"grid justify-start text-start",children:(0,l.jsx)("span",{className:"text-small capitalize",children:(null===(c=y[T])||void 0===c?void 0:c.label.length)>0?null===(m=y[T])||void 0===m?void 0:m.label:"Select a model"})})})}),(0,l.jsxs)(ea.g,{className:"grid grid-cols-1 gap-4 p-3",children:[(0,l.jsxs)("article",{children:[(0,l.jsx)("h2",{children:"Setup your model"}),(0,l.jsx)("p",{className:"text-default-500",children:"Select your provider and model"})]}),(0,l.jsx)(ej.g,{label:"Providers",placeholder:"Select an provider",selectedKeys:[null===(p=er.find(e=>e.link===T))||void 0===p?void 0:p.name],className:"w-full",fullWidth:!0,onChange:e=>{var t,a,l;let s=e.target.value;if(!s)return;let n=er.find(e=>e.name===s),o=null!==(t=null==n?void 0:n.link)&&void 0!==t?t:"";D({newProvider:o}),Z(o),b.Z.post("/api/actions",{action:"updateConfig",key:"CodeGPT.apiKey",value:null!==(l=null!==(a=null==n?void 0:n.id)&&void 0!==a?a:null==n?void 0:n.name)&&void 0!==l?l:""}),(null==n?void 0:n.agents)&&setTimeout(()=>{M()},1e3)},children:er.map(e=>(0,l.jsx)(eb.R,{value:e.link,textValue:e.name,startContent:(0,l.jsx)(ek.h,{src:"",className:"size-10 border-0 bg-content2",fallback:(0,l.jsx)(s.T,{provider:e.link,className:"border-0",width:32,height:32})}),children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"text-small",children:e.name}),e.description&&(0,l.jsx)("span",{className:"text-tiny text-default-500",children:e.description})]})},e.name))}),S?(0,l.jsxs)(ey.d,{allowsCustomValue:K,label:"Select or search a model",className:"w-full",fullWidth:!0,allowsEmptyCollection:!1,inputValue:null!==(g=null===(h=y[T])||void 0===h?void 0:h.label)&&void 0!==g?g:"",onInputChange:e=>D({model:e}),onOpenChange:()=>M(),onKeyDown:e=>Y(e),placeholder:"Type the model name",startContent:(0,l.jsx)(em.Z,{className:"w-5"}),disabledKeys:["loader"],children:[(0,l.jsx)(ev.y,{...E&&(F.length>0||V.length>0)?{showDivider:!0}:{},title:(null==I?void 0:I.length)?"Models":"",children:null!==(f=null==I?void 0:I.map(e=>(0,l.jsx)(eb.R,{value:e.value,children:e.label},e.value)))&&void 0!==f?f:[]}),O&&0===F.length&&0===V.length&&(0,l.jsx)(ev.y,{title:"Agents",children:(0,l.jsx)(eb.R,{children:(0,l.jsx)(k.A,{isLoading:!0,fullWidth:!0,variant:"bordered",children:"Loading Agents"})},"loader")}),V.length&&(0,l.jsx)(ev.y,{title:"Marketplace Agents",showDivider:!0,children:null==V?void 0:V.map(e=>(0,l.jsx)(eb.R,{value:e.value,children:e.label},e.value))}),F.length&&(0,l.jsx)(ev.y,{title:"Agents",children:null==F?void 0:F.map(e=>(0,l.jsx)(eb.R,{value:e.value,children:e.label},e.value))})]}):(0,l.jsxs)("p",{className:"flex items-center justify-center gap-1",children:[(0,l.jsx)(ep.Z,{className:"w-4"}),"Set your"," ",(0,l.jsx)("span",{className:"capitalize",children:"codegptplusbeta"===T?"CodeGPT account":"".concat(T," API key")})," ","to enable the model selection"]}),!G.disableConnection&&(0,l.jsxs)(l.Fragment,{children:[S&&(0,l.jsxs)("div",{className:"grid",children:[(0,l.jsxs)("small",{className:"flex gap-1 text-xs text-default-500",children:[(0,l.jsx)(eh.Z,{className:"w-3 text-default-500"}),"Status"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("small",{className:"text-success-500",style:{fontSize:"10px"},children:"●"}),(0,l.jsx)("span",{className:"text-sm",children:"Connected"})]})]}),(0,l.jsx)(k.A,{startContent:(0,l.jsx)(_.Z,{className:"w-4 shrink-0"}),onPress:()=>{C(!0),X(!1)},children:S?"Edit Connection":"Set Connection"},"setConnection")]})]})]}),G.disableConnection?null:(0,l.jsx)($.e,{content:"Set LLM connection",placement:"bottom",children:(0,l.jsx)(k.A,{startContent:S?(0,l.jsx)(eh.Z,{className:"w-5 text-success-500"}):(0,l.jsx)(_.Z,{className:"w-4"}),onPress:()=>{C(!0)},variant:"bordered",className:"shrink-0 border",isIconOnly:!0})})]}),(0,l.jsxs)("div",{className:"col-span-2 grid shrink-0 grid-flow-col justify-end gap-2",children:[(0,l.jsx)($.e,{content:"Open in browser",placement:"bottom",children:(0,l.jsx)(k.A,{startContent:(0,l.jsx)(ex.Z,{className:"w-5"}),onPress:()=>(0,u.Yo)("http://localhost:".concat(H)),isIconOnly:!0,variant:"bordered",className:"border"},"openInBrowser")}),(0,l.jsx)($.e,{content:"Chat Settings",placement:"bottom",children:(0,l.jsx)(k.A,{startContent:(0,l.jsx)(eg.Z,{className:"w-5"}),onPress:()=>W(!0),isIconOnly:!0,variant:"bordered",className:"border"},"settings")})]})]})]})}var eC=e=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 391.09 234.11",...e,children:(0,l.jsx)("path",{d:"M91 91V72.76H18.19V18.19H91V0H18.19A18.25 18.25 0 0 0 0 18.19v54.57A18.24 18.24 0 0 0 18.19 91ZM172.81 91A18.24 18.24 0 0 0 191 72.76V18.19A18.25 18.25 0 0 0 172.81 0h-54.58a18.24 18.24 0 0 0-18.18 18.19v54.57A18.23 18.23 0 0 0 118.23 91Zm-54.58-72.81h54.58v54.57h-54.58ZM272.85 91a18.24 18.24 0 0 0 18.2-18.19V18.19A18.25 18.25 0 0 0 272.85 0h-72.76v91Zm-54.57-72.81h54.57v54.57h-54.57ZM391.09 0h-72.77a18.24 18.24 0 0 0-18.18 18.19v54.57A18.23 18.23 0 0 0 318.32 91h72.77V72.76h-72.77V54.57h72.77V36.38h-72.77V18.19h72.77ZM122.22 111.89H24.45A24.52 24.52 0 0 0 0 136.33v73.34a24.52 24.52 0 0 0 24.45 24.44h73.33a24.51 24.51 0 0 0 24.44-24.44v-48.89H48.89v24.44h48.89v24.45H24.45v-73.34h97.77ZM232.21 111.89h-97.78v122.22h24.45v-48.89h73.33a24.52 24.52 0 0 0 24.45-24.44v-24.45a24.52 24.52 0 0 0-24.45-24.44Zm-73.33 48.89v-24.45h73.33v24.45ZM391.09 111.89H268.87v24.44h48.89v97.78h24.45v-97.78h48.88Z"})});let eP=e=>(0,l.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...e,children:(0,l.jsx)("polyline",{points:"20 6 9 17 4 12"})}),eA=async()=>new Promise(async e=>{setTimeout(async()=>{let t={isEnabled:!1,maxTokens:500,provider:"CodeGPT Plus",model:"Plus",delay:1200},a=await fetch("/api/autocomplete/config").then(e=>e.json()).catch(()=>t);e({...t,...a})},500)});var e_=a(8368),eT=a(86230),eZ=a(4712);let ez=(0,e_.tv)({slots:{base:"border-default hover:bg-default-200",content:"text-default-500"},variants:{isSelected:{true:{base:"border-primary bg-primary hover:bg-primary-500 hover:border-primary-500",content:"text-primary-foreground pl-1"}},isFocusVisible:{true:{base:"outline-none ring-2 ring-focus ring-offset-2 ring-offset-background"}}}}),eM=er.filter(e=>{var t;return null==e?void 0:null===(t=e.autocompleteModels)||void 0===t?void 0:t.length}).flatMap(e=>{var t;return null==e?void 0:null===(t=e.autocompleteModels)||void 0===t?void 0:t.map(t=>({provider:e.name,model:t,link:e.link}))});function eO(){let{configuration:e,mutate:t}=function(){let{data:e,mutate:t,isLoading:a,isValidating:l}=(0,o.ZP)("/api/autocomplete/config",()=>eA(),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:5e3});return{configuration:e,isLoading:null!=a?a:l,mutate:()=>new Promise(e=>{setTimeout(()=>{t().then(t=>{e(t)})},300)})}}(),{children:a,isFocusVisible:n,getBaseProps:i,getLabelProps:r,getInputProps:c}=(0,eT.O)({onValueChange:e=>j(e,"Enabled")}),d=ez({isSelected:null==e?void 0:e.isEnabled,isFocusVisible:n}),{isOpen:u,setOpen:g}=(0,ei.w)(),j=async(e,a)=>{"Model"===a?await b.Z.post("/api/actions",{action:"setAutocomplete".concat(a),value:e.currentKey}):await b.Z.post("/api/actions",{action:"setAutocomplete".concat(a),value:e}),t()};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(m.R,{isOpen:u,placement:"top",scrollBehavior:"inside",classNames:{closeButton:"bg-white/5 active:bg-white/10 h-10 w-10 p-0 flex items-center justify-center rounded-full absolute top-3 right-6"},onOpenChange:async()=>{g(!1)},children:(0,l.jsx)(p.A,{children:()=>{var t,n;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.k,{className:"flex flex-row items-center gap-4 font-normal",children:[(0,l.jsx)("div",{className:"size-fit",children:(0,l.jsx)(s.T,{provider:"codegptplusbeta",width:40,height:40,className:"rounded-lg border"})}),(0,l.jsxs)("div",{className:"flex select-none flex-col",children:[(0,l.jsx)("span",{className:"pt-1",children:"Autocomplete Settings"}),(0,l.jsx)("span",{className:"text-small text-default-500",children:"Ensure to properly configure the parameters here"})]})]}),(0,l.jsx)(y.j,{}),(0,l.jsxs)(x.I,{className:"mt-1",children:[(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsxs)("label",{...i(),children:[(0,l.jsx)(eZ.T,{children:(0,l.jsx)("input",{...c()})}),(0,l.jsxs)(R.z,{classNames:{base:d.base(),content:d.content()},color:"primary",startContent:(null==e?void 0:e.isEnabled)?(0,l.jsx)(eP,{className:"ml-1"}):null,variant:"faded",...r(),children:["Autocomplete ",a||((null==e?void 0:e.isEnabled)?"ON":"OFF")]})]})}),(0,l.jsx)(ej.g,{label:"Models",placeholder:"Select an model",selectedKeys:["".concat(null==e?void 0:e.provider," - ").concat(null==e?void 0:e.model)],className:"w-full",fullWidth:!0,onSelectionChange:e=>j(e,"Model"),children:eM.map(e=>(0,l.jsx)(eb.R,{value:"".concat(e.provider," - ").concat(e.model),textValue:e.model,startContent:(0,l.jsx)(ek.h,{src:"",className:"size-10 border-0 bg-content2",fallback:(0,l.jsx)(s.T,{provider:e.link,className:"border-0",width:32,height:32})}),children:(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)("span",{className:"text-small",children:e.model})})},"".concat(e.provider," - ").concat(e.model)))}),(0,l.jsx)(f.L,{color:"primary",maxValue:6e3,minValue:300,step:10,defaultValue:null!==(t=null==e?void 0:e.maxTokens)&&void 0!==t?t:500,onChangeEnd:e=>j(Number(e),"MaxTokens"),label:"Max Tokens","aria-label":"Max Tokens",className:"max-w-md"}),(0,l.jsx)(f.L,{color:"primary",maxValue:1e4,minValue:0,step:10,defaultValue:null!==(n=null==e?void 0:e.delay)&&void 0!==n?n:1200,onChangeEnd:e=>j(Number(e),"Delay"),label:"Suggestion Delay","aria-label":"Suggestion Delay",className:"max-w-md"})]}),(0,l.jsx)(v.R,{})]})}})})})}var eS=a(99660),eR=a(18829),eL=a(66521),eI=a(50276),eF=a(21193),eV=a(15329),eK=a(56837),eE=a(11213),eG=e=>{var t,a;let{role:n,content:o,image:i,index:r,isLastMessage:c,isLoading:d,providerState:u,modelHistory:m}=e,{renderMessageContent:p}=(0,eV.Z)();return(0,l.jsx)(l.Fragment,{children:(e=>{let{role:t,username:a,content:n,avatar:o,loader:i}=e;return(0,l.jsxs)("div",{className:"card mx-auto grid w-full max-w-xl grid-cols-1 items-start justify-start gap-2 place-self-stretch text-pretty px-3 text-foreground sm:px-0",children:[(0,l.jsxs)("div",{className:"grid w-full grid-flow-col items-center justify-start gap-2",children:["assistant"===t?(0,l.jsx)(s.T,{className:"shrink-0 overflow-hidden rounded-full",provider:u,width:24,height:24}):(0,l.jsx)(ek.h,{src:o,fallback:(0,l.jsx)(eE.Z,{size:16}),radius:"full",size:"sm",className:"h-[24px] w-[24px] shrink-0 bg-indigo-400"}),(0,l.jsx)("p",{className:"text-opacity-80",children:a})]}),(0,l.jsx)("div",{children:n?p(n):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eK.X,{className:"mb-2 h-4 w-full rounded-lg"}),(0,l.jsx)(eK.X,{className:"mb-2 h-4 w-[85%] rounded-lg"})]})})]})})("assistant"===n?d&&c&&"assistant"===n&&!o?{role:n,username:"CodeGPT ".concat((null==m?void 0:null===(t=m[u])||void 0===t?void 0:t[r])||u)}:{role:n,content:o,username:"CodeGPT ".concat((null==m?void 0:null===(a=m[u])||void 0===a?void 0:a[r])||u),avatar:(0,l.jsx)(s.T,{className:"overflow-hidden rounded-full",provider:u,width:24,height:24})}:{role:n,content:o,username:"User",avatar:""})})};let eD=["Explain selected code","Refactor selected code","Document selected code","Fix a bug in the selected code"];function eY(){var e,t,a,s,o;let{selectedProvider:i}=(0,n.Y)(),{setOpen:c}=(0,A.U)(),{currentProviderModel:d}=(0,n.o)(),u=null===(e=d[i])||void 0===e?void 0:e.id,m=null===(t=d[i])||void 0===t?void 0:t.fromMarketplace,[p,h]=(0,L.useState)({}),{isLoading:x}=r(),g=(0,eS.Z)(),{image:f,setImage:v}=J(),{messages:b,setMessages:j,input:y,handleInputChange:w,handleSubmit:N,setInput:P,isLoading:_,stop:T,reload:Z,append:z}=(0,eF.RJ)({api:"/api/".concat(i),headers:{"Content-Type":"application/json",...u?{model:u}:{},...m?{fromMarketplace:"true"}:{}},sendExtraMessageFields:"codegptplusbeta"===i,onFinish:()=>{var e;let t=null===(e=d[i])||void 0===e?void 0:e.label,a=b.length+1;h(e=>({...e,[i]:{...e[i],[a]:t}}))},onError:e=>{let t=e.message,a=500;try{var l,s;let n=JSON.parse(e.message);t=null!==(l=n.message)&&void 0!==l?l:t,a=null!==(s=Number(n.status))&&void 0!==s?s:a}catch(e){}401===a?c(!0):g({logo:i.toLowerCase(),title:"".concat(i.slice(0,1).toUpperCase()+i.slice(1)," Error"),description:null==t?void 0:t.replaceAll('"',""),footer:[{label:"Click here for more info about models.",link:"https://docs.codegpt.co/docs/category/ai-providers"}],ads:[..."codegptplus"!==i?[{label:"Prevent Errors. Gain instant access to AI Pro Models by trying CodeGPT Plus for free."}]:[]]})}}),M=(null===(a=b[b.length-1])||void 0===a?void 0:a.role)==="assistant",O=()=>{j([]),h(e=>({...e,[i]:{}}))},S=(0,L.useRef)(null),{inView:R}=(0,eI.S1)(S),I=null===(o=b[b.length-1])||void 0===o?void 0:null===(s=o.content)||void 0===s?void 0:s.length;return((0,L.useEffect)(()=>{if(S.current&&R){var e;null===(e=S.current)||void 0===e||e.scrollIntoView({behavior:"auto",block:"end"})}},[b.length,I,R,_]),i)?(0,l.jsxs)(l.Fragment,{children:[!x&&(0,l.jsx)(V,{},i),(0,l.jsx)(C,{}),(0,l.jsx)(eO,{}),(0,l.jsxs)("div",{className:"grid h-[100dvh] min-h-[100dvh] grid-cols-1 grid-rows-[auto_1fr_auto]",children:[(0,l.jsx)(eN,{clearChat:O,isLoading:_}),(0,l.jsxs)(eL.o,{hideScrollBar:!0,className:"markdown mx-auto size-full gap-6 overflow-y-auto px-4 pt-2 md:px-0 md:py-6",size:16,children:[b.length>0?(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[b.map((e,t)=>(0,l.jsx)(eG,{role:e.role,content:e.content,image:e.image,index:t,isLastMessage:t===b.length-1,isLoading:_,providerState:i,modelHistory:p},"msg-".concat(t))),_&&!M&&(0,l.jsx)(eG,{role:"assistant",content:"",index:b.length,isLastMessage:!0,isLoading:!0,providerState:i,modelHistory:p})]}):(0,l.jsx)("div",{className:"relative flex h-full flex-col items-center justify-center",children:(0,l.jsx)("div",{className:"absolute left-1/2 top-1/2 flex w-full -translate-x-1/2 -translate-y-2/3 flex-col items-center justify-center",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,l.jsx)(eC,{className:"size-36 sm:size-52"}),(0,l.jsx)("span",{className:"m-0 select-none text-2xl",children:"Welcome to CodeGPT 2.0!"}),(0,l.jsx)("span",{className:"m-0 select-none text-lg",children:"Ask me anything about coding!"}),(0,l.jsx)(G,{})]})})}),(0,l.jsx)("div",{style:{background:"transparent",width:"100%",height:"4px"},ref:S})]}),(0,l.jsxs)("footer",{className:"mx-auto grid w-full max-w-xl gap-2 px-3 pb-3 sm:px-0",children:[(0,l.jsx)("div",{className:" grid w-full grid-cols-2 gap-2",children:0===b.length&&eD.map((e,t)=>(0,l.jsx)(k.A,{variant:"bordered",className:"relative justify-between overflow-hidden text-ellipsis border text-start",endContent:(0,l.jsx)(eR.Z,{className:"w-4 shrink-0"}),onClick:()=>z({role:"user",content:e}),children:(0,l.jsx)("span",{className:"w-full overflow-hidden text-ellipsis",children:e})},"prompt_".concat(t)))}),(0,l.jsx)(es,{onSubmit:e=>{if("codegptplusbeta"===i){if(e.preventDefault(),!y)return;let t=[...b];t.push({id:crypto.randomUUID(),role:"user",content:y,...f?{image:f}:{}}),P(""),j(t),Z().then(()=>v(""))}else N(e)},value:y,onChange:w,isLoading:_,stop:T,showReloadButton:M,reload:Z,append:z,clearChat:O})]})]})]}):null}},50278:function(e,t,a){"use strict";a.d(t,{O:function(){return c}});var l=a(3827),s=a(4710),n=a(18096),o=a(34782),i=a(91774),r=a(64090);function c(){let[e,t]=(0,r.useState)(!1),{theme:a,setTheme:c}=(0,i.F)();return((0,r.useEffect)(()=>{t(!0)},[]),e)?(0,l.jsx)(o.i,{defaultSelected:"dark"===a,color:"secondary",size:"md",startContent:(0,l.jsx)(s.Z,{}),endContent:(0,l.jsx)(n.Z,{}),onChange:()=>c("dark"===a?"light":"dark"),classNames:{base:"m-0",label:"m-0",wrapper:"m-0"}}):null}},70184:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var l=a(3827),s=a(83928),n=a(7908),o=a(8792),i=a(64090);function r(e){let{href:t,children:a,props:r}=e,[c,d]=(0,i.useState)(!1),u=(0,s.F)(e=>e.port);return((0,i.useEffect)(()=>{d(window.location!==window.parent.location)},[]),c)?(0,l.jsx)("div",{onClick:()=>n.Z.post("/api/actions",{action:"changeIframeUrl",text:"http://localhost:".concat(u).concat(t)}),...r,children:a}):(0,l.jsx)(o.default,{href:"http://localhost:".concat(u).concat(t),...r,children:a})}},40621:function(e,t,a){"use strict";a.d(t,{w:function(){return l}});let l=(0,a(22020).Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}))}},function(e){e.O(0,[565,665,426,973,983,375,650,673,306,54,971,69,744],function(){return e(e.s=70006)}),_N_E=e.O()}]);