(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{19945:function(e,t,l){Promise.resolve().then(l.bind(l,88471)),Promise.resolve().then(l.bind(l,19409))},19409:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return _}});var s=l(3827),r=l(15329),a=l(99660),n=l(29327),i=l(77175);function o(e){let{codeOutput:t}=e;return(0,s.jsx)(s.Fragment,{children:(null==t?void 0:t.length)?(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:t}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(i.g4,{visible:!0,height:"80",width:"80",color:"#A1A1AA",radius:"9",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClass:""})})})}var c=l(64090),d=l(33467);function u(e){let{codeBlock:t}=e;return(0,s.jsx)(s.Fragment,{children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{id:"LiveProvidersBrother",className:"hidden"}),(0,s.jsxs)(d.nu,{code:t,scope:{useState:c.useState,useRef:c.useRef,useEffect:c.useEffect},children:[(0,s.jsx)(d.IF,{}),(0,s.jsx)(d.i5,{})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(i.CJ,{visible:!0,height:"80",width:"80",color:"#A1A1AA",ariaLabel:"triangle-loading",wrapperStyle:{},wrapperClass:""})})})}var h=l(24658),f=l(28889),p=l(48150),m=l(66296),x=l(19391),g=l(48786),j=l(17100);function v(e){let{handleSubmitC:t,handleInputChange:l,input:r,clear:a,isLoading:n,showStopButton:i,open:o,getRootProps:d,getInputProps:u}=e;return(0,s.jsx)("div",{className:"relative flex w-full flex-col items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,s.jsx)("div",{className:"mb-4 flex w-full justify-end",children:i&&(0,s.jsx)(m.A,{variant:"faded",className:"text-default-500",color:"default",onClick:a,endContent:(0,s.jsx)(h.Z,{className:"text-default-500",width:16,height:16}),children:"Clear"})}),(0,s.jsx)("form",{className:"relative w-full",onSubmit:t,children:(0,s.jsx)(x.Y,{minRows:1,maxRows:6,autoFocus:!0,value:r,onChange:l,onKeyDown:t,classNames:{innerWrapper:"items-center"},startContent:(0,c.createElement)("div",{...d(),key:"img_button_".concat(n),className:n?"pointer-events-none":""},(0,s.jsxs)(m.A,{isIconOnly:!0,variant:"bordered",onClick:o,size:"lg",isDisabled:n,children:[(0,s.jsx)("input",{...u(),className:"hidden"}),(0,s.jsx)(f.Z,{color:"gray",height:24,width:24})]})),endContent:(0,s.jsxs)(m.A,{color:"primary",type:n?"button":"submit",isDisabled:n,isIconOnly:!0,children:[(0,s.jsx)(p.Z,{height:24,width:24,className:(0,g.cn)({hidden:n})}),(0,s.jsx)("span",{className:(0,g.cn)("",{hidden:!n}),children:(0,s.jsx)(j.Z,{size:32,speed:1.5,color:"pink"})})]}),size:"lg",color:"default",variant:"faded",className:"overflow-y-auto",placeholder:"Type your message here..."})})]})})}var y=l(10401),w=l(98111),N=l(73031),b=l(5187),A=l(51055),C=l(77599),k=l(21193),E=l(54739),S=l(56288);function _(){let{getFirstCodeBlockContent:e,renderMessageContent:t}=(0,r.Z)(),l=(0,a.Z)(),i=(0,n.Y)(e=>e.selectedProvider),{completion:c,complete:d,isLoading:h,handleInputChange:p,input:x,setInput:g,setCompletion:j}=(0,k.GO)({api:"/api/vision",onError:e=>{let t=e.message;try{var s;let l=JSON.parse(e.message);t=null!==(s=l.message)&&void 0!==s?s:t}catch(e){}l({logo:"codegptplusbeta",title:"CodeGPT Plus Error",description:null==t?void 0:t.replaceAll('"',""),footer:[{label:"Click here for more info about models.",link:"https://docs.codegpt.co/docs/category/ai-providers"}]})}}),_=c.replaceAll("w-screen","w-full").replaceAll("h-screen","h-full"),O=e(_),F=t(_),L=!!(!h&&_),P=async e=>{if("submit"===e.type||"Enter"===e.key&&!e.shiftKey){if(e.preventDefault(),h)return;let t={prompt:e.target.value,code:O,image:""};g(""),await d(JSON.stringify(t)).catch(()=>g(t.prompt));return}if(("x"===e.key.toLowerCase()||"KeyX"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){e.preventDefault();let t=e.target,{selectionStart:l,selectionEnd:s}=t;if(null!==l&&null!==s&&l!==s){let e=t.value.substring(l,s);(0,y.zp)(e).then(()=>{p({target:{value:x.substring(0,l)+x.substring(s)}})})}}("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,y.M1)().then(t=>{let l=e.target,{selectionStart:s,selectionEnd:r}=l;p({target:{value:x.substring(0,null!=s?s:x.length)+t+x.substring(null!=r?r:x.length)}}),l.selectionStart=0,l.selectionEnd=0})),(0,y.gT)(e)},R=async e=>{let t=e[0],l=t.name.split(".").pop();if(console.log(t),console.log(l),["png","jpg","jpeg","webp"].includes("image/"+l)){S.A.error("File type not supported",{position:"top-center"});return}try{let e=await new Promise((e,l)=>{let s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(s.result),s.onerror=e=>l(e)});await d(JSON.stringify({prompt:"",image:e}))}catch(e){S.A.error("Error uploading file")}},{getRootProps:I,getInputProps:K,open:D}=(0,E.uI)({onDrop:R,multiple:!1,useFsAccessApi:!1,noClick:!0});return i?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(w.w,{className:"m-8 grid h-[95dvh] w-auto grid-cols-1 grid-rows-[auto_auto_1fr_auto]  items-center gap-4 p-4",children:[(0,s.jsxs)(N.u,{className:"flex flex-col items-center justify-center gap-3",children:[(0,s.jsx)("h1",{className:"text-5xl text-default-500",children:"React Sandbox"}),(0,s.jsxs)("p",{className:"text-smal text-default-500",children:["This ",(0,s.jsx)("span",{className:"underline",children:"experimental"})," tool allows you to build React components. You can either type a command or upload an image to interact."]})]}),(0,s.jsx)(b.j,{}),(0,s.jsx)(A.G,{className:"h-full overflow-y-auto",children:c||h?(0,s.jsx)("div",{className:"flex h-full justify-center",children:(0,s.jsx)(w.w,{fullWidth:!0,children:(0,s.jsxs)(A.G,{className:"grid h-full w-full grid-cols-[1.5fr_auto_1fr] grid-rows-1 justify-items-center gap-3 p-8",children:[(0,s.jsx)(o,{codeOutput:F}),(0,s.jsx)(b.j,{orientation:"vertical"}),(0,s.jsx)(u,{codeBlock:O})]})})}):(0,s.jsx)(w.w,{className:"m-auto w-fit",children:(0,s.jsx)("div",{...I(),children:(0,s.jsxs)(m.A,{isIconOnly:!0,variant:"bordered",onClick:D,className:"mx-auto flex h-fit w-fit flex-col items-center justify-center p-4",children:[(0,s.jsx)("input",{...K(),className:"hidden"}),(0,s.jsx)(f.Z,{color:"gray",height:128,width:128}),(0,s.jsx)("h2",{className:"-translate-y-2 text-xl text-default-500",children:"Start dropping an image"})]})})})}),(0,s.jsx)(C.i,{children:(0,s.jsx)(v,{handleSubmitC:P,handleInputChange:p,input:x,clear:()=>{j("")},isLoading:h,showStopButton:L,open:D,getRootProps:I,getInputProps:K})})]})}):null}}},function(e){e.O(0,[911,571,565,665,426,375,650,869,54,971,69,744],function(){return e(e.s=19945)}),_N_E=e.O()}]);